var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t,n,i){if(e){const o=a(e,t,n,i);return e[0](o)}}function a(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function c(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}function u(e,t,n,i,o,s){if(o){const r=a(t,n,i,s);e.p(r,o)}}function l(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function d(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function m(){return v(" ")}function g(){return v("")}function N(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function x(e,t,n){e.classList[n?"add":"remove"](t)}let w;function G(e){w=e}function I(){if(!w)throw new Error("Function called outside component initialization");return w}function k(e){I().$$.on_mount.push(e)}function U(){const e=I();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,o)}))}}}function E(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const S=[],q=[],T=[],R=[],L=Promise.resolve();let F=!1;function C(e){T.push(e)}function D(e){R.push(e)}let O=!1;const P=new Set;function M(){if(!O){O=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];G(t),j(t.$$)}for(G(null),S.length=0;q.length;)q.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];P.has(t)||(P.add(t),t())}T.length=0}while(S.length);for(;R.length;)R.pop()();F=!1,O=!1,P.clear()}}function j(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const z=new Set;let A;function W(){A={r:0,c:[],p:A}}function V(){A.r||i(A.c),A=A.p}function _(e,t){e&&e.i&&(z.delete(e),e.i(t))}function H(e,t,n,i){if(e&&e.o){if(z.has(e))return;z.add(e),A.c.push((()=>{z.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function B(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Y(e){e&&e.c()}function Q(e,n,s,r){const{fragment:a,on_mount:c,on_destroy:u,after_update:l}=e.$$;a&&a.m(n,s),r||C((()=>{const n=c.map(t).filter(o);u?u.push(...n):i(n),e.$$.on_mount=[]})),l.forEach(C)}function X(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(S.push(e),F||(F=!0,L.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,o,s,r,a,c,u,l=[-1]){const d=w;G(t);const h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:l,skip_bound:!1,root:o.target||d.$$.root};u&&u(h.root);let p=!1;if(h.ctx=s?s(t,o.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),p&&J(t,e)),n})):[],h.update(),p=!0,i(h.before_update),h.fragment=!!r&&r(h.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);h.fragment&&h.fragment.l(e),e.forEach(f)}else h.fragment&&h.fragment.c();o.intro&&_(t.$$.fragment),Q(t,o.target,o.anchor,o.customElement),M()}G(d)}class Z{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ee(e){let t,n,i;return{c(){t=p("button"),t.textContent="❌",y(t,"class","remove-button svelte-1rydcio")},m(s,r){h(s,t,r),n||(i=N(t,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function te(e){let t;return{c(){t=v("↧")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function ne(e){let t;return{c(){t=v("↥")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function ie(e){let t,n,i,o,s,a,g,$,w,G,I,k,U,E=e[2]&&ee(e);function S(e,t){return e[0]?ne:te}let q=S(e),T=q(e);const R=e[4].default,L=r(R,e,e[3],null);return{c(){t=p("div"),n=p("div"),E&&E.c(),i=m(),o=p("button"),s=p("span"),a=v(e[1]),g=m(),$=p("span"),T.c(),w=m(),G=p("section"),L&&L.c(),y(s,"class","heading svelte-1rydcio"),y($,"class","icon svelte-1rydcio"),y(o,"class","panel-button svelte-1rydcio"),y(n,"class","panel-header svelte-1rydcio"),y(G,"class","panel-content svelte-1rydcio"),x(G,"isOpen",e[0]),y(t,"class","panel")},m(r,c){h(r,t,c),d(t,n),E&&E.m(n,null),d(n,i),d(n,o),d(o,s),d(s,a),d(o,g),d(o,$),T.m($,null),d(t,w),d(t,G),L&&L.m(G,null),I=!0,k||(U=N(o,"click",e[5]),k=!0)},p(e,[t]){e[2]?E?E.p(e,t):(E=ee(e),E.c(),E.m(n,i)):E&&(E.d(1),E=null),(!I||2&t)&&b(a,e[1]),q!==(q=S(e))&&(T.d(1),T=q(e),T&&(T.c(),T.m($,null))),L&&L.p&&(!I||8&t)&&u(L,R,e,e[3],I?c(R,e[3],t,null):l(e[3]),null),1&t&&x(G,"isOpen",e[0])},i(e){I||(_(L,e),I=!0)},o(e){H(L,e),I=!1},d(e){e&&f(t),E&&E.d(),T.d(),L&&L.d(e),k=!1,U()}}}function oe(e,t,n){let{$$slots:i={},$$scope:o}=t,{heading:s}=t,{isOpen:r}=t,{removeHandler:a=null}=t;return e.$$set=e=>{"heading"in e&&n(1,s=e.heading),"isOpen"in e&&n(0,r=e.isOpen),"removeHandler"in e&&n(2,a=e.removeHandler),"$$scope"in e&&n(3,o=e.$$scope)},[r,s,a,o,i,()=>n(0,r=!r)]}class se extends Z{constructor(e){super(),K(this,e,oe,ie,s,{heading:1,isOpen:0,removeHandler:2})}}function re(e){let t,n,i;return{c(){t=p("button"),t.innerHTML='<span class="icon">⅟</span>',y(t,"class","inverseButton svelte-zaktlo"),x(t,"useInverse",e[0])},m(o,s){h(o,t,s),n||(i=N(t,"click",e[17]),n=!0)},p(e,n){1&n&&x(t,"useInverse",e[0])},d(e){e&&f(t),n=!1,i()}}}function ae(t){let n,o,s,r,a,c,u,l,g,x,w,G,I,k,U,E,S,q,T=t[3]&&re(t);return{c(){n=p("div"),o=p("div"),s=v(t[1]),r=m(),T&&T.c(),a=m(),c=p("div"),u=m(),l=p("div"),g=v(t[4]),x=m(),w=v(t[2]),G=m(),I=p("div"),k=p("button"),k.innerHTML='<span class="icon">+</span>',U=m(),E=p("button"),E.innerHTML='<span class="icon">−</span>',y(o,"class","label svelte-zaktlo"),y(c,"class","knob center svelte-zaktlo"),$(c,"--rotation",t[5]),y(l,"class","label svelte-zaktlo"),y(k,"class","stepButton svelte-zaktlo"),y(E,"class","stepButton svelte-zaktlo"),y(I,"class","stepButtonContainer svelte-zaktlo"),y(n,"class","knobContainer svelte-zaktlo")},m(e,i){h(e,n,i),d(n,o),d(o,s),d(n,r),T&&T.m(n,null),d(n,a),d(n,c),d(n,u),d(n,l),d(l,g),d(l,x),d(l,w),d(n,G),d(n,I),d(I,k),d(I,U),d(I,E),S||(q=[N(c,"pointerdown",t[6]),N(k,"pointerdown",t[7]),N(E,"pointerdown",t[8])],S=!0)},p(e,[t]){2&t&&b(s,e[1]),e[3]?T?T.p(e,t):(T=re(e),T.c(),T.m(n,a)):T&&(T.d(1),T=null),32&t&&$(c,"--rotation",e[5]),16&t&&b(g,e[4]),4&t&&b(w,e[2])},i:e,o:e,d(e){e&&f(n),T&&T.d(),S=!1,i(q)}}}function ce(e,t,n){let i,o,s,r,a,c,u,{value:l,min:d,max:h}=t,{rotRange:f=2*Math.PI*.83}=t,{pixelRange:p=200}=t,{startRotation:v=.83*-Math.PI}=t,{title:m=""}=t,{unit:g=""}=t,{outputValue:N=null}=t,{enableInverse:y=!1}=t,{useInverse:b=!1}=t;function $({clientY:e}){n(9,l=function(e,t,n){return Math.round(Math.max(t,Math.min(e,n)))}(r-i*(e-s)/p,d,h))}function x(){window.removeEventListener("pointermove",$),window.removeEventListener("pointerup",x)}function w(){a=!1,clearTimeout(c),window.removeEventListener("pointerup",w)}function G(){a&&l<h&&(n(9,l+=1),c=setTimeout(G,300))}function I(){a&&l>d&&(n(9,l-=1),c=setTimeout(I,300))}return e.$$set=e=>{"value"in e&&n(9,l=e.value),"min"in e&&n(10,d=e.min),"max"in e&&n(11,h=e.max),"rotRange"in e&&n(12,f=e.rotRange),"pixelRange"in e&&n(13,p=e.pixelRange),"startRotation"in e&&n(14,v=e.startRotation),"title"in e&&n(1,m=e.title),"unit"in e&&n(2,g=e.unit),"outputValue"in e&&n(15,N=e.outputValue),"enableInverse"in e&&n(3,y=e.enableInverse),"useInverse"in e&&n(0,b=e.useInverse)},e.$$.update=()=>{3072&e.$$.dirty&&n(16,i=h-d),87552&e.$$.dirty&&n(5,o=v+(l-d)/i*f),33281&e.$$.dirty&&n(4,u=N??(b?(1/l).toFixed(3):l))},[b,m,g,y,u,o,function({clientY:e}){s=e,r=l,window.addEventListener("pointermove",$),window.addEventListener("pointerup",x)},function(){a=!0,G(),window.addEventListener("pointerup",w)},function(){a=!0,I(),window.addEventListener("pointerup",w)},l,d,h,f,p,v,N,i,()=>{n(0,b=!b)}]}class ue extends Z{constructor(e){super(),K(this,e,ce,ae,s,{value:9,min:10,max:11,rotRange:12,pixelRange:13,startRotation:14,title:1,unit:2,outputValue:15,enableInverse:3,useInverse:0})}}const le=e=>({}),de=e=>({}),he=e=>({}),fe=e=>({});function pe(e){let t,n,i,o,s,a,v,g,N,b,$,w;function G(t){e[11](t)}let I={title:"WAVE TYPE",outputValue:e[1],max:4,min:1};function k(t){e[12](t)}function U(t){e[13](t)}void 0!==e[6]&&(I.value=e[6]),i=new ue({props:I}),q.push((()=>B(i,"value",G)));let E={title:"FREQUENCY",unit:"Hz",max:e[2],min:e[3],enableInverse:e[5]};void 0!==e[7]&&(E.value=e[7]),void 0!==e[0]&&(E.useInverse=e[0]),a=new ue({props:E}),q.push((()=>B(a,"value",k))),q.push((()=>B(a,"useInverse",U)));const S=e[10].knob3,T=r(S,e,e[9],fe),R=e[10].label,L=r(R,e,e[9],de);return{c(){t=p("div"),n=p("div"),Y(i.$$.fragment),s=m(),Y(a.$$.fragment),N=m(),T&&T.c(),b=m(),$=p("div"),L&&L.c(),y(n,"class","controls svelte-15aqzp1"),x(n,"disabled",e[4]),y($,"class","labelContainer svelte-15aqzp1"),y(t,"class","container svelte-15aqzp1")},m(e,o){h(e,t,o),d(t,n),Q(i,n,null),d(n,s),Q(a,n,null),d(n,N),T&&T.m(n,null),d(t,b),d(t,$),L&&L.m($,null),w=!0},p(e,[t]){const s={};2&t&&(s.outputValue=e[1]),!o&&64&t&&(o=!0,s.value=e[6],D((()=>o=!1))),i.$set(s);const r={};4&t&&(r.max=e[2]),8&t&&(r.min=e[3]),32&t&&(r.enableInverse=e[5]),!v&&128&t&&(v=!0,r.value=e[7],D((()=>v=!1))),!g&&1&t&&(g=!0,r.useInverse=e[0],D((()=>g=!1))),a.$set(r),T&&T.p&&(!w||512&t)&&u(T,S,e,e[9],w?c(S,e[9],t,he):l(e[9]),fe),16&t&&x(n,"disabled",e[4]),L&&L.p&&(!w||512&t)&&u(L,R,e,e[9],w?c(R,e[9],t,le):l(e[9]),de)},i(e){w||(_(i.$$.fragment,e),_(a.$$.fragment,e),_(T,e),_(L,e),w=!0)},o(e){H(i.$$.fragment,e),H(a.$$.fragment,e),H(T,e),H(L,e),w=!1},d(e){e&&f(t),X(i),X(a),T&&T.d(e),L&&L.d(e)}}}function ve(e,t,n){let{$$slots:i={},$$scope:o}=t,{waveType:s}=t,{frequency:r}=t,{useInverseFrequency:a=!1}=t,{maxFrequency:c}=t,{minFrequency:u}=t,{disabled:l=!1}=t,{enableInverseFrequency:d=!1}=t,h=1,f=r;const p=["sine","triangle","sawtooth","square"];return e.$$set=e=>{"waveType"in e&&n(1,s=e.waveType),"frequency"in e&&n(8,r=e.frequency),"useInverseFrequency"in e&&n(0,a=e.useInverseFrequency),"maxFrequency"in e&&n(2,c=e.maxFrequency),"minFrequency"in e&&n(3,u=e.minFrequency),"disabled"in e&&n(4,l=e.disabled),"enableInverseFrequency"in e&&n(5,d=e.enableInverseFrequency),"$$scope"in e&&n(9,o=e.$$scope)},e.$$.update=()=>{129&e.$$.dirty&&n(8,r=a?1/f:f),64&e.$$.dirty&&n(1,s=p[h-1])},[a,s,c,u,l,d,h,f,r,o,i,function(e){h=e,n(6,h)},function(e){f=e,n(7,f)},function(e){a=e,n(0,a)}]}class me extends Z{constructor(e){super(),K(this,e,ve,pe,s,{waveType:1,frequency:8,useInverseFrequency:0,maxFrequency:2,minFrequency:3,disabled:4,enableInverseFrequency:5})}}function ge(e){let t,n,i;function o(t){e[3](t)}let s={slot:"knob3",title:"DETUNE",unit:"cents",max:50,min:-50};return void 0!==e[2]&&(s.value=e[2]),t=new ue({props:s}),q.push((()=>B(t,"value",o))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(e,i){const o={};!n&&4&i&&(n=!0,o.value=e[2],D((()=>n=!1))),t.$set(o)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){H(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function Ne(e){let t;return{c(){t=p("span"),t.textContent="SOUND",y(t,"slot","label")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function ye(e){let t,n,i,o;function s(t){e[4](t)}function r(t){e[5](t)}let a={maxFrequency:5e3,minFrequency:60,$$slots:{label:[Ne],knob3:[ge]},$$scope:{ctx:e}};return void 0!==e[1]&&(a.frequency=e[1]),void 0!==e[0]&&(a.waveType=e[0]),t=new me({props:a}),q.push((()=>B(t,"frequency",s))),q.push((()=>B(t,"waveType",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),o=!0},p(e,[o]){const s={};68&o&&(s.$$scope={dirty:o,ctx:e}),!n&&2&o&&(n=!0,s.frequency=e[1],D((()=>n=!1))),!i&&1&o&&(i=!0,s.waveType=e[0],D((()=>i=!1))),t.$set(s)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){H(t.$$.fragment,e),o=!1},d(e){X(t,e)}}}function be(e,t,n){let{waveType:i}=t,{frequency:o}=t,{detune:s}=t;return e.$$set=e=>{"waveType"in e&&n(0,i=e.waveType),"frequency"in e&&n(1,o=e.frequency),"detune"in e&&n(2,s=e.detune)},[i,o,s,function(e){s=e,n(2,s)},function(e){o=e,n(1,o)},function(e){i=e,n(0,i)}]}class $e extends Z{constructor(e){super(),K(this,e,be,ye,s,{waveType:0,frequency:1,detune:2})}}const xe=e=>({toggled:1&e}),we=e=>({toggled:e[0]});function Ge(e){let t,n,i=(e[0]?e[4]:e[5])+"";return{c(){t=p("span"),n=v(i),y(t,"class","svelte-1c9ojcg")},m(e,i){h(e,t,i),d(t,n)},p(e,t){49&t&&i!==(i=(e[0]?e[4]:e[5])+"")&&b(n,i)},d(e){e&&f(t)}}}function Ie(e){let t,n,o,s,a,w,G,I,k,U;const E=e[11].default,S=r(E,e,e[10],we),q=S||function(e){let t,n=e[4]&&e[5]&&Ge(e);return{c(){n&&n.c(),t=g()},m(e,i){n&&n.m(e,i),h(e,t,i)},p(e,i){e[4]&&e[5]?n?n.p(e,i):(n=Ge(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&f(t)}}}(e);return{c(){t=p("div"),n=p("label"),o=v(e[1]),s=m(),a=p("div"),w=p("button"),G=m(),q&&q.c(),y(n,"for",e[9]),y(n,"class","svelte-1c9ojcg"),x(n,"hideLabel",e[2]),y(w,"id",e[9]),y(w,"aria-checked",e[0]),y(w,"type","button"),y(w,"role","switch"),$(w,"color",e[6]),$(w,"background-color",e[0]?e[7]:e[8]),w.disabled=e[3],y(w,"class","svelte-1c9ojcg"),y(a,"class","svelte-1c9ojcg"),y(t,"class","container svelte-1c9ojcg")},m(i,r){h(i,t,r),d(t,n),d(n,o),d(t,s),d(t,a),d(a,w),d(a,G),q&&q.m(a,null),I=!0,k||(U=[N(w,"click",e[12]),N(w,"click",e[15]),N(w,"focus",e[13]),N(w,"blur",e[14])],k=!0)},p(e,[t]){(!I||2&t)&&b(o,e[1]),4&t&&x(n,"hideLabel",e[2]),(!I||1&t)&&y(w,"aria-checked",e[0]),(!I||64&t)&&$(w,"color",e[6]),(!I||385&t)&&$(w,"background-color",e[0]?e[7]:e[8]),(!I||8&t)&&(w.disabled=e[3]),S?S.p&&(!I||1025&t)&&u(S,E,e,e[10],I?c(E,e[10],t,xe):l(e[10]),we):q&&q.p&&(!I||49&t)&&q.p(e,I?t:-1)},i(e){I||(_(q,e),I=!0)},o(e){H(q,e),I=!1},d(e){e&&f(t),q&&q.d(e),k=!1,i(U)}}}function ke(e,t,n){let{$$slots:i={},$$scope:o}=t,{toggled:s=!0}=t,{label:r="Label"}=t,{hideLabel:a=!1}=t,{disabled:c=!1}=t,{on:u}=t,{off:l}=t,{switchColor:d="#fff"}=t,{toggledColor:h="#0f62fe"}=t,{untoggledColor:f="#8d8d8d"}=t,p="toggle"+Math.random().toString(36);const v=U();return e.$$set=e=>{"toggled"in e&&n(0,s=e.toggled),"label"in e&&n(1,r=e.label),"hideLabel"in e&&n(2,a=e.hideLabel),"disabled"in e&&n(3,c=e.disabled),"on"in e&&n(4,u=e.on),"off"in e&&n(5,l=e.off),"switchColor"in e&&n(6,d=e.switchColor),"toggledColor"in e&&n(7,h=e.toggledColor),"untoggledColor"in e&&n(8,f=e.untoggledColor),"$$scope"in e&&n(10,o=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&v("toggle",s)},[s,r,a,c,u,l,d,h,f,p,o,i,function(t){E.call(this,e,t)},function(t){E.call(this,e,t)},function(t){E.call(this,e,t)},()=>n(0,s=!s)]}class Ue extends Z{constructor(e){super(),K(this,e,ke,Ie,s,{toggled:0,label:1,hideLabel:2,disabled:3,on:4,off:5,switchColor:6,toggledColor:7,untoggledColor:8})}}function Ee(e){let t,n,i;function o(t){e[5](t)}let s={slot:"knob3",title:"DEPTH",unit:"",max:100,min:1};return void 0!==e[3]&&(s.value=e[3]),t=new ue({props:s}),q.push((()=>B(t,"value",o))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(e,i){const o={};!n&&8&i&&(n=!0,o.value=e[3],D((()=>n=!1))),t.$set(o)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){H(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function Se(e){let t,n,i;function o(t){e[4](t)}let s={slot:"label",hideLabel:!0,label:"toggle LFO",switchColor:"#ff3e00",toggledColor:"#fff",untoggledColor:"#fff",on:"LFO on",off:"LFO off"};return void 0!==e[0]&&(s.toggled=e[0]),t=new Ue({props:s}),q.push((()=>B(t,"toggled",o))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(e,i){const o={};!n&&1&i&&(n=!0,o.toggled=e[0],D((()=>n=!1))),t.$set(o)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){H(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function qe(e){let t,n,i,o;function s(t){e[6](t)}function r(t){e[7](t)}let a={disabled:!e[0],maxFrequency:200,minFrequency:1,enableInverseFrequency:!0,$$slots:{label:[Se],knob3:[Ee]},$$scope:{ctx:e}};return void 0!==e[2]&&(a.frequency=e[2]),void 0!==e[1]&&(a.waveType=e[1]),t=new me({props:a}),q.push((()=>B(t,"frequency",s))),q.push((()=>B(t,"waveType",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),o=!0},p(e,[o]){const s={};1&o&&(s.disabled=!e[0]),265&o&&(s.$$scope={dirty:o,ctx:e}),!n&&4&o&&(n=!0,s.frequency=e[2],D((()=>n=!1))),!i&&2&o&&(i=!0,s.waveType=e[1],D((()=>i=!1))),t.$set(s)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){H(t.$$.fragment,e),o=!1},d(e){X(t,e)}}}function Te(e,t,n){let{lfoActive:i}=t,{waveType:o}=t,{frequency:s}=t,{depth:r}=t;return e.$$set=e=>{"lfoActive"in e&&n(0,i=e.lfoActive),"waveType"in e&&n(1,o=e.waveType),"frequency"in e&&n(2,s=e.frequency),"depth"in e&&n(3,r=e.depth)},[i,o,s,r,function(e){i=e,n(0,i)},function(e){r=e,n(3,r)},function(e){s=e,n(2,s)},function(e){o=e,n(1,o)}]}class Re extends Z{constructor(e){super(),K(this,e,Te,qe,s,{lfoActive:0,waveType:1,frequency:2,depth:3})}}function Le(e){let t,n,i,o,s,r,a,c,u,l,d;function p(t){e[9](t)}function v(t){e[10](t)}function g(t){e[11](t)}let N={};function y(t){e[12](t)}function b(t){e[13](t)}function $(t){e[14](t)}function x(t){e[15](t)}void 0!==e[3]&&(N.frequency=e[3]),void 0!==e[2]&&(N.waveType=e[2]),void 0!==e[4]&&(N.detune=e[4]),t=new $e({props:N}),q.push((()=>B(t,"frequency",p))),q.push((()=>B(t,"waveType",v))),q.push((()=>B(t,"detune",g)));let w={};return void 0!==e[8]&&(w.lfoActive=e[8]),void 0!==e[6]&&(w.frequency=e[6]),void 0!==e[5]&&(w.waveType=e[5]),void 0!==e[7]&&(w.depth=e[7]),r=new Re({props:w}),q.push((()=>B(r,"lfoActive",y))),q.push((()=>B(r,"frequency",b))),q.push((()=>B(r,"waveType",$))),q.push((()=>B(r,"depth",x))),{c(){Y(t.$$.fragment),s=m(),Y(r.$$.fragment)},m(e,n){Q(t,e,n),h(e,s,n),Q(r,e,n),d=!0},p(e,s){const d={};!n&&8&s&&(n=!0,d.frequency=e[3],D((()=>n=!1))),!i&&4&s&&(i=!0,d.waveType=e[2],D((()=>i=!1))),!o&&16&s&&(o=!0,d.detune=e[4],D((()=>o=!1))),t.$set(d);const h={};!a&&256&s&&(a=!0,h.lfoActive=e[8],D((()=>a=!1))),!c&&64&s&&(c=!0,h.frequency=e[6],D((()=>c=!1))),!u&&32&s&&(u=!0,h.waveType=e[5],D((()=>u=!1))),!l&&128&s&&(l=!0,h.depth=e[7],D((()=>l=!1))),r.$set(h)},i(e){d||(_(t.$$.fragment,e),_(r.$$.fragment,e),d=!0)},o(e){H(t.$$.fragment,e),H(r.$$.fragment,e),d=!1},d(e){X(t,e),e&&f(s),X(r,e)}}}function Fe(e){let t,n;return t=new se({props:{heading:"SOUNDWAVE",isOpen:!0,removeHandler:e[16],$$slots:{default:[Le]},$$scope:{ctx:e}}}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,[n]){const i={};3&n&&(i.removeHandler=e[16]),262652&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function Ce(e,t,n){let i,o,{sound:s}=t,{removeHandler:r}=t,a=80,c=0,u=10,l=50,d=!1;return e.$$set=e=>{"sound"in e&&n(0,s=e.sound),"removeHandler"in e&&n(1,r=e.removeHandler)},e.$$.update=()=>{9&e.$$.dirty&&s.setFrequency(a),4&e.$$.dirty&&i&&function(){const{isPlaying:e}=s;s.init(i,a),e&&s.play()}(),17&e.$$.dirty&&void 0!==c&&s.setDetune(c),481&e.$$.dirty&&(d?s.initLfo(o,u,l):s.removeLfo())},[s,r,i,a,c,o,u,l,d,function(e){a=e,n(3,a)},function(e){i=e,n(2,i)},function(e){c=e,n(4,c)},function(e){d=e,n(8,d)},function(e){u=e,n(6,u)},function(e){o=e,n(5,o)},function(e){l=e,n(7,l)},()=>r(s)]}class De extends Z{constructor(e){super(),K(this,e,Ce,Fe,s,{sound:0,removeHandler:1})}}function Oe(e){let t,n,i,o,s,r,a,c,u;function l(t){e[4](t)}let d={title:"⅟SAMPLE TIME",max:1e3,min:1,pixelRange:200};function p(t){e[5](t)}void 0!==e[2]&&(d.value=e[2]),t=new ue({props:d}),q.push((()=>B(t,"value",l)));let v={title:"FPS",max:120,min:1,pixelRange:200};function g(t){e[6](t)}void 0!==e[0]&&(v.value=e[0]),o=new ue({props:v}),q.push((()=>B(o,"value",p)));let N={title:"WAVES SHOWING",max:30,min:1,pixelRange:200};return void 0!==e[1]&&(N.value=e[1]),a=new ue({props:N}),q.push((()=>B(a,"value",g))),{c(){Y(t.$$.fragment),i=m(),Y(o.$$.fragment),r=m(),Y(a.$$.fragment)},m(e,n){Q(t,e,n),h(e,i,n),Q(o,e,n),h(e,r,n),Q(a,e,n),u=!0},p(e,i){const r={};!n&&4&i&&(n=!0,r.value=e[2],D((()=>n=!1))),t.$set(r);const u={};!s&&1&i&&(s=!0,u.value=e[0],D((()=>s=!1))),o.$set(u);const l={};!c&&2&i&&(c=!0,l.value=e[1],D((()=>c=!1))),a.$set(l)},i(e){u||(_(t.$$.fragment,e),_(o.$$.fragment,e),_(a.$$.fragment,e),u=!0)},o(e){H(t.$$.fragment,e),H(o.$$.fragment,e),H(a.$$.fragment,e),u=!1},d(e){X(t,e),e&&f(i),X(o,e),e&&f(r),X(a,e)}}}function Pe(e){let t,n;return t=new se({props:{heading:"VIEW PARAMETERS",isOpen:!0,$$slots:{default:[Oe]},$$scope:{ctx:e}}}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,[n]){const i={};135&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function Me(e,t,n){let{sampleSize:i}=t,{fps:o=60}=t,{oldWavesDisplayed:s=10}=t,r=10;return e.$$set=e=>{"sampleSize"in e&&n(3,i=e.sampleSize),"fps"in e&&n(0,o=e.fps),"oldWavesDisplayed"in e&&n(1,s=e.oldWavesDisplayed)},e.$$.update=()=>{4&e.$$.dirty&&n(3,i=1/r)},[o,s,r,i,function(e){r=e,n(2,r)},function(e){o=e,n(0,o)},function(e){s=e,n(1,s)}]}class je extends Z{constructor(e){super(),K(this,e,Me,Pe,s,{sampleSize:3,fps:0,oldWavesDisplayed:1})}}var ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Ae,We,Ve=(Ae=function(e){!function(t){function n(e,t){this.options={},e=e||this.options;var n={frequency:350,peak:1};for(var i in this.inputNode=this.filterNode=r.context.createBiquadFilter(),this.filterNode.type=t,this.outputNode=s.context.createGain(),this.filterNode.connect(this.outputNode),n)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?n[i]:this[i]}function i(){var e,t,n=r.context.sampleRate*this.time,i=s.context.createBuffer(2,n,r.context.sampleRate),o=i.getChannelData(0),a=i.getChannelData(1);for(t=0;n>t;t++)e=this.reverse?n-t:t,o[t]=(2*Math.random()-1)*Math.pow(1-e/n,this.decay),a[t]=(2*Math.random()-1)*Math.pow(1-e/n,this.decay);this.reverbNode.buffer&&(this.inputNode.disconnect(this.reverbNode),this.reverbNode.disconnect(this.wetGainNode),this.reverbNode=s.context.createConvolver(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode)),this.reverbNode.buffer=i}function o(e){for(var t=r.context.sampleRate,n=new Float32Array(t),i=Math.PI/180,o=0;t>o;o++){var s=2*o/t-1;n[o]=(3+e)*s*20*i/(Math.PI+e*Math.abs(s))}return n}var s={},r=s;e.exports?e.exports=s:t.Pizzicato=t.Pz=s;var a=t.AudioContext||t.webkitAudioContext;if(a){s.context=new a;var c=s.context.createGain();c.connect(s.context.destination),s.Util={isString:function(e){return"[object String]"===toString.call(e)},isObject:function(e){return"[object Object]"===toString.call(e)},isFunction:function(e){return"[object Function]"===toString.call(e)},isNumber:function(e){return"[object Number]"===toString.call(e)&&e===+e},isArray:function(e){return"[object Array]"===toString.call(e)},isInRange:function(e,t,n){return!!(r.Util.isNumber(e)&&r.Util.isNumber(t)&&r.Util.isNumber(n))&&e>=t&&n>=e},isBool:function(e){return"boolean"==typeof e},isOscillator:function(e){return e&&"[object OscillatorNode]"===e.toString()},isAudioBufferSourceNode:function(e){return e&&"[object AudioBufferSourceNode]"===e.toString()},isSound:function(e){return e instanceof r.Sound},isEffect:function(e){for(var t in s.Effects)if(e instanceof s.Effects[t])return!0;return!1},normalize:function(e,t,n){return r.Util.isNumber(e)&&r.Util.isNumber(t)&&r.Util.isNumber(n)?(n-t)*e/1+t:void 0},getDryLevel:function(e){return!r.Util.isNumber(e)||e>1||0>e?0:.5>=e?1:1-2*(e-.5)},getWetLevel:function(e){return!r.Util.isNumber(e)||e>1||0>e?0:e>=.5?1:1-2*(.5-e)}};var u=s.context.createGain(),l=Object.getPrototypeOf(Object.getPrototypeOf(u)),d=l.connect;l.connect=function(e){var t=r.Util.isEffect(e)?e.inputNode:e;return d.call(this,t),e},Object.defineProperty(s,"volume",{enumerable:!0,get:function(){return c.gain.value},set:function(e){r.Util.isInRange(e,0,1)&&c&&(c.gain.value=e)}}),Object.defineProperty(s,"masterGainNode",{enumerable:!1,get:function(){return c},set:function(e){console.error("Can't set the master gain node")}}),s.Events={on:function(e,t,n){e&&t&&(this._events=this._events||{},(this._events[e]||(this._events[e]=[])).push({callback:t,context:n||this,handler:this}))},trigger:function(e){var t,n,i,o;if(e&&(this._events=this._events||{},t=this._events[e]||(this._events[e]=[]))){for(n=Math.max(0,arguments.length-1),i=[],o=0;n>o;o++)i[o]=arguments[o+1];for(o=0;o<t.length;o++)t[o].callback.apply(t[o].context,i)}},off:function(e){e?this._events[e]=void 0:this._events={}}},s.Sound=function(e,t){function n(e,t){e=e||{},this.getRawSourceNode=function(){var t=this.sourceNode?this.sourceNode.frequency.value:e.frequency,n=s.context.createOscillator();return n.type=e.type||"sine",n.frequency.value=t||440,n},this.sourceNode=this.getRawSourceNode(),this.sourceNode.gainSuccessor=r.context.createGain(),this.sourceNode.connect(this.sourceNode.gainSuccessor),c.isFunction(t)&&t()}function i(e,t){e=c.isArray(e)?e:[e];var n=new XMLHttpRequest;n.open("GET",e[0],!0),n.responseType="arraybuffer",n.onload=function(n){s.context.decodeAudioData(n.target.response,function(e){a.getRawSourceNode=function(){var t=s.context.createBufferSource();return t.loop=this.loop,t.buffer=e,t},c.isFunction(t)&&t()}.bind(a),function(n){return console.error("Error decoding audio file "+e[0]),e.length>1?(e.shift(),void i(e,t)):(n=n||new Error("Error decoding audio file "+e[0]),void(c.isFunction(t)&&t(n)))}.bind(a))},n.onreadystatechange=function(t){4===n.readyState&&200!==n.status&&console.error("Error while fetching "+e[0]+". "+n.statusText)},n.send()}function o(e,t){var n=c.isFunction(e)?e:e.audioFunction,i=c.isObject(e)&&e.bufferSize?e.bufferSize:null;if(!i)try{s.context.createScriptProcessor()}catch(e){i=2048}this.getRawSourceNode=function(){var e=s.context.createScriptProcessor(i,1,1);return e.onaudioprocess=n,e}}var a=this,c=s.Util,u=function(e){if(e&&!c.isFunction(e)&&!c.isString(e)&&!c.isObject(e))return"Description type not supported. Initialize a sound using an object, a function or a string.";if(c.isObject(e)){if(!c.isString(e.source)||-1===["wave","file","input","script","sound"].indexOf(e.source))return"Specified source not supported. Sources can be wave, file, input or script";if(!("file"!==e.source||e.options&&e.options.path))return"A path is needed for sounds with a file source";if(!("script"!==e.source||e.options&&e.options.audioFunction))return"An audio function is needed for sounds with a script source"}}(e),l=c.isObject(e)&&c.isObject(e.options);if(u)throw console.error(u),new Error("Error initializing Pizzicato Sound: "+u);this.detached=l&&e.options.detached,this.masterVolume=s.context.createGain(),this.fadeNode=s.context.createGain(),this.fadeNode.gain.value=0,this.detached||this.masterVolume.connect(s.masterGainNode),this.lastTimePlayed=0,this.effects=[],this.effectConnectors=[],this.playing=this.paused=!1,this.loop=l&&e.options.loop,this.attack=l&&c.isNumber(e.options.attack)?e.options.attack:.04,this.volume=l&&c.isNumber(e.options.volume)?e.options.volume:1,l&&c.isNumber(e.options.release)?this.release=e.options.release:l&&c.isNumber(e.options.sustain)?(console.warn("'sustain' is deprecated. Use 'release' instead."),this.release=e.options.sustain):this.release=.04,e?c.isString(e)?i.bind(this)(e,t):c.isFunction(e)?o.bind(this)(e,t):"file"===e.source?i.bind(this)(e.options.path,t):"wave"===e.source?n.bind(this)(e.options,t):"input"===e.source?function(e,t){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia||navigator.mediaDevices.getUserMedia){var n=function(e){a.getRawSourceNode=function(){return s.context.createMediaStreamSource(e)},c.isFunction(t)&&t()}.bind(a),i=function(e){c.isFunction(t)&&t(e)};navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(n).catch(i):navigator.getUserMedia({audio:!0},n,i)}else console.error("Your browser does not support getUserMedia")}.bind(this)(e,t):"script"===e.source?o.bind(this)(e.options,t):"sound"===e.source&&function(e,t){this.getRawSourceNode=e.sound.getRawSourceNode,e.sound.sourceNode&&r.Util.isOscillator(e.sound.sourceNode)&&(this.sourceNode=this.getRawSourceNode(),this.frequency=e.sound.frequency)}.bind(this)(e.options,t):n.bind(this)({},t)},s.Sound.prototype=Object.create(s.Events,{play:{enumerable:!0,value:function(e,t){this.playing||(r.Util.isNumber(t)||(t=this.offsetTime||0),r.Util.isNumber(e)||(e=0),this.playing=!0,this.paused=!1,this.sourceNode=this.getSourceNode(),this.applyAttack(),r.Util.isFunction(this.sourceNode.start)&&(this.lastTimePlayed=s.context.currentTime-t,this.sourceNode.start(r.context.currentTime+e,t)),this.trigger("play"))}},stop:{enumerable:!0,value:function(){(this.paused||this.playing)&&(this.paused=this.playing=!1,this.stopWithRelease(),this.offsetTime=0,this.trigger("stop"))}},pause:{enumerable:!0,value:function(){if(!this.paused&&this.playing){this.paused=!0,this.playing=!1,this.stopWithRelease();var e=r.context.currentTime-this.lastTimePlayed;this.sourceNode.buffer?this.offsetTime=e%(this.sourceNode.buffer.length/r.context.sampleRate):this.offsetTime=e,this.trigger("pause")}}},clone:{enumerable:!0,value:function(){for(var e=new s.Sound({source:"sound",options:{loop:this.loop,attack:this.attack,release:this.release,volume:this.volume,sound:this}}),t=0;t<this.effects.length;t++)e.addEffect(this.effects[t]);return e}},onEnded:{enumerable:!0,value:function(e){return function(){this.sourceNode&&this.sourceNode!==e||(this.playing&&this.stop(),this.paused||this.trigger("end"))}}},addEffect:{enumerable:!0,value:function(e){if(!r.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.fadeNode;t.disconnect(),t.connect(e);var n=r.context.createGain();return this.effectConnectors.push(n),e.connect(n),n.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this sound."),this;var n=this.playing;n&&this.pause();var i=0===t?this.fadeNode:this.effectConnectors[t-1];i.disconnect();var o,s=this.effectConnectors[t];return s.disconnect(),e.disconnect(s),this.effectConnectors.splice(t,1),this.effects.splice(t,1),o=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],i.connect(o),n&&this.play(),this}},connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},connectEffects:{enumerable:!0,value:function(){for(var e=[],t=0;t<this.effects.length;t++){var n=t===this.effects.length-1?this.masterVolume:this.effects[t+1].inputNode;e[t]=r.context.createGain(),this.effects[t].outputNode.disconnect(this.effectConnectors[t]),this.effects[t].outputNode.connect(n)}}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){r.Util.isInRange(e,0,1)&&this.masterVolume&&(this.masterVolume.gain.value=e)}},frequency:{enumerable:!0,get:function(){return this.sourceNode&&r.Util.isOscillator(this.sourceNode)?this.sourceNode.frequency.value:null},set:function(e){this.sourceNode&&r.Util.isOscillator(this.sourceNode)&&(this.sourceNode.frequency.value=e)}},sustain:{enumerable:!0,get:function(){return console.warn("'sustain' is deprecated. Use 'release' instead."),this.release},set:function(e){console.warn("'sustain' is deprecated. Use 'release' instead."),r.Util.isInRange(e,0,10)&&(this.release=e)}},getSourceNode:{enumerable:!0,value:function(){if(this.sourceNode){var e=this.sourceNode;e.gainSuccessor.gain.setValueAtTime(e.gainSuccessor.gain.value,r.context.currentTime),e.gainSuccessor.gain.linearRampToValueAtTime(1e-4,r.context.currentTime+.2),setTimeout((function(){e.disconnect(),e.gainSuccessor.disconnect()}),200)}var t=this.getRawSourceNode();return t.gainSuccessor=r.context.createGain(),t.connect(t.gainSuccessor),t.gainSuccessor.connect(this.fadeNode),this.fadeNode.connect(this.getInputNode()),r.Util.isAudioBufferSourceNode(t)&&(t.onended=this.onEnded(t).bind(this)),t}},getInputNode:{enumerable:!0,value:function(){return this.effects.length>0?this.effects[0].inputNode:this.masterVolume}},applyAttack:{enumerable:!1,value:function(){if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(r.context.currentTime),this.attack){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t=this.attack;e||(t=(1-this.fadeNode.gain.value)*this.attack),this.fadeNode.gain.setTargetAtTime(1,r.context.currentTime,2*t)}else this.fadeNode.gain.setTargetAtTime(1,r.context.currentTime,.001)}},stopWithRelease:{enumerable:!1,value:function(e){var t=this.sourceNode,n=function(){return r.Util.isFunction(t.stop)?t.stop(0):t.disconnect()};if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(r.context.currentTime),!this.release)return this.fadeNode.gain.setTargetAtTime(0,r.context.currentTime,.001),void n();var i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o=this.release;i||(o=this.fadeNode.gain.value*this.release),this.fadeNode.gain.setTargetAtTime(1e-5,r.context.currentTime,o/5),window.setTimeout((function(){n()}),1e3*o)}}}),s.Group=function(e){e=e||[],this.mergeGainNode=r.context.createGain(),this.masterVolume=r.context.createGain(),this.sounds=[],this.effects=[],this.effectConnectors=[],this.mergeGainNode.connect(this.masterVolume),this.masterVolume.connect(r.masterGainNode);for(var t=0;t<e.length;t++)this.addSound(e[t])},s.Group.prototype=Object.create(r.Events,{connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},addSound:{enumerable:!0,value:function(e){return r.Util.isSound(e)?this.sounds.indexOf(e)>-1?void console.warn("The Pizzicato.Sound object was already added to this group"):e.detached?void console.warn("Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together."):(e.disconnect(r.masterGainNode),e.connect(this.mergeGainNode),void this.sounds.push(e)):void console.error("You can only add Pizzicato.Sound objects")}},removeSound:{enumerable:!0,value:function(e){var t=this.sounds.indexOf(e);return-1===t?void console.warn("Cannot remove a sound that is not part of this group."):(e.disconnect(this.mergeGainNode),e.connect(r.masterGainNode),void this.sounds.splice(t,1))}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){r.Util.isInRange(e,0,1)&&(this.masterVolume.gain.value=e)}},play:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].play();this.trigger("play")}},stop:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].stop();this.trigger("stop")}},pause:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].pause();this.trigger("pause")}},addEffect:{enumerable:!0,value:function(e){if(!r.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.mergeGainNode;t.disconnect(),t.connect(e);var n=r.context.createGain();return this.effectConnectors.push(n),e.connect(n),n.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this group."),this;var n=0===t?this.mergeGainNode:this.effectConnectors[t-1];n.disconnect();var i,o=this.effectConnectors[t];return o.disconnect(),e.disconnect(o),this.effectConnectors.splice(t,1),this.effects.splice(t,1),i=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],n.connect(i),this}}}),s.Effects={};var h=Object.create(null,{connect:{enumerable:!0,value:function(e){return this.outputNode.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.outputNode.disconnect(e),this}}});s.Effects.Delay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.delayNode),this.inputNode.connect(this.delayNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Delay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),s.Effects.Compressor=function(e){this.options={},e=e||this.options;var t={threshold:-24,knee:30,attack:.003,release:.25,ratio:12};for(var n in this.inputNode=this.compressorNode=s.context.createDynamicsCompressor(),this.outputNode=s.context.createGain(),this.compressorNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Compressor.prototype=Object.create(h,{threshold:{enumerable:!0,get:function(){return this.compressorNode.threshold.value},set:function(e){s.Util.isInRange(e,-100,0)&&(this.compressorNode.threshold.value=e)}},knee:{enumerable:!0,get:function(){return this.compressorNode.knee.value},set:function(e){s.Util.isInRange(e,0,40)&&(this.compressorNode.knee.value=e)}},attack:{enumerable:!0,get:function(){return this.compressorNode.attack.value},set:function(e){s.Util.isInRange(e,0,1)&&(this.compressorNode.attack.value=e)}},release:{enumerable:!0,get:function(){return this.compressorNode.release.value},set:function(e){s.Util.isInRange(e,0,1)&&(this.compressorNode.release.value=e)}},ratio:{enumerable:!0,get:function(){return this.compressorNode.ratio.value},set:function(e){s.Util.isInRange(e,1,20)&&(this.compressorNode.ratio.value=e)}},getCurrentGainReduction:function(){return this.compressorNode.reduction}}),s.Effects.LowPassFilter=function(e){n.call(this,e,"lowpass")},s.Effects.HighPassFilter=function(e){n.call(this,e,"highpass")};var f=Object.create(h,{frequency:{enumerable:!0,get:function(){return this.filterNode.frequency.value},set:function(e){s.Util.isInRange(e,10,22050)&&(this.filterNode.frequency.value=e)}},peak:{enumerable:!0,get:function(){return this.filterNode.Q.value},set:function(e){s.Util.isInRange(e,1e-4,1e3)&&(this.filterNode.Q.value=e)}}});s.Effects.LowPassFilter.prototype=f,s.Effects.HighPassFilter.prototype=f,s.Effects.Distortion=function(e){this.options={},e=e||this.options;var t={gain:.5};for(var n in this.waveShaperNode=s.context.createWaveShaper(),this.inputNode=this.outputNode=this.waveShaperNode,t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Distortion.prototype=Object.create(h,{gain:{enumerable:!0,get:function(){return this.options.gain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.gain=e,this.adjustGain())}},adjustGain:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var e,t=r.Util.isNumber(this.options.gain)?parseInt(100*this.options.gain,10):50,n=44100,i=new Float32Array(n),o=Math.PI/180,s=0;n>s;++s)e=2*s/n-1,i[s]=(3+t)*e*20*o/(Math.PI+t*Math.abs(e));this.waveShaperNode.curve=i}}}),s.Effects.Flanger=function(e){this.options={},e=e||this.options;var t={time:.45,speed:.2,depth:.1,feedback:.1,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.inputFeedbackNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.oscillatorNode=s.context.createOscillator(),this.gainNode=s.context.createGain(),this.feedbackNode=s.context.createGain(),this.oscillatorNode.type="sine",this.inputNode.connect(this.inputFeedbackNode),this.inputNode.connect(this.dryGainNode),this.inputFeedbackNode.connect(this.delayNode),this.inputFeedbackNode.connect(this.wetGainNode),this.delayNode.connect(this.wetGainNode),this.delayNode.connect(this.feedbackNode),this.feedbackNode.connect(this.inputFeedbackNode),this.oscillatorNode.connect(this.gainNode),this.gainNode.connect(this.delayNode.delayTime),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),this.oscillatorNode.start(0),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Flanger.prototype=Object.create(h,{time:{enumberable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.time=e,this.delayNode.delayTime.value=r.Util.normalize(e,.001,.02))}},speed:{enumberable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.speed=e,this.oscillatorNode.frequency.value=r.Util.normalize(e,.5,5))}},depth:{enumberable:!0,get:function(){return this.options.depth},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.depth=e,this.gainNode.gain.value=r.Util.normalize(e,5e-4,.005))}},feedback:{enumberable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=e,this.feedbackNode.gain.value=r.Util.normalize(e,0,.8))}},mix:{enumberable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}}}),s.Effects.StereoPanner=function(e){this.options={},e=e||this.options;var t={pan:0};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):s.context.createPanner?(console.warn("Your browser does not support the StereoPannerNode. Will use PannerNode instead."),this.pannerNode=s.context.createPanner(),this.pannerNode.type="equalpower",this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):(console.warn("Your browser does not support the Panner effect."),this.inputNode.connect(this.outputNode)),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.StereoPanner.prototype=Object.create(h,{pan:{enumerable:!0,get:function(){return this.options.pan},set:function(e){r.Util.isInRange(e,-1,1)&&(this.options.pan=e,this.pannerNode)&&(this.pannerNode.toString().indexOf("StereoPannerNode")>-1?this.pannerNode.pan.value=e:this.pannerNode.setPosition(e,0,1-Math.abs(e)))}}}),s.Effects.Convolver=function(e,t){this.options={},e=e||this.options;var n=this,i=new XMLHttpRequest,o={mix:.5};for(var a in this.callback=t,this.inputNode=s.context.createGain(),this.convolverNode=s.context.createConvolver(),this.outputNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.inputNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),o)this[a]=e[a],this[a]=void 0===this[a]||null===this[a]?o[a]:this[a];return e.impulse?(i.open("GET",e.impulse,!0),i.responseType="arraybuffer",i.onload=function(e){var t=e.target.response;s.context.decodeAudioData(t,(function(e){n.convolverNode.buffer=e,n.callback&&r.Util.isFunction(n.callback)&&n.callback()}),(function(e){e=e||new Error("Error decoding impulse file"),n.callback&&r.Util.isFunction(n.callback)&&n.callback(e)}))},i.onreadystatechange=function(t){4===i.readyState&&200!==i.status&&console.error("Error while fetching "+e.impulse+". "+i.statusText)},void i.send()):void console.error("No impulse file specified.")},s.Effects.Convolver.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}}}),s.Effects.PingPongDelay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.delayNodeLeft=s.context.createDelay(),this.delayNodeRight=s.context.createDelay(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.channelMerger=s.context.createChannelMerger(2),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNodeLeft.connect(this.channelMerger,0,0),this.delayNodeRight.connect(this.channelMerger,0,1),this.delayNodeLeft.connect(this.delayNodeRight),this.feedbackGainNode.connect(this.delayNodeLeft),this.delayNodeRight.connect(this.feedbackGainNode),this.inputNode.connect(this.feedbackGainNode),this.channelMerger.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.PingPongDelay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNodeLeft.delayTime.value=e,this.delayNodeRight.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),s.Effects.Reverb=function(e){this.options={},e=e||this.options;var t={mix:.5,time:.01,decay:.01,reverse:!1};for(var n in this.inputNode=s.context.createGain(),this.reverbNode=s.context.createConvolver(),this.outputNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n];i.bind(this)()},s.Effects.Reverb.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,1e-4,10)&&(this.options.time=e,i.bind(this)())}},decay:{enumerable:!0,get:function(){return this.options.decay},set:function(e){r.Util.isInRange(e,1e-4,10)&&(this.options.decay=e,i.bind(this)())}},reverse:{enumerable:!0,get:function(){return this.options.reverse},set:function(e){r.Util.isBool(e)&&(this.options.reverse=e,i.bind(this)())}}}),s.Effects.Tremolo=function(e){this.options={},e=e||this.options;var t={speed:4,depth:1,mix:.8};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.tremoloGainNode=s.context.createGain(),this.tremoloGainNode.gain.value=0,this.lfoNode=s.context.createOscillator(),this.shaperNode=s.context.createWaveShaper(),this.shaperNode.curve=new Float32Array([0,1]),this.shaperNode.connect(this.tremoloGainNode.gain),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.lfoNode.connect(this.shaperNode),this.lfoNode.type="sine",this.lfoNode.start(0),this.inputNode.connect(this.tremoloGainNode),this.tremoloGainNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Tremolo.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,20)&&(this.options.speed=e,this.lfoNode.frequency.value=e)}},depth:{enumerable:!0,get:function(){return this.options.depth},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.depth=e,this.shaperNode.curve=new Float32Array([1-e,1]))}}}),s.Effects.DubDelay=function(e){this.options={},e=e||this.options;var t={feedback:.6,time:.7,mix:.5,cutoff:700};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.bqFilterNode=s.context.createBiquadFilter(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.bqFilterNode),this.bqFilterNode.connect(this.delayNode),this.delayNode.connect(this.feedbackGainNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.DubDelay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}},cutoff:{enumerable:!0,get:function(){return this.options.cutoff},set:function(e){r.Util.isInRange(e,0,4e3)&&(this.options.cutoff=e,this.bqFilterNode.frequency.value=this.cutoff)}}}),s.Effects.RingModulator=function(e){this.options={},e=e||this.options;var t={speed:30,distortion:1,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.vIn=s.context.createOscillator(),this.vIn.start(0),this.vInGain=s.context.createGain(),this.vInGain.gain.value=.5,this.vInInverter1=s.context.createGain(),this.vInInverter1.gain.value=-1,this.vInInverter2=s.context.createGain(),this.vInInverter2.gain.value=-1,this.vInDiode1=new p(s.context),this.vInDiode2=new p(s.context),this.vInInverter3=s.context.createGain(),this.vInInverter3.gain.value=-1,this.vcInverter1=s.context.createGain(),this.vcInverter1.gain.value=-1,this.vcDiode3=new p(s.context),this.vcDiode4=new p(s.context),this.outGain=s.context.createGain(),this.outGain.gain.value=3,this.compressor=s.context.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.ratio.value=16,this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.vcInverter1),this.inputNode.connect(this.vcDiode4.node),this.vcInverter1.connect(this.vcDiode3.node),this.vIn.connect(this.vInGain),this.vInGain.connect(this.vInInverter1),this.vInGain.connect(this.vcInverter1),this.vInGain.connect(this.vcDiode4.node),this.vInInverter1.connect(this.vInInverter2),this.vInInverter1.connect(this.vInDiode2.node),this.vInInverter2.connect(this.vInDiode1.node),this.vInDiode1.connect(this.vInInverter3),this.vInDiode2.connect(this.vInInverter3),this.vInInverter3.connect(this.compressor),this.vcDiode3.connect(this.compressor),this.vcDiode4.connect(this.compressor),this.compressor.connect(this.outGain),this.outGain.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]};var p=function(e){this.context=e,this.node=this.context.createWaveShaper(),this.vb=.2,this.vl=.4,this.h=1,this.setCurve()};return p.prototype.setDistortion=function(e){return this.h=e,this.setCurve()},p.prototype.setCurve=function(){var e,t,n,i,o,s,r;for(t=1024,e=s=0,r=(o=new Float32Array(t)).length;r>=0?r>s:s>r;e=r>=0?++s:--s)n=(e-512)/512,i=(n=Math.abs(n))<=this.vb?0:this.vb<n&&n<=this.vl?this.h*(Math.pow(n-this.vb,2)/(2*this.vl-2*this.vb)):this.h*n-this.h*this.vl+this.h*(Math.pow(this.vl-this.vb,2)/(2*this.vl-2*this.vb)),o[e]=i;return this.node.curve=o},p.prototype.connect=function(e){return this.node.connect(e)},s.Effects.RingModulator.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,2e3)&&(this.options.speed=e,this.vIn.frequency.value=e)}},distortion:{enumerable:!0,get:function(){return this.options.distortion},set:function(e){if(r.Util.isInRange(e,.2,50)){this.options.distortion=parseFloat(e,10);for(var t=[this.vInDiode1,this.vInDiode2,this.vcDiode3,this.vcDiode4],n=0,i=t.length;i>n;n++)t[n].setDistortion(e)}}}}),s.Effects.Quadrafuzz=function(e){this.options={},e=e||this.options;var t={lowGain:.6,midLowGain:.8,midHighGain:.5,highGain:.6};this.inputNode=r.context.createGain(),this.outputNode=r.context.createGain(),this.dryGainNode=r.context.createGain(),this.wetGainNode=r.context.createGain(),this.lowpassLeft=r.context.createBiquadFilter(),this.lowpassLeft.type="lowpass",this.lowpassLeft.frequency.value=147,this.lowpassLeft.Q.value=.7071,this.bandpass1Left=r.context.createBiquadFilter(),this.bandpass1Left.type="bandpass",this.bandpass1Left.frequency.value=587,this.bandpass1Left.Q.value=.7071,this.bandpass2Left=r.context.createBiquadFilter(),this.bandpass2Left.type="bandpass",this.bandpass2Left.frequency.value=2490,this.bandpass2Left.Q.value=.7071,this.highpassLeft=r.context.createBiquadFilter(),this.highpassLeft.type="highpass",this.highpassLeft.frequency.value=4980,this.highpassLeft.Q.value=.7071,this.overdrives=[];for(var n=0;4>n;n++)this.overdrives[n]=r.context.createWaveShaper(),this.overdrives[n].curve=o();this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode);var i=[this.lowpassLeft,this.bandpass1Left,this.bandpass2Left,this.highpassLeft];for(n=0;n<i.length;n++)this.wetGainNode.connect(i[n]),i[n].connect(this.overdrives[n]),this.overdrives[n].connect(this.outputNode);for(var s in t)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?t[s]:this[s]},s.Effects.Quadrafuzz.prototype=Object.create(h,{lowGain:{enumerable:!0,get:function(){return this.options.lowGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.lowGain=e,this.overdrives[0].curve=o(r.Util.normalize(this.lowGain,0,150)))}},midLowGain:{enumerable:!0,get:function(){return this.options.midLowGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.midLowGain=e,this.overdrives[1].curve=o(r.Util.normalize(this.midLowGain,0,150)))}},midHighGain:{enumerable:!0,get:function(){return this.options.midHighGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.midHighGain=e,this.overdrives[2].curve=o(r.Util.normalize(this.midHighGain,0,150)))}},highGain:{enumerable:!0,get:function(){return this.options.highGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.highGain=e,this.overdrives[3].curve=o(r.Util.normalize(this.highGain,0,150)))}}}),s}console.error("No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.")}("undefined"!=typeof window?window:ze)},Ae(We={exports:{}},We.exports),We.exports);let _e,He,Be,Ye,Qe,Xe,Je,Ke;function Ze(){const e=new AudioWorkletNode(_e,"soundwave-processor",{processorOptions:Je});return e.port.onmessage=e=>{!function(e){const{id:t,data:n}=e;switch(t){case"waveData":Qe(n);break;case"error":Xe(n);break;default:console.warn("unknown processor message",e)}}(e.data)},e}function et(e,t){return new Ve.Sound({source:"wave",options:{type:e,frequency:t,detached:!0}})}function tt(e){e&&(e.off(),e.stop(),e.disconnect())}function nt(e){ot("sweepTime",e)}function it(e){ot("fps",e)}function ot(e,t){Ye&&Ye.port.postMessage({id:e,data:t})}function st(e={}){return new GainNode(_e,e)}class rt{constructor(){this.gain=null,this.oscillator=null,this.waveType=null,this.frequency=null,this.destination=null,this.depth=null}init(e,t,n,i){this.waveType=e,this.frequency=t,this.depth=n,this.destination=i,this.remove(),this.oscillator=et(e,t),this.gain=st({gain:n}),this.gain.connect(i),this.oscillator.connect(this.gain)}play(){this.oscillator&&this.oscillator.play()}stop(){this.oscillator&&this.oscillator.stop()}remove(){this.gain&&this.gain.disconnect(),tt(this.oscillator)}setFrequency(e){this.oscillator&&(this.oscillator.frequency=e)}}class at{constructor(){this.soundwave=null,this.gain=null,this.lfo=null,this.isPlaying=!1}init(e,t){this.remove();const{sound:n,soundGain:i}=function(e,t){const n=et(e,t),i=_e.createGain();return n.connect(i),i.connect(Be),{sound:n,soundGain:i}}(e,t);this.soundwave=n,this.gain=i}setFrequency(e){this.soundwave&&(this.soundwave.frequency=e)}setDetune(e){this.soundwave&&(this.soundwave.sourceNode.detune.value=e)}initLfo(e,t,n){this.removeLfo(),this.lfo=new rt,this.lfo.init(e,t,n,this.soundwave.sourceNode.frequency),this.isPlaying&&this.lfo.play()}setLfoFrequency(e){this.lfo&&this.lfo.setFrequency(e)}removeLfo(){this.lfo&&(this.lfo.remove(),this.lfo=null)}play(){if(this.isPlaying=!0,this.soundwave&&this.soundwave.play(),this.lfo){const{waveType:e,frequency:t,depth:n}=this.lfo;this.initLfo(e,t,n)}}stop(){this.isPlaying=!1,this.soundwave&&this.soundwave.stop(),this.lfo&&this.lfo.stop()}remove(){this.removeLfo(),tt(this.soundwave),this.gain&&this.gain.disconnect()}}function ct(t){let n,i;return{c(){n=p("div"),i=p("canvas"),y(i,"class","canvas svelte-qlemw4"),y(n,"class","canvasContainer center svelte-qlemw4")},m(e,o){h(e,n,o),d(n,i),t[3](i),t[4](n)},p:e,i:e,o:e,d(e){e&&f(n),t[3](null),t[4](null)}}}function ut(e){Ke(e)}function lt(e){const t=e.getContext("2d");return t.strokeStyle="#ff3e00",t.lineWidth=1,t}function dt(e,t,n,i){const{xSamples:o,ySamples:s}=e,r=i-100;return{x:n/2+o[t]*n,y:50+(.5+s[t]/2)*r}}function ht(e,t,n){let{oldWavesDisplayed:i}=t;const o=[];let s,r,a,c,u,l=null;function d(e){e.width=s.clientWidth,e.height=.33*e.width}function h(){l&&(clearTimeout(l),l=null)}function f(e){h();const{samplesLength:t,continueProcessing:n}=e,{width:s,height:r}=c;let a=Number.POSITIVE_INFINITY;u.clearRect(0,0,s,r),u.beginPath();for(let n=0;n<t;n++){const{x:t,y:i}=dt(e,n,s,r);t<a?u.moveTo(t,i):u.lineTo(t,i),a=t}u.stroke(),function(){const e=new Image;if(o.push(e),o.length>i){const e=o.length-i;o.splice(0,e)}e.onload=p,e.src=c.toDataURL()}(),n||v()}function p(){const{width:e,height:t}=r;a.clearRect(0,0,e,t),a.imageSmoothingEnabled=!0;const n=i/3;o.forEach(((i,o)=>{const s=Math.min((o+1)/n,1);a.globalAlpha=s.toString(10),a.drawImage(i,0,0,e,t)})),a.globalAlpha=1}function v(){console.log("fadeOutImage",l),!l&&o.length&&(l=setTimeout((()=>{o.splice(0,1),p(),l=null,v()}),16.666666666666668))}return k((()=>{d(r),a=lt(r),c=document.createElement("canvas"),d(c),u=lt(c),Ke=f})),function(e){I().$$.on_destroy.push(e)}((()=>{h()})),e.$$set=e=>{"oldWavesDisplayed"in e&&n(2,i=e.oldWavesDisplayed)},[s,r,i,function(e){q[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(e){q[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class ft extends Z{constructor(e){super(),K(this,e,ht,ct,s,{oldWavesDisplayed:2})}}function pt(e,t,n){const i=e.slice();return i[19]=t[n],i[20]=t,i[21]=n,i}function vt(e){let t,n,i={oldWavesDisplayed:e[3]};return t=new ft({props:i}),e[13](t),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,n){const i={};8&n&&(i.oldWavesDisplayed=e[3]),t.$set(i)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(n){e[13](null),X(t,n)}}}function mt(t){let n,i;return{c(){n=p("div"),i=v(t[5]),y(n,"class","errorMsg svelte-p4iq6r")},m(e,t){h(e,n,t),d(n,i)},p(e,t){32&t&&b(i,e[5])},i:e,o:e,d(e){e&&f(n)}}}function gt(e){let t;return{c(){t=v("play sound")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Nt(e){let t;return{c(){t=v("stop sound")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function yt(e){let t,n,i;function o(){return e[14](e[19])}function s(t){e[15](t,e[19],e[20],e[21])}let r={removeHandler:o};return void 0!==e[19]&&(r.sound=e[19]),t=new De({props:r}),q.push((()=>B(t,"sound",s))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(i,s){e=i;const r={};64&s&&(r.removeHandler=o),!n&&64&s&&(n=!0,r.sound=e[19],D((()=>n=!1))),t.$set(r)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){H(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function bt(e){let t,n,o,s,r,a,c,u,l,v,b,$,x,w,G,I,k;function U(t){e[10](t)}function E(t){e[11](t)}function S(t){e[12](t)}let T={};void 0!==e[1]&&(T.sampleSize=e[1]),void 0!==e[3]&&(T.oldWavesDisplayed=e[3]),void 0!==e[2]&&(T.fps=e[2]),t=new je({props:T}),q.push((()=>B(t,"sampleSize",U))),q.push((()=>B(t,"oldWavesDisplayed",E))),q.push((()=>B(t,"fps",S)));const R=[mt,vt],L=[];function F(e,t){return e[5]?0:1}function C(e,t){return e[0]?Nt:gt}a=F(e),c=L[a]=R[a](e);let O=C(e),P=O(e),M=e[6],j=[];for(let t=0;t<M.length;t+=1)j[t]=yt(pt(e,M,t));const z=e=>H(j[e],1,1,(()=>{j[e]=null}));return{c(){Y(t.$$.fragment),r=m(),c.c(),u=m(),l=p("div"),v=p("button"),P.c(),b=m(),$=p("button"),$.textContent="add a sound",x=m();for(let e=0;e<j.length;e+=1)j[e].c();w=g(),y(v,"class","svelte-p4iq6r"),y($,"class","svelte-p4iq6r")},m(n,i){Q(t,n,i),h(n,r,i),L[a].m(n,i),h(n,u,i),h(n,l,i),d(l,v),P.m(v,null),d(l,b),d(l,$),h(n,x,i);for(let e=0;e<j.length;e+=1)j[e].m(n,i);h(n,w,i),G=!0,I||(k=[N(v,"click",e[7]),N($,"click",e[8])],I=!0)},p(e,[i]){const r={};!n&&2&i&&(n=!0,r.sampleSize=e[1],D((()=>n=!1))),!o&&8&i&&(o=!0,r.oldWavesDisplayed=e[3],D((()=>o=!1))),!s&&4&i&&(s=!0,r.fps=e[2],D((()=>s=!1))),t.$set(r);let l=a;if(a=F(e),a===l?L[a].p(e,i):(W(),H(L[l],1,1,(()=>{L[l]=null})),V(),c=L[a],c?c.p(e,i):(c=L[a]=R[a](e),c.c()),_(c,1),c.m(u.parentNode,u)),O!==(O=C(e))&&(P.d(1),P=O(e),P&&(P.c(),P.m(v,null))),576&i){let t;for(M=e[6],t=0;t<M.length;t+=1){const n=pt(e,M,t);j[t]?(j[t].p(n,i),_(j[t],1)):(j[t]=yt(n),j[t].c(),_(j[t],1),j[t].m(w.parentNode,w))}for(W(),t=M.length;t<j.length;t+=1)z(t);V()}},i(e){if(!G){_(t.$$.fragment,e),_(c);for(let e=0;e<M.length;e+=1)_(j[e]);G=!0}},o(e){H(t.$$.fragment,e),H(c),j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)H(j[e]);G=!1},d(e){X(t,e),e&&f(r),L[a].d(e),e&&f(u),e&&f(l),P.d(),e&&f(x),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(j,e),e&&f(w),I=!1,i(k)}}}function $t(e,t,n){let i,o,s,r,a,c=!1,u=[];function l(){(async function(){console.log("startSoundProcessor"),Ye=Ze(),Be.connect(He),He.connect(Ye),Ye.connect(Ve.masterGainNode)})().then((()=>{nt(i),it(o),u.forEach((e=>e.play()))}))}function d(){u.forEach((e=>e.stop())),n(0,c=!1);setTimeout((()=>{c||(console.log("stopSoundProcessor"),Ye&&(ot("stop"),He.disconnect(Ye),Ye.disconnect(Ve.masterGainNode)))}),600)}function h(e){const t=u.indexOf(e);if(t>-1){const{[t]:e,...i}=u;e.remove(),n(6,u=Object.values(i))}}function f(e){let t="an error occurred.";if("process"===e)t="cannot get audio data. please check your audio system - is your audio used by another app?";n(5,a=t)}k((()=>{!async function(e,t){Qe=e,Xe=t,_e=Ve.context,Be=st(),He=new Ve.Effects.Compressor({threshold:-5,knee:0,ratio:40,attack:.001,release:.1}),Je={mainGain:Ve.masterGainNode.gain.value,sampleRate:_e.sampleRate},await _e.audioWorklet.addModule("utils/SoundwaveProcessor.js")}(ut,f),n(6,u=u.concat(new at))}));return e.$$.update=()=>{1&e.$$.dirty&&(c?l():d()),2&e.$$.dirty&&nt(i),4&e.$$.dirty&&it(o)},[c,i,o,s,r,a,u,function(){n(5,a=null),n(0,c=!c)},function(){const e=new at;n(6,u=u.concat(e)),c&&(u.forEach((e=>e.stop())),u.forEach((e=>e.play())))},h,function(e){i=e,n(1,i)},function(e){s=e,n(3,s)},function(e){o=e,n(2,o)},function(e){q[e?"unshift":"push"]((()=>{r=e,n(4,r)}))},e=>h(e),function(e,t,i,o){i[o]=e,n(6,u)}]}class xt extends Z{constructor(e){super(),K(this,e,$t,bt,s,{})}}function wt(t){let n;return{c(){n=p("div"),n.textContent="click anywhere to start"},m(e,t){h(e,n,t)},i:e,o:e,d(e){e&&f(n)}}}function Gt(e){let t,n;return t=new xt({}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function It(e){let t,n,i,o,s,r,a,c,u,l,g,N,$;const x=[Gt,wt],w=[];function G(e,t){return e[1]?0:1}return g=G(e),N=w[g]=x[g](e),{c(){t=p("main"),n=p("h1"),n.textContent="JS SYNTH",i=m(),o=p("small"),s=v("v. "),r=v(e[0]),a=v(" · "),c=p("a"),u=v("ARCHIVE"),l=m(),N.c(),y(n,"class","svelte-xuko3b"),y(c,"href",e[3]),y(c,"class","svelte-xuko3b"),y(o,"class","svelte-xuko3b"),y(t,"class","svelte-xuko3b")},m(f,p){h(f,t,p),d(t,n),d(t,i),d(t,o),d(o,s),d(o,r),d(o,a),d(o,c),d(c,u),e[4](c),d(t,l),w[g].m(t,null),$=!0},p(e,[n]){(!$||1&n)&&b(r,e[0]);let i=g;g=G(e),g!==i&&(W(),H(w[i],1,1,(()=>{w[i]=null})),V(),N=w[g],N||(N=w[g]=x[g](e),N.c()),_(N,1),N.m(t,null))},i(e){$||(_(N),$=!0)},o(e){H(N),$=!1},d(n){n&&f(t),e[4](null),w[g].d()}}}function kt(e,t,n){let i,{version:o}=t,s=!1;const r=location.pathname.includes("/versions/")?"../":"./versions/";return window.addEventListener("pointerup",(function e(t){t.target!==i&&(window.removeEventListener("pointerup",e),n(1,s=!0))})),e.$$set=e=>{"version"in e&&n(0,o=e.version)},[o,s,i,r,function(e){q[e?"unshift":"push"]((()=>{i=e,n(2,i)}))}]}return new class extends Z{constructor(e){super(),K(this,e,kt,It,s,{version:0})}}({target:document.body,props:{version:"1.5"}})}();
//# sourceMappingURL=bundle.js.map
