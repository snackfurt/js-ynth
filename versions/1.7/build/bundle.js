var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t,n,i){if(e){const o=c(e,t,n,i);return e[0](o)}}function c(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function a(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}function u(e,t,n,i,o,s){if(o){const r=c(t,n,i,s);e.p(r,o)}}function l(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function d(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function m(){return v(" ")}function g(){return v("")}function N(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e){return function(t){t.target===this&&e.call(this,t)}}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function w(e,t,n){e.classList[n?"add":"remove"](t)}let G;function I(e){G=e}function S(){if(!G)throw new Error("Function called outside component initialization");return G}function k(e){S().$$.on_mount.push(e)}function U(){const e=S();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,o)}))}}}function E(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const T=[],R=[],q=[],L=[],C=Promise.resolve();let D=!1;function F(e){q.push(e)}function O(e){L.push(e)}let P=!1;const j=new Set;function M(){if(!P){P=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];I(t),A(t.$$)}for(I(null),T.length=0;R.length;)R.pop()();for(let e=0;e<q.length;e+=1){const t=q[e];j.has(t)||(j.add(t),t())}q.length=0}while(T.length);for(;L.length;)L.pop()();D=!1,P=!1,j.clear()}}function A(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}const z=new Set;let W;function H(){W={r:0,c:[],p:W}}function V(){W.r||i(W.c),W=W.p}function _(e,t){e&&e.i&&(z.delete(e),e.i(t))}function B(e,t,n,i){if(e&&e.o){if(z.has(e))return;z.add(e),W.c.push((()=>{z.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function Y(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Q(e){e&&e.c()}function X(e,n,s,r){const{fragment:c,on_mount:a,on_destroy:u,after_update:l}=e.$$;c&&c.m(n,s),r||F((()=>{const n=a.map(t).filter(o);u?u.push(...n):i(n),e.$$.on_mount=[]})),l.forEach(F)}function J(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K(e,t){-1===e.$$.dirty[0]&&(T.push(e),D||(D=!0,C.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(t,o,s,r,c,a,u,l=[-1]){const d=G;I(t);const h=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:l,skip_bound:!1,root:o.target||d.$$.root};u&&u(h.root);let p=!1;if(h.ctx=s?s(t,o.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return h.ctx&&c(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),p&&K(t,e)),n})):[],h.update(),p=!0,i(h.before_update),h.fragment=!!r&&r(h.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);h.fragment&&h.fragment.l(e),e.forEach(f)}else h.fragment&&h.fragment.c();o.intro&&_(t.$$.fragment),X(t,o.target,o.anchor,o.customElement),M()}I(d)}class ee{$destroy(){J(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function te(e){let t,n,i;return{c(){t=p("button"),t.textContent="❌",y(t,"class","remove-button svelte-tp74gc")},m(s,r){h(s,t,r),n||(i=N(t,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function ne(e){let t;return{c(){t=v("↧")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function ie(e){let t;return{c(){t=v("↥")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function oe(e){let t,n,i,o,s,c,g,b,x,G,I,S,k,U=e[2]&&te(e);function E(e,t){return e[0]?ie:ne}let T=E(e),R=T(e);const q=e[4].default,L=r(q,e,e[3],null);return{c(){t=p("div"),n=p("div"),U&&U.c(),i=m(),o=p("button"),s=p("span"),c=v(e[1]),g=m(),b=p("span"),R.c(),x=m(),G=p("section"),L&&L.c(),y(s,"class","heading svelte-tp74gc"),y(b,"class","icon svelte-tp74gc"),y(o,"class","panel-button svelte-tp74gc"),y(n,"class","panel-header svelte-tp74gc"),y(G,"class","panel-content svelte-tp74gc"),w(G,"isOpen",e[0]),y(t,"class","panel svelte-tp74gc")},m(r,a){h(r,t,a),d(t,n),U&&U.m(n,null),d(n,i),d(n,o),d(o,s),d(s,c),d(o,g),d(o,b),R.m(b,null),d(t,x),d(t,G),L&&L.m(G,null),I=!0,S||(k=N(o,"click",e[5]),S=!0)},p(e,[t]){e[2]?U?U.p(e,t):(U=te(e),U.c(),U.m(n,i)):U&&(U.d(1),U=null),(!I||2&t)&&$(c,e[1]),T!==(T=E(e))&&(R.d(1),R=T(e),R&&(R.c(),R.m(b,null))),L&&L.p&&(!I||8&t)&&u(L,q,e,e[3],I?a(q,e[3],t,null):l(e[3]),null),1&t&&w(G,"isOpen",e[0])},i(e){I||(_(L,e),I=!0)},o(e){B(L,e),I=!1},d(e){e&&f(t),U&&U.d(),R.d(),L&&L.d(e),S=!1,k()}}}function se(e,t,n){let{$$slots:i={},$$scope:o}=t,{heading:s}=t,{isOpen:r}=t,{removeHandler:c=null}=t;return e.$$set=e=>{"heading"in e&&n(1,s=e.heading),"isOpen"in e&&n(0,r=e.isOpen),"removeHandler"in e&&n(2,c=e.removeHandler),"$$scope"in e&&n(3,o=e.$$scope)},[r,s,c,o,i,()=>n(0,r=!r)]}class re extends ee{constructor(e){super(),Z(this,e,se,oe,s,{heading:1,isOpen:0,removeHandler:2})}}function ce(e){let t,n,o,s,r,c,a,u,l;return{c(){t=p("label"),n=p("input"),o=v("\n        echo cancellation"),s=m(),r=p("label"),c=p("input"),a=v("\n        noise suppression"),y(n,"type","checkbox"),y(t,"class","svelte-mkl884"),y(c,"type","checkbox"),y(r,"class","svelte-mkl884")},m(i,f){h(i,t,f),d(t,n),n.checked=e[0],d(t,o),h(i,s,f),h(i,r,f),d(r,c),c.checked=e[1],d(r,a),u||(l=[N(n,"change",e[3]),N(c,"change",e[4])],u=!0)},p(e,t){1&t&&(n.checked=e[0]),2&t&&(c.checked=e[1])},d(e){e&&f(t),e&&f(s),e&&f(r),u=!1,i(l)}}}function ae(e){let t,n;return t=new re({props:{heading:"AUDIO INPUT",isOpen:!0,removeHandler:e[5],$$slots:{default:[ce]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(e,i){X(t,e,i),n=!0},p(e,[n]){const i={};4&n&&(i.removeHandler=e[5]),67&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function ue(e,t,n){let{removeHandler:i}=t,{useEchoCancellation:o}=t,{useNoiseSuppression:s}=t;return e.$$set=e=>{"removeHandler"in e&&n(2,i=e.removeHandler),"useEchoCancellation"in e&&n(0,o=e.useEchoCancellation),"useNoiseSuppression"in e&&n(1,s=e.useNoiseSuppression)},[o,s,i,function(){o=this.checked,n(0,o)},function(){s=this.checked,n(1,s)},()=>i()]}class le extends ee{constructor(e){super(),Z(this,e,ue,ae,s,{removeHandler:2,useEchoCancellation:0,useNoiseSuppression:1})}}function de(e){let t,n,i;return{c(){t=p("button"),t.innerHTML='<span class="icon svelte-psm7gv">⅟</span>',y(t,"class","inverseButton svelte-psm7gv"),w(t,"useInverse",e[0])},m(o,s){h(o,t,s),n||(i=N(t,"click",e[17]),n=!0)},p(e,n){1&n&&w(t,"useInverse",e[0])},d(e){e&&f(t),n=!1,i()}}}function he(t){let n,o,s,r,c,a,u,l,g,w,G,I,S,k,U,E,T,R,q=t[3]&&de(t);return{c(){n=p("div"),o=p("div"),s=v(t[1]),r=m(),q&&q.c(),c=m(),a=p("div"),u=m(),l=p("div"),g=v(t[4]),w=m(),G=v(t[2]),I=m(),S=p("div"),k=p("button"),k.innerHTML='<span class="icon svelte-psm7gv">+</span>',U=m(),E=p("button"),E.innerHTML='<span class="icon svelte-psm7gv">−</span>',y(o,"class","label svelte-psm7gv"),y(a,"class","knob center svelte-psm7gv"),x(a,"--rotation",t[5]),y(l,"class","label svelte-psm7gv"),y(k,"class","stepButton svelte-psm7gv"),y(E,"class","stepButton svelte-psm7gv"),y(S,"class","stepButtonContainer svelte-psm7gv"),y(n,"class","knobContainer svelte-psm7gv")},m(e,i){h(e,n,i),d(n,o),d(o,s),d(n,r),q&&q.m(n,null),d(n,c),d(n,a),d(n,u),d(n,l),d(l,g),d(l,w),d(l,G),d(n,I),d(n,S),d(S,k),d(S,U),d(S,E),T||(R=[N(a,"pointerdown",b(t[6])),N(k,"pointerdown",b(t[7])),N(E,"pointerdown",b(t[8]))],T=!0)},p(e,[t]){2&t&&$(s,e[1]),e[3]?q?q.p(e,t):(q=de(e),q.c(),q.m(n,c)):q&&(q.d(1),q=null),32&t&&x(a,"--rotation",e[5]),16&t&&$(g,e[4]),4&t&&$(G,e[2])},i:e,o:e,d(e){e&&f(n),q&&q.d(),T=!1,i(R)}}}function fe(e,t,n){let i,o,s,r,c,a,u,{value:l,min:d,max:h}=t,{rotRange:f=2*Math.PI*.83}=t,{pixelRange:p=200}=t,{startRotation:v=.83*-Math.PI}=t,{title:m=""}=t,{unit:g=""}=t,{outputValue:N=null}=t,{enableInverse:b=!1}=t,{useInverse:y=!1}=t,$=!1;function x(e){const{clientY:t}=e;n(9,l=function(e,t,n){return Math.round(Math.max(t,Math.min(e,n)))}(r-i*(t-s)/p,d,h))}function w(){window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",w),$=!1}function G(){c=!1,clearTimeout(a),window.removeEventListener("pointerup",G)}function I(){c&&l<h&&(n(9,l+=1),a=setTimeout(I,300))}function S(){c&&l>d&&(n(9,l-=1),a=setTimeout(S,300))}window.addEventListener("touchmove",(function(e){$&&e.preventDefault()}),{passive:!1});return e.$$set=e=>{"value"in e&&n(9,l=e.value),"min"in e&&n(10,d=e.min),"max"in e&&n(11,h=e.max),"rotRange"in e&&n(12,f=e.rotRange),"pixelRange"in e&&n(13,p=e.pixelRange),"startRotation"in e&&n(14,v=e.startRotation),"title"in e&&n(1,m=e.title),"unit"in e&&n(2,g=e.unit),"outputValue"in e&&n(15,N=e.outputValue),"enableInverse"in e&&n(3,b=e.enableInverse),"useInverse"in e&&n(0,y=e.useInverse)},e.$$.update=()=>{3072&e.$$.dirty&&n(16,i=h-d),87552&e.$$.dirty&&n(5,o=v+(l-d)/i*f),33281&e.$$.dirty&&n(4,u=N??(y?(1/l).toFixed(3):l))},[y,m,g,b,u,o,function({clientY:e}){s=e,r=l,window.addEventListener("pointermove",x),window.addEventListener("pointerup",w),$=!0},function(){c=!0,I(),window.addEventListener("pointerup",G)},function(){c=!0,S(),window.addEventListener("pointerup",G)},l,d,h,f,p,v,N,i,()=>{n(0,y=!y)}]}class pe extends ee{constructor(e){super(),Z(this,e,fe,he,s,{value:9,min:10,max:11,rotRange:12,pixelRange:13,startRotation:14,title:1,unit:2,outputValue:15,enableInverse:3,useInverse:0})}}const ve=e=>({}),me=e=>({}),ge=e=>({}),Ne=e=>({});function be(e){let t,n,i,o,s,c,v,g,N,b,$,x;function G(t){e[11](t)}let I={title:"WAVE TYPE",outputValue:e[1],max:4,min:1};function S(t){e[12](t)}function k(t){e[13](t)}void 0!==e[6]&&(I.value=e[6]),i=new pe({props:I}),R.push((()=>Y(i,"value",G)));let U={title:"FREQUENCY",unit:"Hz",max:e[2],min:e[3],enableInverse:e[5]};void 0!==e[7]&&(U.value=e[7]),void 0!==e[0]&&(U.useInverse=e[0]),c=new pe({props:U}),R.push((()=>Y(c,"value",S))),R.push((()=>Y(c,"useInverse",k)));const E=e[10].knob3,T=r(E,e,e[9],Ne),q=e[10].label,L=r(q,e,e[9],me);return{c(){t=p("div"),n=p("div"),Q(i.$$.fragment),s=m(),Q(c.$$.fragment),N=m(),T&&T.c(),b=m(),$=p("div"),L&&L.c(),y(n,"class","controls svelte-ebtc9b"),w(n,"disabled",e[4]),y($,"class","labelContainer svelte-ebtc9b"),y(t,"class","container svelte-ebtc9b")},m(e,o){h(e,t,o),d(t,n),X(i,n,null),d(n,s),X(c,n,null),d(n,N),T&&T.m(n,null),d(t,b),d(t,$),L&&L.m($,null),x=!0},p(e,[t]){const s={};2&t&&(s.outputValue=e[1]),!o&&64&t&&(o=!0,s.value=e[6],O((()=>o=!1))),i.$set(s);const r={};4&t&&(r.max=e[2]),8&t&&(r.min=e[3]),32&t&&(r.enableInverse=e[5]),!v&&128&t&&(v=!0,r.value=e[7],O((()=>v=!1))),!g&&1&t&&(g=!0,r.useInverse=e[0],O((()=>g=!1))),c.$set(r),T&&T.p&&(!x||512&t)&&u(T,E,e,e[9],x?a(E,e[9],t,ge):l(e[9]),Ne),16&t&&w(n,"disabled",e[4]),L&&L.p&&(!x||512&t)&&u(L,q,e,e[9],x?a(q,e[9],t,ve):l(e[9]),me)},i(e){x||(_(i.$$.fragment,e),_(c.$$.fragment,e),_(T,e),_(L,e),x=!0)},o(e){B(i.$$.fragment,e),B(c.$$.fragment,e),B(T,e),B(L,e),x=!1},d(e){e&&f(t),J(i),J(c),T&&T.d(e),L&&L.d(e)}}}function ye(e,t,n){let{$$slots:i={},$$scope:o}=t,{waveType:s}=t,{frequency:r}=t,{useInverseFrequency:c=!1}=t,{maxFrequency:a}=t,{minFrequency:u}=t,{disabled:l=!1}=t,{enableInverseFrequency:d=!1}=t,h=1,f=r;const p=["sine","triangle","sawtooth","square"];return e.$$set=e=>{"waveType"in e&&n(1,s=e.waveType),"frequency"in e&&n(8,r=e.frequency),"useInverseFrequency"in e&&n(0,c=e.useInverseFrequency),"maxFrequency"in e&&n(2,a=e.maxFrequency),"minFrequency"in e&&n(3,u=e.minFrequency),"disabled"in e&&n(4,l=e.disabled),"enableInverseFrequency"in e&&n(5,d=e.enableInverseFrequency),"$$scope"in e&&n(9,o=e.$$scope)},e.$$.update=()=>{129&e.$$.dirty&&n(8,r=c?1/f:f),64&e.$$.dirty&&n(1,s=p[h-1])},[c,s,a,u,l,d,h,f,r,o,i,function(e){h=e,n(6,h)},function(e){f=e,n(7,f)},function(e){c=e,n(0,c)}]}class $e extends ee{constructor(e){super(),Z(this,e,ye,be,s,{waveType:1,frequency:8,useInverseFrequency:0,maxFrequency:2,minFrequency:3,disabled:4,enableInverseFrequency:5})}}function xe(e){let t,n,i;function o(t){e[3](t)}let s={slot:"knob3",title:"DETUNE",unit:"cents",max:50,min:-50};return void 0!==e[2]&&(s.value=e[2]),t=new pe({props:s}),R.push((()=>Y(t,"value",o))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),i=!0},p(e,i){const o={};!n&&4&i&&(n=!0,o.value=e[2],O((()=>n=!1))),t.$set(o)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){B(t.$$.fragment,e),i=!1},d(e){J(t,e)}}}function we(e){let t;return{c(){t=p("span"),t.textContent="SOUND",y(t,"slot","label")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Ge(e){let t,n,i,o;function s(t){e[4](t)}function r(t){e[5](t)}let c={maxFrequency:5e3,minFrequency:60,$$slots:{label:[we],knob3:[xe]},$$scope:{ctx:e}};return void 0!==e[1]&&(c.frequency=e[1]),void 0!==e[0]&&(c.waveType=e[0]),t=new $e({props:c}),R.push((()=>Y(t,"frequency",s))),R.push((()=>Y(t,"waveType",r))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),o=!0},p(e,[o]){const s={};68&o&&(s.$$scope={dirty:o,ctx:e}),!n&&2&o&&(n=!0,s.frequency=e[1],O((()=>n=!1))),!i&&1&o&&(i=!0,s.waveType=e[0],O((()=>i=!1))),t.$set(s)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){B(t.$$.fragment,e),o=!1},d(e){J(t,e)}}}function Ie(e,t,n){let{waveType:i}=t,{frequency:o}=t,{detune:s}=t;return e.$$set=e=>{"waveType"in e&&n(0,i=e.waveType),"frequency"in e&&n(1,o=e.frequency),"detune"in e&&n(2,s=e.detune)},[i,o,s,function(e){s=e,n(2,s)},function(e){o=e,n(1,o)},function(e){i=e,n(0,i)}]}class Se extends ee{constructor(e){super(),Z(this,e,Ie,Ge,s,{waveType:0,frequency:1,detune:2})}}const ke=e=>({toggled:1&e}),Ue=e=>({toggled:e[0]});function Ee(e){let t,n,i=(e[0]?e[4]:e[5])+"";return{c(){t=p("span"),n=v(i),y(t,"class","svelte-1c9ojcg")},m(e,i){h(e,t,i),d(t,n)},p(e,t){49&t&&i!==(i=(e[0]?e[4]:e[5])+"")&&$(n,i)},d(e){e&&f(t)}}}function Te(e){let t,n,o,s,c,b,G,I,S,k;const U=e[11].default,E=r(U,e,e[10],Ue),T=E||function(e){let t,n=e[4]&&e[5]&&Ee(e);return{c(){n&&n.c(),t=g()},m(e,i){n&&n.m(e,i),h(e,t,i)},p(e,i){e[4]&&e[5]?n?n.p(e,i):(n=Ee(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&f(t)}}}(e);return{c(){t=p("div"),n=p("label"),o=v(e[1]),s=m(),c=p("div"),b=p("button"),G=m(),T&&T.c(),y(n,"for",e[9]),y(n,"class","svelte-1c9ojcg"),w(n,"hideLabel",e[2]),y(b,"id",e[9]),y(b,"aria-checked",e[0]),y(b,"type","button"),y(b,"role","switch"),x(b,"color",e[6]),x(b,"background-color",e[0]?e[7]:e[8]),b.disabled=e[3],y(b,"class","svelte-1c9ojcg"),y(c,"class","svelte-1c9ojcg"),y(t,"class","container svelte-1c9ojcg")},m(i,r){h(i,t,r),d(t,n),d(n,o),d(t,s),d(t,c),d(c,b),d(c,G),T&&T.m(c,null),I=!0,S||(k=[N(b,"click",e[12]),N(b,"click",e[15]),N(b,"focus",e[13]),N(b,"blur",e[14])],S=!0)},p(e,[t]){(!I||2&t)&&$(o,e[1]),4&t&&w(n,"hideLabel",e[2]),(!I||1&t)&&y(b,"aria-checked",e[0]),(!I||64&t)&&x(b,"color",e[6]),(!I||385&t)&&x(b,"background-color",e[0]?e[7]:e[8]),(!I||8&t)&&(b.disabled=e[3]),E?E.p&&(!I||1025&t)&&u(E,U,e,e[10],I?a(U,e[10],t,ke):l(e[10]),Ue):T&&T.p&&(!I||49&t)&&T.p(e,I?t:-1)},i(e){I||(_(T,e),I=!0)},o(e){B(T,e),I=!1},d(e){e&&f(t),T&&T.d(e),S=!1,i(k)}}}function Re(e,t,n){let{$$slots:i={},$$scope:o}=t,{toggled:s=!0}=t,{label:r="Label"}=t,{hideLabel:c=!1}=t,{disabled:a=!1}=t,{on:u}=t,{off:l}=t,{switchColor:d="#fff"}=t,{toggledColor:h="#0f62fe"}=t,{untoggledColor:f="#8d8d8d"}=t,p="toggle"+Math.random().toString(36);const v=U();return e.$$set=e=>{"toggled"in e&&n(0,s=e.toggled),"label"in e&&n(1,r=e.label),"hideLabel"in e&&n(2,c=e.hideLabel),"disabled"in e&&n(3,a=e.disabled),"on"in e&&n(4,u=e.on),"off"in e&&n(5,l=e.off),"switchColor"in e&&n(6,d=e.switchColor),"toggledColor"in e&&n(7,h=e.toggledColor),"untoggledColor"in e&&n(8,f=e.untoggledColor),"$$scope"in e&&n(10,o=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&v("toggle",s)},[s,r,c,a,u,l,d,h,f,p,o,i,function(t){E.call(this,e,t)},function(t){E.call(this,e,t)},function(t){E.call(this,e,t)},()=>n(0,s=!s)]}class qe extends ee{constructor(e){super(),Z(this,e,Re,Te,s,{toggled:0,label:1,hideLabel:2,disabled:3,on:4,off:5,switchColor:6,toggledColor:7,untoggledColor:8})}}function Le(e){let t,n,i;function o(t){e[5](t)}let s={slot:"knob3",title:"DEPTH",unit:"",max:100,min:1};return void 0!==e[3]&&(s.value=e[3]),t=new pe({props:s}),R.push((()=>Y(t,"value",o))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),i=!0},p(e,i){const o={};!n&&8&i&&(n=!0,o.value=e[3],O((()=>n=!1))),t.$set(o)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){B(t.$$.fragment,e),i=!1},d(e){J(t,e)}}}function Ce(e){let t,n,i;function o(t){e[4](t)}let s={slot:"label",hideLabel:!0,label:"toggle LFO",switchColor:"#ff3e00",toggledColor:"#fff",untoggledColor:"#fff",on:"LFO on",off:"LFO off"};return void 0!==e[0]&&(s.toggled=e[0]),t=new qe({props:s}),R.push((()=>Y(t,"toggled",o))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),i=!0},p(e,i){const o={};!n&&1&i&&(n=!0,o.toggled=e[0],O((()=>n=!1))),t.$set(o)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){B(t.$$.fragment,e),i=!1},d(e){J(t,e)}}}function De(e){let t,n,i,o;function s(t){e[6](t)}function r(t){e[7](t)}let c={disabled:!e[0],maxFrequency:200,minFrequency:1,enableInverseFrequency:!0,$$slots:{label:[Ce],knob3:[Le]},$$scope:{ctx:e}};return void 0!==e[2]&&(c.frequency=e[2]),void 0!==e[1]&&(c.waveType=e[1]),t=new $e({props:c}),R.push((()=>Y(t,"frequency",s))),R.push((()=>Y(t,"waveType",r))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),o=!0},p(e,[o]){const s={};1&o&&(s.disabled=!e[0]),265&o&&(s.$$scope={dirty:o,ctx:e}),!n&&4&o&&(n=!0,s.frequency=e[2],O((()=>n=!1))),!i&&2&o&&(i=!0,s.waveType=e[1],O((()=>i=!1))),t.$set(s)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){B(t.$$.fragment,e),o=!1},d(e){J(t,e)}}}function Fe(e,t,n){let{lfoActive:i}=t,{waveType:o}=t,{frequency:s}=t,{depth:r}=t;return e.$$set=e=>{"lfoActive"in e&&n(0,i=e.lfoActive),"waveType"in e&&n(1,o=e.waveType),"frequency"in e&&n(2,s=e.frequency),"depth"in e&&n(3,r=e.depth)},[i,o,s,r,function(e){i=e,n(0,i)},function(e){r=e,n(3,r)},function(e){s=e,n(2,s)},function(e){o=e,n(1,o)}]}class Oe extends ee{constructor(e){super(),Z(this,e,Fe,De,s,{lfoActive:0,waveType:1,frequency:2,depth:3})}}function Pe(e){let t,n,i,o,s,r,c,a,u,l,d;function p(t){e[9](t)}function v(t){e[10](t)}function g(t){e[11](t)}let N={};function b(t){e[12](t)}function y(t){e[13](t)}function $(t){e[14](t)}function x(t){e[15](t)}void 0!==e[3]&&(N.frequency=e[3]),void 0!==e[2]&&(N.waveType=e[2]),void 0!==e[4]&&(N.detune=e[4]),t=new Se({props:N}),R.push((()=>Y(t,"frequency",p))),R.push((()=>Y(t,"waveType",v))),R.push((()=>Y(t,"detune",g)));let w={};return void 0!==e[8]&&(w.lfoActive=e[8]),void 0!==e[6]&&(w.frequency=e[6]),void 0!==e[5]&&(w.waveType=e[5]),void 0!==e[7]&&(w.depth=e[7]),r=new Oe({props:w}),R.push((()=>Y(r,"lfoActive",b))),R.push((()=>Y(r,"frequency",y))),R.push((()=>Y(r,"waveType",$))),R.push((()=>Y(r,"depth",x))),{c(){Q(t.$$.fragment),s=m(),Q(r.$$.fragment)},m(e,n){X(t,e,n),h(e,s,n),X(r,e,n),d=!0},p(e,s){const d={};!n&&8&s&&(n=!0,d.frequency=e[3],O((()=>n=!1))),!i&&4&s&&(i=!0,d.waveType=e[2],O((()=>i=!1))),!o&&16&s&&(o=!0,d.detune=e[4],O((()=>o=!1))),t.$set(d);const h={};!c&&256&s&&(c=!0,h.lfoActive=e[8],O((()=>c=!1))),!a&&64&s&&(a=!0,h.frequency=e[6],O((()=>a=!1))),!u&&32&s&&(u=!0,h.waveType=e[5],O((()=>u=!1))),!l&&128&s&&(l=!0,h.depth=e[7],O((()=>l=!1))),r.$set(h)},i(e){d||(_(t.$$.fragment,e),_(r.$$.fragment,e),d=!0)},o(e){B(t.$$.fragment,e),B(r.$$.fragment,e),d=!1},d(e){J(t,e),e&&f(s),J(r,e)}}}function je(e){let t,n;return t=new re({props:{heading:"SOUNDWAVE",isOpen:!0,removeHandler:e[16],$$slots:{default:[Pe]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(e,i){X(t,e,i),n=!0},p(e,[n]){const i={};3&n&&(i.removeHandler=e[16]),262652&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Me(e,t,n){let{sound:i}=t,{removeHandler:o}=t,s=null,r=80,c=0,a=null,u=10,l=50,d=!1;return e.$$set=e=>{"sound"in e&&n(0,i=e.sound),"removeHandler"in e&&n(1,o=e.removeHandler)},e.$$.update=()=>{9&e.$$.dirty&&i.setFrequency(r),4&e.$$.dirty&&s&&function(){const{isPlaying:e}=i;i.init(s,r),d&&i.initLfo(a,u,l),e&&i.play()}(),17&e.$$.dirty&&void 0!==c&&i.setDetune(c),481&e.$$.dirty&&(d?i.initLfo(a,u,l):i.removeLfo())},[i,o,s,r,c,a,u,l,d,function(e){r=e,n(3,r)},function(e){s=e,n(2,s)},function(e){c=e,n(4,c)},function(e){d=e,n(8,d)},function(e){u=e,n(6,u)},function(e){a=e,n(5,a)},function(e){l=e,n(7,l)},()=>o(i)]}class Ae extends ee{constructor(e){super(),Z(this,e,Me,je,s,{sound:0,removeHandler:1})}}var ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var We,He,Ve=(We=function(e){!function(t){function n(e,t){this.options={},e=e||this.options;var n={frequency:350,peak:1};for(var i in this.inputNode=this.filterNode=r.context.createBiquadFilter(),this.filterNode.type=t,this.outputNode=s.context.createGain(),this.filterNode.connect(this.outputNode),n)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?n[i]:this[i]}function i(){var e,t,n=r.context.sampleRate*this.time,i=s.context.createBuffer(2,n,r.context.sampleRate),o=i.getChannelData(0),c=i.getChannelData(1);for(t=0;n>t;t++)e=this.reverse?n-t:t,o[t]=(2*Math.random()-1)*Math.pow(1-e/n,this.decay),c[t]=(2*Math.random()-1)*Math.pow(1-e/n,this.decay);this.reverbNode.buffer&&(this.inputNode.disconnect(this.reverbNode),this.reverbNode.disconnect(this.wetGainNode),this.reverbNode=s.context.createConvolver(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode)),this.reverbNode.buffer=i}function o(e){for(var t=r.context.sampleRate,n=new Float32Array(t),i=Math.PI/180,o=0;t>o;o++){var s=2*o/t-1;n[o]=(3+e)*s*20*i/(Math.PI+e*Math.abs(s))}return n}var s={},r=s;e.exports?e.exports=s:t.Pizzicato=t.Pz=s;var c=t.AudioContext||t.webkitAudioContext;if(c){s.context=new c;var a=s.context.createGain();a.connect(s.context.destination),s.Util={isString:function(e){return"[object String]"===toString.call(e)},isObject:function(e){return"[object Object]"===toString.call(e)},isFunction:function(e){return"[object Function]"===toString.call(e)},isNumber:function(e){return"[object Number]"===toString.call(e)&&e===+e},isArray:function(e){return"[object Array]"===toString.call(e)},isInRange:function(e,t,n){return!!(r.Util.isNumber(e)&&r.Util.isNumber(t)&&r.Util.isNumber(n))&&e>=t&&n>=e},isBool:function(e){return"boolean"==typeof e},isOscillator:function(e){return e&&"[object OscillatorNode]"===e.toString()},isAudioBufferSourceNode:function(e){return e&&"[object AudioBufferSourceNode]"===e.toString()},isSound:function(e){return e instanceof r.Sound},isEffect:function(e){for(var t in s.Effects)if(e instanceof s.Effects[t])return!0;return!1},normalize:function(e,t,n){return r.Util.isNumber(e)&&r.Util.isNumber(t)&&r.Util.isNumber(n)?(n-t)*e/1+t:void 0},getDryLevel:function(e){return!r.Util.isNumber(e)||e>1||0>e?0:.5>=e?1:1-2*(e-.5)},getWetLevel:function(e){return!r.Util.isNumber(e)||e>1||0>e?0:e>=.5?1:1-2*(.5-e)}};var u=s.context.createGain(),l=Object.getPrototypeOf(Object.getPrototypeOf(u)),d=l.connect;l.connect=function(e){var t=r.Util.isEffect(e)?e.inputNode:e;return d.call(this,t),e},Object.defineProperty(s,"volume",{enumerable:!0,get:function(){return a.gain.value},set:function(e){r.Util.isInRange(e,0,1)&&a&&(a.gain.value=e)}}),Object.defineProperty(s,"masterGainNode",{enumerable:!1,get:function(){return a},set:function(e){console.error("Can't set the master gain node")}}),s.Events={on:function(e,t,n){e&&t&&(this._events=this._events||{},(this._events[e]||(this._events[e]=[])).push({callback:t,context:n||this,handler:this}))},trigger:function(e){var t,n,i,o;if(e&&(this._events=this._events||{},t=this._events[e]||(this._events[e]=[]))){for(n=Math.max(0,arguments.length-1),i=[],o=0;n>o;o++)i[o]=arguments[o+1];for(o=0;o<t.length;o++)t[o].callback.apply(t[o].context,i)}},off:function(e){e?this._events[e]=void 0:this._events={}}},s.Sound=function(e,t){function n(e,t){e=e||{},this.getRawSourceNode=function(){var t=this.sourceNode?this.sourceNode.frequency.value:e.frequency,n=s.context.createOscillator();return n.type=e.type||"sine",n.frequency.value=t||440,n},this.sourceNode=this.getRawSourceNode(),this.sourceNode.gainSuccessor=r.context.createGain(),this.sourceNode.connect(this.sourceNode.gainSuccessor),a.isFunction(t)&&t()}function i(e,t){e=a.isArray(e)?e:[e];var n=new XMLHttpRequest;n.open("GET",e[0],!0),n.responseType="arraybuffer",n.onload=function(n){s.context.decodeAudioData(n.target.response,function(e){c.getRawSourceNode=function(){var t=s.context.createBufferSource();return t.loop=this.loop,t.buffer=e,t},a.isFunction(t)&&t()}.bind(c),function(n){return console.error("Error decoding audio file "+e[0]),e.length>1?(e.shift(),void i(e,t)):(n=n||new Error("Error decoding audio file "+e[0]),void(a.isFunction(t)&&t(n)))}.bind(c))},n.onreadystatechange=function(t){4===n.readyState&&200!==n.status&&console.error("Error while fetching "+e[0]+". "+n.statusText)},n.send()}function o(e,t){var n=a.isFunction(e)?e:e.audioFunction,i=a.isObject(e)&&e.bufferSize?e.bufferSize:null;if(!i)try{s.context.createScriptProcessor()}catch(e){i=2048}this.getRawSourceNode=function(){var e=s.context.createScriptProcessor(i,1,1);return e.onaudioprocess=n,e}}var c=this,a=s.Util,u=function(e){if(e&&!a.isFunction(e)&&!a.isString(e)&&!a.isObject(e))return"Description type not supported. Initialize a sound using an object, a function or a string.";if(a.isObject(e)){if(!a.isString(e.source)||-1===["wave","file","input","script","sound"].indexOf(e.source))return"Specified source not supported. Sources can be wave, file, input or script";if(!("file"!==e.source||e.options&&e.options.path))return"A path is needed for sounds with a file source";if(!("script"!==e.source||e.options&&e.options.audioFunction))return"An audio function is needed for sounds with a script source"}}(e),l=a.isObject(e)&&a.isObject(e.options);if(u)throw console.error(u),new Error("Error initializing Pizzicato Sound: "+u);this.detached=l&&e.options.detached,this.masterVolume=s.context.createGain(),this.fadeNode=s.context.createGain(),this.fadeNode.gain.value=0,this.detached||this.masterVolume.connect(s.masterGainNode),this.lastTimePlayed=0,this.effects=[],this.effectConnectors=[],this.playing=this.paused=!1,this.loop=l&&e.options.loop,this.attack=l&&a.isNumber(e.options.attack)?e.options.attack:.04,this.volume=l&&a.isNumber(e.options.volume)?e.options.volume:1,l&&a.isNumber(e.options.release)?this.release=e.options.release:l&&a.isNumber(e.options.sustain)?(console.warn("'sustain' is deprecated. Use 'release' instead."),this.release=e.options.sustain):this.release=.04,e?a.isString(e)?i.bind(this)(e,t):a.isFunction(e)?o.bind(this)(e,t):"file"===e.source?i.bind(this)(e.options.path,t):"wave"===e.source?n.bind(this)(e.options,t):"input"===e.source?function(e,t){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia||navigator.mediaDevices.getUserMedia){var n=function(e){c.getRawSourceNode=function(){return s.context.createMediaStreamSource(e)},a.isFunction(t)&&t()}.bind(c),i=function(e){a.isFunction(t)&&t(e)};navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(n).catch(i):navigator.getUserMedia({audio:!0},n,i)}else console.error("Your browser does not support getUserMedia")}.bind(this)(e,t):"script"===e.source?o.bind(this)(e.options,t):"sound"===e.source&&function(e,t){this.getRawSourceNode=e.sound.getRawSourceNode,e.sound.sourceNode&&r.Util.isOscillator(e.sound.sourceNode)&&(this.sourceNode=this.getRawSourceNode(),this.frequency=e.sound.frequency)}.bind(this)(e.options,t):n.bind(this)({},t)},s.Sound.prototype=Object.create(s.Events,{play:{enumerable:!0,value:function(e,t){this.playing||(r.Util.isNumber(t)||(t=this.offsetTime||0),r.Util.isNumber(e)||(e=0),this.playing=!0,this.paused=!1,this.sourceNode=this.getSourceNode(),this.applyAttack(),r.Util.isFunction(this.sourceNode.start)&&(this.lastTimePlayed=s.context.currentTime-t,this.sourceNode.start(r.context.currentTime+e,t)),this.trigger("play"))}},stop:{enumerable:!0,value:function(){(this.paused||this.playing)&&(this.paused=this.playing=!1,this.stopWithRelease(),this.offsetTime=0,this.trigger("stop"))}},pause:{enumerable:!0,value:function(){if(!this.paused&&this.playing){this.paused=!0,this.playing=!1,this.stopWithRelease();var e=r.context.currentTime-this.lastTimePlayed;this.sourceNode.buffer?this.offsetTime=e%(this.sourceNode.buffer.length/r.context.sampleRate):this.offsetTime=e,this.trigger("pause")}}},clone:{enumerable:!0,value:function(){for(var e=new s.Sound({source:"sound",options:{loop:this.loop,attack:this.attack,release:this.release,volume:this.volume,sound:this}}),t=0;t<this.effects.length;t++)e.addEffect(this.effects[t]);return e}},onEnded:{enumerable:!0,value:function(e){return function(){this.sourceNode&&this.sourceNode!==e||(this.playing&&this.stop(),this.paused||this.trigger("end"))}}},addEffect:{enumerable:!0,value:function(e){if(!r.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.fadeNode;t.disconnect(),t.connect(e);var n=r.context.createGain();return this.effectConnectors.push(n),e.connect(n),n.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this sound."),this;var n=this.playing;n&&this.pause();var i=0===t?this.fadeNode:this.effectConnectors[t-1];i.disconnect();var o,s=this.effectConnectors[t];return s.disconnect(),e.disconnect(s),this.effectConnectors.splice(t,1),this.effects.splice(t,1),o=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],i.connect(o),n&&this.play(),this}},connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},connectEffects:{enumerable:!0,value:function(){for(var e=[],t=0;t<this.effects.length;t++){var n=t===this.effects.length-1?this.masterVolume:this.effects[t+1].inputNode;e[t]=r.context.createGain(),this.effects[t].outputNode.disconnect(this.effectConnectors[t]),this.effects[t].outputNode.connect(n)}}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){r.Util.isInRange(e,0,1)&&this.masterVolume&&(this.masterVolume.gain.value=e)}},frequency:{enumerable:!0,get:function(){return this.sourceNode&&r.Util.isOscillator(this.sourceNode)?this.sourceNode.frequency.value:null},set:function(e){this.sourceNode&&r.Util.isOscillator(this.sourceNode)&&(this.sourceNode.frequency.value=e)}},sustain:{enumerable:!0,get:function(){return console.warn("'sustain' is deprecated. Use 'release' instead."),this.release},set:function(e){console.warn("'sustain' is deprecated. Use 'release' instead."),r.Util.isInRange(e,0,10)&&(this.release=e)}},getSourceNode:{enumerable:!0,value:function(){if(this.sourceNode){var e=this.sourceNode;e.gainSuccessor.gain.setValueAtTime(e.gainSuccessor.gain.value,r.context.currentTime),e.gainSuccessor.gain.linearRampToValueAtTime(1e-4,r.context.currentTime+.2),setTimeout((function(){e.disconnect(),e.gainSuccessor.disconnect()}),200)}var t=this.getRawSourceNode();return t.gainSuccessor=r.context.createGain(),t.connect(t.gainSuccessor),t.gainSuccessor.connect(this.fadeNode),this.fadeNode.connect(this.getInputNode()),r.Util.isAudioBufferSourceNode(t)&&(t.onended=this.onEnded(t).bind(this)),t}},getInputNode:{enumerable:!0,value:function(){return this.effects.length>0?this.effects[0].inputNode:this.masterVolume}},applyAttack:{enumerable:!1,value:function(){if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(r.context.currentTime),this.attack){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t=this.attack;e||(t=(1-this.fadeNode.gain.value)*this.attack),this.fadeNode.gain.setTargetAtTime(1,r.context.currentTime,2*t)}else this.fadeNode.gain.setTargetAtTime(1,r.context.currentTime,.001)}},stopWithRelease:{enumerable:!1,value:function(e){var t=this.sourceNode,n=function(){return r.Util.isFunction(t.stop)?t.stop(0):t.disconnect()};if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(r.context.currentTime),!this.release)return this.fadeNode.gain.setTargetAtTime(0,r.context.currentTime,.001),void n();var i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o=this.release;i||(o=this.fadeNode.gain.value*this.release),this.fadeNode.gain.setTargetAtTime(1e-5,r.context.currentTime,o/5),window.setTimeout((function(){n()}),1e3*o)}}}),s.Group=function(e){e=e||[],this.mergeGainNode=r.context.createGain(),this.masterVolume=r.context.createGain(),this.sounds=[],this.effects=[],this.effectConnectors=[],this.mergeGainNode.connect(this.masterVolume),this.masterVolume.connect(r.masterGainNode);for(var t=0;t<e.length;t++)this.addSound(e[t])},s.Group.prototype=Object.create(r.Events,{connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},addSound:{enumerable:!0,value:function(e){return r.Util.isSound(e)?this.sounds.indexOf(e)>-1?void console.warn("The Pizzicato.Sound object was already added to this group"):e.detached?void console.warn("Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together."):(e.disconnect(r.masterGainNode),e.connect(this.mergeGainNode),void this.sounds.push(e)):void console.error("You can only add Pizzicato.Sound objects")}},removeSound:{enumerable:!0,value:function(e){var t=this.sounds.indexOf(e);return-1===t?void console.warn("Cannot remove a sound that is not part of this group."):(e.disconnect(this.mergeGainNode),e.connect(r.masterGainNode),void this.sounds.splice(t,1))}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){r.Util.isInRange(e,0,1)&&(this.masterVolume.gain.value=e)}},play:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].play();this.trigger("play")}},stop:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].stop();this.trigger("stop")}},pause:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].pause();this.trigger("pause")}},addEffect:{enumerable:!0,value:function(e){if(!r.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.mergeGainNode;t.disconnect(),t.connect(e);var n=r.context.createGain();return this.effectConnectors.push(n),e.connect(n),n.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this group."),this;var n=0===t?this.mergeGainNode:this.effectConnectors[t-1];n.disconnect();var i,o=this.effectConnectors[t];return o.disconnect(),e.disconnect(o),this.effectConnectors.splice(t,1),this.effects.splice(t,1),i=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],n.connect(i),this}}}),s.Effects={};var h=Object.create(null,{connect:{enumerable:!0,value:function(e){return this.outputNode.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.outputNode.disconnect(e),this}}});s.Effects.Delay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.delayNode),this.inputNode.connect(this.delayNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Delay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),s.Effects.Compressor=function(e){this.options={},e=e||this.options;var t={threshold:-24,knee:30,attack:.003,release:.25,ratio:12};for(var n in this.inputNode=this.compressorNode=s.context.createDynamicsCompressor(),this.outputNode=s.context.createGain(),this.compressorNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Compressor.prototype=Object.create(h,{threshold:{enumerable:!0,get:function(){return this.compressorNode.threshold.value},set:function(e){s.Util.isInRange(e,-100,0)&&(this.compressorNode.threshold.value=e)}},knee:{enumerable:!0,get:function(){return this.compressorNode.knee.value},set:function(e){s.Util.isInRange(e,0,40)&&(this.compressorNode.knee.value=e)}},attack:{enumerable:!0,get:function(){return this.compressorNode.attack.value},set:function(e){s.Util.isInRange(e,0,1)&&(this.compressorNode.attack.value=e)}},release:{enumerable:!0,get:function(){return this.compressorNode.release.value},set:function(e){s.Util.isInRange(e,0,1)&&(this.compressorNode.release.value=e)}},ratio:{enumerable:!0,get:function(){return this.compressorNode.ratio.value},set:function(e){s.Util.isInRange(e,1,20)&&(this.compressorNode.ratio.value=e)}},getCurrentGainReduction:function(){return this.compressorNode.reduction}}),s.Effects.LowPassFilter=function(e){n.call(this,e,"lowpass")},s.Effects.HighPassFilter=function(e){n.call(this,e,"highpass")};var f=Object.create(h,{frequency:{enumerable:!0,get:function(){return this.filterNode.frequency.value},set:function(e){s.Util.isInRange(e,10,22050)&&(this.filterNode.frequency.value=e)}},peak:{enumerable:!0,get:function(){return this.filterNode.Q.value},set:function(e){s.Util.isInRange(e,1e-4,1e3)&&(this.filterNode.Q.value=e)}}});s.Effects.LowPassFilter.prototype=f,s.Effects.HighPassFilter.prototype=f,s.Effects.Distortion=function(e){this.options={},e=e||this.options;var t={gain:.5};for(var n in this.waveShaperNode=s.context.createWaveShaper(),this.inputNode=this.outputNode=this.waveShaperNode,t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Distortion.prototype=Object.create(h,{gain:{enumerable:!0,get:function(){return this.options.gain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.gain=e,this.adjustGain())}},adjustGain:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var e,t=r.Util.isNumber(this.options.gain)?parseInt(100*this.options.gain,10):50,n=44100,i=new Float32Array(n),o=Math.PI/180,s=0;n>s;++s)e=2*s/n-1,i[s]=(3+t)*e*20*o/(Math.PI+t*Math.abs(e));this.waveShaperNode.curve=i}}}),s.Effects.Flanger=function(e){this.options={},e=e||this.options;var t={time:.45,speed:.2,depth:.1,feedback:.1,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.inputFeedbackNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.oscillatorNode=s.context.createOscillator(),this.gainNode=s.context.createGain(),this.feedbackNode=s.context.createGain(),this.oscillatorNode.type="sine",this.inputNode.connect(this.inputFeedbackNode),this.inputNode.connect(this.dryGainNode),this.inputFeedbackNode.connect(this.delayNode),this.inputFeedbackNode.connect(this.wetGainNode),this.delayNode.connect(this.wetGainNode),this.delayNode.connect(this.feedbackNode),this.feedbackNode.connect(this.inputFeedbackNode),this.oscillatorNode.connect(this.gainNode),this.gainNode.connect(this.delayNode.delayTime),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),this.oscillatorNode.start(0),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Flanger.prototype=Object.create(h,{time:{enumberable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.time=e,this.delayNode.delayTime.value=r.Util.normalize(e,.001,.02))}},speed:{enumberable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.speed=e,this.oscillatorNode.frequency.value=r.Util.normalize(e,.5,5))}},depth:{enumberable:!0,get:function(){return this.options.depth},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.depth=e,this.gainNode.gain.value=r.Util.normalize(e,5e-4,.005))}},feedback:{enumberable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=e,this.feedbackNode.gain.value=r.Util.normalize(e,0,.8))}},mix:{enumberable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}}}),s.Effects.StereoPanner=function(e){this.options={},e=e||this.options;var t={pan:0};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):s.context.createPanner?(console.warn("Your browser does not support the StereoPannerNode. Will use PannerNode instead."),this.pannerNode=s.context.createPanner(),this.pannerNode.type="equalpower",this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):(console.warn("Your browser does not support the Panner effect."),this.inputNode.connect(this.outputNode)),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.StereoPanner.prototype=Object.create(h,{pan:{enumerable:!0,get:function(){return this.options.pan},set:function(e){r.Util.isInRange(e,-1,1)&&(this.options.pan=e,this.pannerNode)&&(this.pannerNode.toString().indexOf("StereoPannerNode")>-1?this.pannerNode.pan.value=e:this.pannerNode.setPosition(e,0,1-Math.abs(e)))}}}),s.Effects.Convolver=function(e,t){this.options={},e=e||this.options;var n=this,i=new XMLHttpRequest,o={mix:.5};for(var c in this.callback=t,this.inputNode=s.context.createGain(),this.convolverNode=s.context.createConvolver(),this.outputNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.inputNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),o)this[c]=e[c],this[c]=void 0===this[c]||null===this[c]?o[c]:this[c];return e.impulse?(i.open("GET",e.impulse,!0),i.responseType="arraybuffer",i.onload=function(e){var t=e.target.response;s.context.decodeAudioData(t,(function(e){n.convolverNode.buffer=e,n.callback&&r.Util.isFunction(n.callback)&&n.callback()}),(function(e){e=e||new Error("Error decoding impulse file"),n.callback&&r.Util.isFunction(n.callback)&&n.callback(e)}))},i.onreadystatechange=function(t){4===i.readyState&&200!==i.status&&console.error("Error while fetching "+e.impulse+". "+i.statusText)},void i.send()):void console.error("No impulse file specified.")},s.Effects.Convolver.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}}}),s.Effects.PingPongDelay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.delayNodeLeft=s.context.createDelay(),this.delayNodeRight=s.context.createDelay(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.channelMerger=s.context.createChannelMerger(2),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNodeLeft.connect(this.channelMerger,0,0),this.delayNodeRight.connect(this.channelMerger,0,1),this.delayNodeLeft.connect(this.delayNodeRight),this.feedbackGainNode.connect(this.delayNodeLeft),this.delayNodeRight.connect(this.feedbackGainNode),this.inputNode.connect(this.feedbackGainNode),this.channelMerger.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.PingPongDelay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNodeLeft.delayTime.value=e,this.delayNodeRight.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),s.Effects.Reverb=function(e){this.options={},e=e||this.options;var t={mix:.5,time:.01,decay:.01,reverse:!1};for(var n in this.inputNode=s.context.createGain(),this.reverbNode=s.context.createConvolver(),this.outputNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n];i.bind(this)()},s.Effects.Reverb.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,1e-4,10)&&(this.options.time=e,i.bind(this)())}},decay:{enumerable:!0,get:function(){return this.options.decay},set:function(e){r.Util.isInRange(e,1e-4,10)&&(this.options.decay=e,i.bind(this)())}},reverse:{enumerable:!0,get:function(){return this.options.reverse},set:function(e){r.Util.isBool(e)&&(this.options.reverse=e,i.bind(this)())}}}),s.Effects.Tremolo=function(e){this.options={},e=e||this.options;var t={speed:4,depth:1,mix:.8};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.tremoloGainNode=s.context.createGain(),this.tremoloGainNode.gain.value=0,this.lfoNode=s.context.createOscillator(),this.shaperNode=s.context.createWaveShaper(),this.shaperNode.curve=new Float32Array([0,1]),this.shaperNode.connect(this.tremoloGainNode.gain),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.lfoNode.connect(this.shaperNode),this.lfoNode.type="sine",this.lfoNode.start(0),this.inputNode.connect(this.tremoloGainNode),this.tremoloGainNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Tremolo.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,20)&&(this.options.speed=e,this.lfoNode.frequency.value=e)}},depth:{enumerable:!0,get:function(){return this.options.depth},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.depth=e,this.shaperNode.curve=new Float32Array([1-e,1]))}}}),s.Effects.DubDelay=function(e){this.options={},e=e||this.options;var t={feedback:.6,time:.7,mix:.5,cutoff:700};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.bqFilterNode=s.context.createBiquadFilter(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.bqFilterNode),this.bqFilterNode.connect(this.delayNode),this.delayNode.connect(this.feedbackGainNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.DubDelay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}},cutoff:{enumerable:!0,get:function(){return this.options.cutoff},set:function(e){r.Util.isInRange(e,0,4e3)&&(this.options.cutoff=e,this.bqFilterNode.frequency.value=this.cutoff)}}}),s.Effects.RingModulator=function(e){this.options={},e=e||this.options;var t={speed:30,distortion:1,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.vIn=s.context.createOscillator(),this.vIn.start(0),this.vInGain=s.context.createGain(),this.vInGain.gain.value=.5,this.vInInverter1=s.context.createGain(),this.vInInverter1.gain.value=-1,this.vInInverter2=s.context.createGain(),this.vInInverter2.gain.value=-1,this.vInDiode1=new p(s.context),this.vInDiode2=new p(s.context),this.vInInverter3=s.context.createGain(),this.vInInverter3.gain.value=-1,this.vcInverter1=s.context.createGain(),this.vcInverter1.gain.value=-1,this.vcDiode3=new p(s.context),this.vcDiode4=new p(s.context),this.outGain=s.context.createGain(),this.outGain.gain.value=3,this.compressor=s.context.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.ratio.value=16,this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.vcInverter1),this.inputNode.connect(this.vcDiode4.node),this.vcInverter1.connect(this.vcDiode3.node),this.vIn.connect(this.vInGain),this.vInGain.connect(this.vInInverter1),this.vInGain.connect(this.vcInverter1),this.vInGain.connect(this.vcDiode4.node),this.vInInverter1.connect(this.vInInverter2),this.vInInverter1.connect(this.vInDiode2.node),this.vInInverter2.connect(this.vInDiode1.node),this.vInDiode1.connect(this.vInInverter3),this.vInDiode2.connect(this.vInInverter3),this.vInInverter3.connect(this.compressor),this.vcDiode3.connect(this.compressor),this.vcDiode4.connect(this.compressor),this.compressor.connect(this.outGain),this.outGain.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]};var p=function(e){this.context=e,this.node=this.context.createWaveShaper(),this.vb=.2,this.vl=.4,this.h=1,this.setCurve()};return p.prototype.setDistortion=function(e){return this.h=e,this.setCurve()},p.prototype.setCurve=function(){var e,t,n,i,o,s,r;for(t=1024,e=s=0,r=(o=new Float32Array(t)).length;r>=0?r>s:s>r;e=r>=0?++s:--s)n=(e-512)/512,i=(n=Math.abs(n))<=this.vb?0:this.vb<n&&n<=this.vl?this.h*(Math.pow(n-this.vb,2)/(2*this.vl-2*this.vb)):this.h*n-this.h*this.vl+this.h*(Math.pow(this.vl-this.vb,2)/(2*this.vl-2*this.vb)),o[e]=i;return this.node.curve=o},p.prototype.connect=function(e){return this.node.connect(e)},s.Effects.RingModulator.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,2e3)&&(this.options.speed=e,this.vIn.frequency.value=e)}},distortion:{enumerable:!0,get:function(){return this.options.distortion},set:function(e){if(r.Util.isInRange(e,.2,50)){this.options.distortion=parseFloat(e,10);for(var t=[this.vInDiode1,this.vInDiode2,this.vcDiode3,this.vcDiode4],n=0,i=t.length;i>n;n++)t[n].setDistortion(e)}}}}),s.Effects.Quadrafuzz=function(e){this.options={},e=e||this.options;var t={lowGain:.6,midLowGain:.8,midHighGain:.5,highGain:.6};this.inputNode=r.context.createGain(),this.outputNode=r.context.createGain(),this.dryGainNode=r.context.createGain(),this.wetGainNode=r.context.createGain(),this.lowpassLeft=r.context.createBiquadFilter(),this.lowpassLeft.type="lowpass",this.lowpassLeft.frequency.value=147,this.lowpassLeft.Q.value=.7071,this.bandpass1Left=r.context.createBiquadFilter(),this.bandpass1Left.type="bandpass",this.bandpass1Left.frequency.value=587,this.bandpass1Left.Q.value=.7071,this.bandpass2Left=r.context.createBiquadFilter(),this.bandpass2Left.type="bandpass",this.bandpass2Left.frequency.value=2490,this.bandpass2Left.Q.value=.7071,this.highpassLeft=r.context.createBiquadFilter(),this.highpassLeft.type="highpass",this.highpassLeft.frequency.value=4980,this.highpassLeft.Q.value=.7071,this.overdrives=[];for(var n=0;4>n;n++)this.overdrives[n]=r.context.createWaveShaper(),this.overdrives[n].curve=o();this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode);var i=[this.lowpassLeft,this.bandpass1Left,this.bandpass2Left,this.highpassLeft];for(n=0;n<i.length;n++)this.wetGainNode.connect(i[n]),i[n].connect(this.overdrives[n]),this.overdrives[n].connect(this.outputNode);for(var s in t)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?t[s]:this[s]},s.Effects.Quadrafuzz.prototype=Object.create(h,{lowGain:{enumerable:!0,get:function(){return this.options.lowGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.lowGain=e,this.overdrives[0].curve=o(r.Util.normalize(this.lowGain,0,150)))}},midLowGain:{enumerable:!0,get:function(){return this.options.midLowGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.midLowGain=e,this.overdrives[1].curve=o(r.Util.normalize(this.midLowGain,0,150)))}},midHighGain:{enumerable:!0,get:function(){return this.options.midHighGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.midHighGain=e,this.overdrives[2].curve=o(r.Util.normalize(this.midHighGain,0,150)))}},highGain:{enumerable:!0,get:function(){return this.options.highGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.highGain=e,this.overdrives[3].curve=o(r.Util.normalize(this.highGain,0,150)))}}}),s}console.error("No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.")}("undefined"!=typeof window?window:ze)},We(He={exports:{}},He.exports),He.exports);let _e,Be,Ye,Qe,Xe,Je,Ke,Ze,et,tt,nt,it,ot;function st(){const e=new AudioWorkletNode(_e,"soundwave-processor",{processorOptions:Ze});return e.port.onmessage=e=>{!function(e){const{id:t,data:n}=e;switch(t){case"waveData":et(n);break;case"soundData":console.log("got soundData",n),Ke&&(console.log("stopSingleSoundProcessor"),Be.disconnect(Ke),Ke.disconnect(Ve.masterGainNode),Ke=null),tt(n);break;case"error":nt(n);break;default:console.warn("unknown processor message",e)}}(e.data)},e}function rt(e,t){return new Ve.Sound({source:"wave",options:{type:e,frequency:t,detached:!0}})}function ct(e){e&&(e.off(),e.stop(),e.disconnect())}function at(){"running"!==Ve.context.state&&Ve.context.resume()}async function ut(e,t){return lt(),at(),navigator.mediaDevices.getUserMedia({audio:{echoCancellation:e,noiseSuppression:t}}).then((e=>(new MediaStreamAudioSourceNode(_e,{mediaStream:e}).connect(Be),ft(),Xe=!0,Je=e,!0)))}function lt(){Xe=!1,pt(),Je&&(Je.getAudioTracks().forEach((e=>{e.stop()})),Je=null)}function dt(){at(),Ye.connect(Be),ft(),Qe=!0}function ht(){Qe=!1,pt()}function ft(){Ke||(console.log("startSoundwaveProcessor"),Ke=st(),Be.connect(Ke),Ke.connect(Ve.masterGainNode))}function pt(){!Ke||Xe||Qe||(console.log("stopSoundwaveProcessor"),gt("stop"),Be.disconnect(Ke),Ke.disconnect(Ve.masterGainNode),Ke=null)}function vt(e){gt("sweepTime",e)}function mt(e){gt("fps",e)}function gt(e,t){Ke&&Ke.port.postMessage({id:e,data:t})}function Nt(e={}){return new GainNode(_e,e)}class bt{constructor(){this.gain=null,this.oscillator=null,this.waveType=null,this.frequency=null,this.destination=null,this.depth=null}init(e,t,n,i){this.waveType=e,this.frequency=t,this.depth=n,this.destination=i,this.remove(),this.oscillator=rt(e,t),this.gain=Nt({gain:n}),this.gain.connect(i),this.oscillator.connect(this.gain)}play(){this.oscillator&&this.oscillator.play()}stop(){this.oscillator&&this.oscillator.stop()}remove(){this.gain&&this.gain.disconnect(),ct(this.oscillator)}setFrequency(e){this.oscillator&&(this.oscillator.frequency=e)}}class yt{constructor(){this.soundwave=null,this.gain=null,this.lfo=null,this.isPlaying=!1}init(e,t){this.remove();const{sound:n,soundGain:i}=function(e,t){const n=rt(e,t),i=_e.createGain();return n.connect(i),i.connect(Ye),{sound:n,soundGain:i}}(e,t);this.soundwave=n,this.gain=i}setFrequency(e){this.soundwave&&(this.soundwave.frequency=e)}setDetune(e){this.soundwave&&(this.soundwave.sourceNode.detune.value=e)}initLfo(e,t,n){this.removeLfo(),this.lfo=new bt,this.lfo.init(e,t,n,this.soundwave.sourceNode.frequency),this.isPlaying&&this.lfo.play()}setLfoFrequency(e){this.lfo&&this.lfo.setFrequency(e)}removeLfo(){this.lfo&&(this.lfo.remove(),this.lfo=null)}play(){if(this.isPlaying=!0,this.soundwave&&this.soundwave.play(),this.lfo){const{waveType:e,frequency:t,depth:n}=this.lfo;this.initLfo(e,t,n)}}stop(){this.isPlaying=!1,this.soundwave&&this.soundwave.stop(),this.lfo&&this.lfo.stop()}remove(){this.removeLfo(),ct(this.soundwave),this.gain&&this.gain.disconnect()}}function $t(e){let t,n,i,o,s,r,c,a,u,l;function v(t){e[4](t)}let g={title:"⅟SAMPLE TIME",max:1e3,min:1,pixelRange:200};function N(t){e[5](t)}void 0!==e[2]&&(g.value=e[2]),n=new pe({props:g}),R.push((()=>Y(n,"value",v)));let b={title:"FPS",max:120,min:1,pixelRange:200};function $(t){e[6](t)}void 0!==e[0]&&(b.value=e[0]),s=new pe({props:b}),R.push((()=>Y(s,"value",N)));let x={title:"WAVES SHOWING",max:30,min:1,pixelRange:200};return void 0!==e[1]&&(x.value=e[1]),a=new pe({props:x}),R.push((()=>Y(a,"value",$))),{c(){t=p("div"),Q(n.$$.fragment),o=m(),Q(s.$$.fragment),c=m(),Q(a.$$.fragment),y(t,"class","container svelte-15zab5e")},m(e,i){h(e,t,i),X(n,t,null),d(t,o),X(s,t,null),d(t,c),X(a,t,null),l=!0},p(e,t){const o={};!i&&4&t&&(i=!0,o.value=e[2],O((()=>i=!1))),n.$set(o);const c={};!r&&1&t&&(r=!0,c.value=e[0],O((()=>r=!1))),s.$set(c);const l={};!u&&2&t&&(u=!0,l.value=e[1],O((()=>u=!1))),a.$set(l)},i(e){l||(_(n.$$.fragment,e),_(s.$$.fragment,e),_(a.$$.fragment,e),l=!0)},o(e){B(n.$$.fragment,e),B(s.$$.fragment,e),B(a.$$.fragment,e),l=!1},d(e){e&&f(t),J(n),J(s),J(a)}}}function xt(e){let t,n;return t=new re({props:{heading:"OSCILLOSCOPE PARAMETERS",isOpen:!0,$$slots:{default:[$t]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(e,i){X(t,e,i),n=!0},p(e,[n]){const i={};135&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function wt(e,t,n){let{sampleSize:i}=t,{fps:o}=t,{oldWavesDisplayed:s}=t,r=1/i;return e.$$set=e=>{"sampleSize"in e&&n(3,i=e.sampleSize),"fps"in e&&n(0,o=e.fps),"oldWavesDisplayed"in e&&n(1,s=e.oldWavesDisplayed)},e.$$.update=()=>{4&e.$$.dirty&&n(3,i=1/r)},[o,s,r,i,function(e){r=e,n(2,r)},function(e){o=e,n(0,o)},function(e){s=e,n(1,s)}]}class Gt extends ee{constructor(e){super(),Z(this,e,wt,xt,s,{sampleSize:3,fps:0,oldWavesDisplayed:1})}}function It(e){let t,n,i,o,s,r,c,a;function u(t){e[5](t)}function l(t){e[6](t)}function v(t){e[7](t)}let g={};return void 0!==e[1]&&(g.sampleSize=e[1]),void 0!==e[0]&&(g.oldWavesDisplayed=e[0]),void 0!==e[2]&&(g.fps=e[2]),t=new Gt({props:g}),R.push((()=>Y(t,"sampleSize",u))),R.push((()=>Y(t,"oldWavesDisplayed",l))),R.push((()=>Y(t,"fps",v))),{c(){Q(t.$$.fragment),s=m(),r=p("div"),c=p("canvas"),y(c,"class","canvas"),y(r,"class","canvasContainer center svelte-5rjm1e")},m(n,i){X(t,n,i),h(n,s,i),h(n,r,i),d(r,c),e[8](c),e[9](r),a=!0},p(e,[s]){const r={};!n&&2&s&&(n=!0,r.sampleSize=e[1],O((()=>n=!1))),!i&&1&s&&(i=!0,r.oldWavesDisplayed=e[0],O((()=>i=!1))),!o&&4&s&&(o=!0,r.fps=e[2],O((()=>o=!1))),t.$set(r)},i(e){a||(_(t.$$.fragment,e),a=!0)},o(e){B(t.$$.fragment,e),a=!1},d(n){J(t,n),n&&f(s),n&&f(r),e[8](null),e[9](null)}}}function St(e){it(e)}function kt(e){ot(e)}function Ut(e){const t=e.getContext("2d");return t.strokeStyle="#ff3e00",t.lineWidth=1,t}function Et(e,t,n,i){const{xSamples:o,ySamples:s}=e,r=i-100;return{x:n/2+o[t]/2*n,y:50+(.5+s[t]/2)*r}}function Tt(e,t,n){let{oldWavesDisplayed:i}=t,{sampleSize:o}=t,{fps:s}=t;const r=[];let c,a,u,l,d,h=null;function f(e){e.width=c.clientWidth,e.height=c.clientHeight}function p(){h&&(clearTimeout(h),h=null)}function v(e){p();const{samplesLength:t,continueProcessing:n}=e,{width:i,height:o}=l;let s=Number.POSITIVE_INFINITY;d.clearRect(0,0,i,o),d.beginPath();for(let n=0;n<t;n++){const{x:t,y:r}=Et(e,n,i,o);t<s?d.moveTo(t,r):d.lineTo(t,r),s=t}d.stroke(),g(),n||b()}function m(e){const{samplesX:t,samplesY:n}=e,{width:i,height:o}=l,s=t.length;d.clearRect(0,0,i,o),d.beginPath();for(let e=0;e<s;e++){const t={xSamples:[e/s*2-1],ySamples:[n[e]]},{x:r,y:c}=Et(t,0,i,o);0===e?d.moveTo(r,c):d.lineTo(r,c)}d.stroke(),g()}function g(){const e=new Image;if(r.push(e),r.length>i){const e=r.length-i;r.splice(0,e)}e.onload=N,e.src=l.toDataURL()}function N(){const{width:e,height:t}=a;u.clearRect(0,0,e,t),u.imageSmoothingEnabled=!0;const n=i/3;r.forEach(((i,o)=>{const s=Math.min((o+1)/n,1);u.globalAlpha=s.toString(10),u.drawImage(i,0,0,e,t)})),u.globalAlpha=1}function b(){!h&&r.length&&(h=setTimeout((()=>{r.splice(0,1),N(),h=null,b()}),16.666666666666668))}return k((()=>{f(a),u=Ut(a),l=document.createElement("canvas"),f(l),d=Ut(l),it=v,ot=m})),function(e){S().$$.on_destroy.push(e)}((()=>{p(),it=()=>{},ot=()=>{},N=()=>{}})),e.$$set=e=>{"oldWavesDisplayed"in e&&n(0,i=e.oldWavesDisplayed),"sampleSize"in e&&n(1,o=e.sampleSize),"fps"in e&&n(2,s=e.fps)},[i,o,s,c,a,function(e){o=e,n(1,o)},function(e){i=e,n(0,i)},function(e){s=e,n(2,s)},function(e){R[e?"unshift":"push"]((()=>{a=e,n(4,a)}))},function(e){R[e?"unshift":"push"]((()=>{c=e,n(3,c)}))}]}class Rt extends ee{constructor(e){super(),Z(this,e,Tt,It,s,{oldWavesDisplayed:0,sampleSize:1,fps:2})}}function qt(e,t,n){const i=e.slice();return i[26]=t[n],i[27]=t,i[28]=n,i}function Lt(e){let t,n;return{c(){t=p("div"),n=v(e[7]),y(t,"class","errorMsg svelte-p4iq6r")},m(e,i){h(e,t,i),d(t,n)},p(e,t){128&t&&$(n,e[7])},d(e){e&&f(t)}}}function Ct(e){let t;return{c(){t=v("get input")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Dt(e){let t;return{c(){t=v("stop input")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Ft(e){let t;return{c(){t=v("play sound")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Ot(e){let t;return{c(){t=v("stop sound")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Pt(e){let t,n,i,o;function s(t){e[17](t)}function r(t){e[18](t)}let c={removeHandler:e[10]};return void 0!==e[1]&&(c.useEchoCancellation=e[1]),void 0!==e[2]&&(c.useNoiseSuppression=e[2]),t=new le({props:c}),R.push((()=>Y(t,"useEchoCancellation",s))),R.push((()=>Y(t,"useNoiseSuppression",r))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),o=!0},p(e,o){const s={};!n&&2&o&&(n=!0,s.useEchoCancellation=e[1],O((()=>n=!1))),!i&&4&o&&(i=!0,s.useNoiseSuppression=e[2],O((()=>i=!1))),t.$set(s)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){B(t.$$.fragment,e),o=!1},d(e){J(t,e)}}}function jt(e){let t,n,i;function o(){return e[19](e[26])}function s(t){e[20](t,e[26],e[27],e[28])}let r={removeHandler:o};return void 0!==e[26]&&(r.sound=e[26]),t=new Ae({props:r}),R.push((()=>Y(t,"sound",s))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),i=!0},p(i,s){e=i;const r={};256&s&&(r.removeHandler=o),!n&&256&s&&(n=!0,r.sound=e[26],O((()=>n=!1))),t.$set(r)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){B(t.$$.fragment,e),i=!1},d(e){J(t,e)}}}function Mt(e){let t,n,o,s,r,c,a,u,l,v,b,$,x,w,G,I,S,k;function U(t){e[14](t)}function E(t){e[15](t)}function T(t){e[16](t)}let q={};void 0!==e[3]&&(q.sampleSize=e[3]),void 0!==e[6]&&(q.oldWavesDisplayed=e[6]),void 0!==e[4]&&(q.fps=e[4]),t=new Rt({props:q}),R.push((()=>Y(t,"sampleSize",U))),R.push((()=>Y(t,"oldWavesDisplayed",E))),R.push((()=>Y(t,"fps",T)));let L=e[7]&&Lt(e);function C(e,t){return e[5]?Dt:Ct}let D=C(e),F=D(e);function P(e,t){return e[0]?Ot:Ft}let j=P(e),M=j(e),A=e[5]&&Pt(e),z=e[8],W=[];for(let t=0;t<z.length;t+=1)W[t]=jt(qt(e,z,t));const K=e=>B(W[e],1,1,(()=>{W[e]=null}));return{c(){Q(t.$$.fragment),r=m(),L&&L.c(),c=m(),a=p("div"),u=p("button"),F.c(),l=m(),v=p("button"),M.c(),b=m(),$=p("button"),$.textContent="add a sound",x=m(),A&&A.c(),w=m();for(let e=0;e<W.length;e+=1)W[e].c();G=g(),y(u,"class","svelte-p4iq6r"),y(v,"class","svelte-p4iq6r"),y($,"class","svelte-p4iq6r")},m(n,i){X(t,n,i),h(n,r,i),L&&L.m(n,i),h(n,c,i),h(n,a,i),d(a,u),F.m(u,null),d(a,l),d(a,v),M.m(v,null),d(a,b),d(a,$),h(n,x,i),A&&A.m(n,i),h(n,w,i);for(let e=0;e<W.length;e+=1)W[e].m(n,i);h(n,G,i),I=!0,S||(k=[N(u,"click",e[9]),N(v,"click",e[11]),N($,"click",e[12])],S=!0)},p(e,[i]){const r={};if(!n&&8&i&&(n=!0,r.sampleSize=e[3],O((()=>n=!1))),!o&&64&i&&(o=!0,r.oldWavesDisplayed=e[6],O((()=>o=!1))),!s&&16&i&&(s=!0,r.fps=e[4],O((()=>s=!1))),t.$set(r),e[7]?L?L.p(e,i):(L=Lt(e),L.c(),L.m(c.parentNode,c)):L&&(L.d(1),L=null),D!==(D=C(e))&&(F.d(1),F=D(e),F&&(F.c(),F.m(u,null))),j!==(j=P(e))&&(M.d(1),M=j(e),M&&(M.c(),M.m(v,null))),e[5]?A?(A.p(e,i),32&i&&_(A,1)):(A=Pt(e),A.c(),_(A,1),A.m(w.parentNode,w)):A&&(H(),B(A,1,1,(()=>{A=null})),V()),8448&i){let t;for(z=e[8],t=0;t<z.length;t+=1){const n=qt(e,z,t);W[t]?(W[t].p(n,i),_(W[t],1)):(W[t]=jt(n),W[t].c(),_(W[t],1),W[t].m(G.parentNode,G))}for(H(),t=z.length;t<W.length;t+=1)K(t);V()}},i(e){if(!I){_(t.$$.fragment,e),_(A);for(let e=0;e<z.length;e+=1)_(W[e]);I=!0}},o(e){B(t.$$.fragment,e),B(A),W=W.filter(Boolean);for(let e=0;e<W.length;e+=1)B(W[e]);I=!1},d(e){J(t,e),e&&f(r),L&&L.d(e),e&&f(c),e&&f(a),F.d(),M.d(),e&&f(x),A&&A.d(e),e&&f(w),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(W,e),e&&f(G),S=!1,i(k)}}}function At(e,t,n){let i=!1,o=!1,s=!1,r=!0,c=.1,a=60,u=10,l=null,d=[];function h(){ut(s,r).then((()=>{n(5,o=!0)})).catch((e=>{console.error("cannot get user audio",{error:e}),n(7,l="cannot get audio input"),n(5,o=!1)}))}function f(){lt(),n(5,o=!1)}function p(e){const t=d.indexOf(e);if(t>-1){const{[t]:e,...i}=d;e.remove(),n(8,d=Object.values(i))}}function v(e){let t="an error occurred.";if("process"===e)t="cannot get audio data. please check your audio system - is your audio used by another app?";n(7,l=t)}k((()=>{!async function(e,t,n){et=e,tt=t,nt=n,_e=Ve.context,Ye=Nt(),Be=new Ve.Effects.Compressor({threshold:-5,knee:0,ratio:40,attack:.001,release:.1}),Ze={mainGain:Ve.masterGainNode.gain.value,sampleRate:_e.sampleRate},await _e.audioWorklet.addModule("processors/SoundwaveProcessor.js"),await _e.audioWorklet.addModule("processors/SingleSoundProcessor.js")}(St,kt,v),n(8,d=d.concat(new yt))}));return e.$$.update=()=>{1&e.$$.dirty&&(i?(dt(),vt(c),mt(a),d.forEach((e=>e.play()))):(d.forEach((e=>e.stop())),n(0,i=!1),setTimeout((()=>{i||ht()}),600))),8&e.$$.dirty&&vt(c),16&e.$$.dirty&&mt(a),6&e.$$.dirty&&o&&h()},[i,s,r,c,a,o,u,l,d,function(){n(7,l=null),o?f():h()},f,function(){n(7,l=null),n(0,i=!i)},function(){const e=new yt;n(8,d=d.concat(e)),i&&(d.forEach((e=>e.stop())),d.forEach((e=>e.play())))},p,function(e){c=e,n(3,c)},function(e){u=e,n(6,u)},function(e){a=e,n(4,a)},function(e){s=e,n(1,s)},function(e){r=e,n(2,r)},e=>p(e),function(e,t,i,o){i[o]=e,n(8,d)}]}class zt extends ee{constructor(e){super(),Z(this,e,At,Mt,s,{})}}function Wt(t){let n;return{c(){n=p("div"),n.textContent="click anywhere to start"},m(e,t){h(e,n,t)},i:e,o:e,d(e){e&&f(n)}}}function Ht(e){let t,n;return t=new zt({}),{c(){Q(t.$$.fragment)},m(e,i){X(t,e,i),n=!0},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Vt(e){let t,n,i,o,s,r,c,a,u,l,g,N,b;const x=[Ht,Wt],w=[];function G(e,t){return e[1]?0:1}return g=G(e),N=w[g]=x[g](e),{c(){t=p("main"),n=p("h1"),n.textContent="JS SYNTH",i=m(),o=p("small"),s=v("v. "),r=v(e[0]),c=v(" · "),a=p("a"),u=v("ARCHIVE"),l=m(),N.c(),y(n,"class","svelte-unjplg"),y(a,"href",e[3]),y(o,"class","svelte-unjplg"),y(t,"class","svelte-unjplg")},m(f,p){h(f,t,p),d(t,n),d(t,i),d(t,o),d(o,s),d(o,r),d(o,c),d(o,a),d(a,u),e[4](a),d(t,l),w[g].m(t,null),b=!0},p(e,[n]){(!b||1&n)&&$(r,e[0]);let i=g;g=G(e),g!==i&&(H(),B(w[i],1,1,(()=>{w[i]=null})),V(),N=w[g],N||(N=w[g]=x[g](e),N.c()),_(N,1),N.m(t,null))},i(e){b||(_(N),b=!0)},o(e){B(N),b=!1},d(n){n&&f(t),e[4](null),w[g].d()}}}function _t(e,t,n){let i,{version:o}=t,s=!1;const r=location.pathname.includes("/versions/")?"../":"./versions/";return window.addEventListener("pointerup",(function e(t){t.target!==i&&(window.removeEventListener("pointerup",e),n(1,s=!0))})),e.$$set=e=>{"version"in e&&n(0,o=e.version)},[o,s,i,r,function(e){R[e?"unshift":"push"]((()=>{i=e,n(2,i)}))}]}return new class extends ee{constructor(e){super(),Z(this,e,_t,Vt,s,{version:0})}}({target:document.body,props:{version:"1.7"}})}();
//# sourceMappingURL=bundle.js.map
