var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t,n,i){if(e){const o=c(e,t,n,i);return e[0](o)}}function c(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function a(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}function u(e,t,n,i,o,s){if(o){const r=c(t,n,i,s);e.p(r,o)}}function l(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function d(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function m(){return v(" ")}function g(){return v("")}function N(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function x(e,t,n){e.classList[n?"add":"remove"](t)}let w;function G(e){w=e}function I(){if(!w)throw new Error("Function called outside component initialization");return w}function k(e){I().$$.on_mount.push(e)}function S(){const e=I();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,o)}))}}}function U(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const E=[],q=[],T=[],R=[],L=Promise.resolve();let C=!1;function F(e){T.push(e)}function D(e){R.push(e)}let O=!1;const P=new Set;function A(){if(!O){O=!0;do{for(let e=0;e<E.length;e+=1){const t=E[e];G(t),M(t.$$)}for(G(null),E.length=0;q.length;)q.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];P.has(t)||(P.add(t),t())}T.length=0}while(E.length);for(;R.length;)R.pop()();C=!1,O=!1,P.clear()}}function M(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}const j=new Set;let z;function W(){z={r:0,c:[],p:z}}function V(){z.r||i(z.c),z=z.p}function H(e,t){e&&e.i&&(j.delete(e),e.i(t))}function _(e,t,n,i){if(e&&e.o){if(j.has(e))return;j.add(e),z.c.push((()=>{j.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function B(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Y(e){e&&e.c()}function Q(e,n,s,r){const{fragment:c,on_mount:a,on_destroy:u,after_update:l}=e.$$;c&&c.m(n,s),r||F((()=>{const n=a.map(t).filter(o);u?u.push(...n):i(n),e.$$.on_mount=[]})),l.forEach(F)}function X(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(E.push(e),C||(C=!0,L.then(A)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,o,s,r,c,a,u,l=[-1]){const d=w;G(t);const h=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:l,skip_bound:!1,root:o.target||d.$$.root};u&&u(h.root);let p=!1;if(h.ctx=s?s(t,o.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return h.ctx&&c(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),p&&J(t,e)),n})):[],h.update(),p=!0,i(h.before_update),h.fragment=!!r&&r(h.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);h.fragment&&h.fragment.l(e),e.forEach(f)}else h.fragment&&h.fragment.c();o.intro&&H(t.$$.fragment),Q(t,o.target,o.anchor,o.customElement),A()}G(d)}class Z{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ee(e){let t,n,i;return{c(){t=p("button"),t.textContent="❌",y(t,"class","remove-button svelte-1rydcio")},m(s,r){h(s,t,r),n||(i=N(t,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function te(e){let t;return{c(){t=v("↧")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function ne(e){let t;return{c(){t=v("↥")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function ie(e){let t,n,i,o,s,c,g,$,w,G,I,k,S,U=e[2]&&ee(e);function E(e,t){return e[0]?ne:te}let q=E(e),T=q(e);const R=e[4].default,L=r(R,e,e[3],null);return{c(){t=p("div"),n=p("div"),U&&U.c(),i=m(),o=p("button"),s=p("span"),c=v(e[1]),g=m(),$=p("span"),T.c(),w=m(),G=p("section"),L&&L.c(),y(s,"class","heading svelte-1rydcio"),y($,"class","icon svelte-1rydcio"),y(o,"class","panel-button svelte-1rydcio"),y(n,"class","panel-header svelte-1rydcio"),y(G,"class","panel-content svelte-1rydcio"),x(G,"isOpen",e[0]),y(t,"class","panel")},m(r,a){h(r,t,a),d(t,n),U&&U.m(n,null),d(n,i),d(n,o),d(o,s),d(s,c),d(o,g),d(o,$),T.m($,null),d(t,w),d(t,G),L&&L.m(G,null),I=!0,k||(S=N(o,"click",e[5]),k=!0)},p(e,[t]){e[2]?U?U.p(e,t):(U=ee(e),U.c(),U.m(n,i)):U&&(U.d(1),U=null),(!I||2&t)&&b(c,e[1]),q!==(q=E(e))&&(T.d(1),T=q(e),T&&(T.c(),T.m($,null))),L&&L.p&&(!I||8&t)&&u(L,R,e,e[3],I?a(R,e[3],t,null):l(e[3]),null),1&t&&x(G,"isOpen",e[0])},i(e){I||(H(L,e),I=!0)},o(e){_(L,e),I=!1},d(e){e&&f(t),U&&U.d(),T.d(),L&&L.d(e),k=!1,S()}}}function oe(e,t,n){let{$$slots:i={},$$scope:o}=t,{heading:s}=t,{isOpen:r}=t,{removeHandler:c=null}=t;return e.$$set=e=>{"heading"in e&&n(1,s=e.heading),"isOpen"in e&&n(0,r=e.isOpen),"removeHandler"in e&&n(2,c=e.removeHandler),"$$scope"in e&&n(3,o=e.$$scope)},[r,s,c,o,i,()=>n(0,r=!r)]}class se extends Z{constructor(e){super(),K(this,e,oe,ie,s,{heading:1,isOpen:0,removeHandler:2})}}function re(e){let t,n,o,s,r,c,a,u,l;return{c(){t=p("label"),n=p("input"),o=v("\n        echo cancellation"),s=m(),r=p("label"),c=p("input"),a=v("\n        noise suppression"),y(n,"type","checkbox"),y(t,"class","svelte-mkl884"),y(c,"type","checkbox"),y(r,"class","svelte-mkl884")},m(i,f){h(i,t,f),d(t,n),n.checked=e[0],d(t,o),h(i,s,f),h(i,r,f),d(r,c),c.checked=e[1],d(r,a),u||(l=[N(n,"change",e[3]),N(c,"change",e[4])],u=!0)},p(e,t){1&t&&(n.checked=e[0]),2&t&&(c.checked=e[1])},d(e){e&&f(t),e&&f(s),e&&f(r),u=!1,i(l)}}}function ce(e){let t,n;return t=new se({props:{heading:"AUDIO INPUT",isOpen:!0,removeHandler:e[5],$$slots:{default:[re]},$$scope:{ctx:e}}}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,[n]){const i={};4&n&&(i.removeHandler=e[5]),67&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function ae(e,t,n){let{removeHandler:i}=t,{useEchoCancellation:o}=t,{useNoiseSuppression:s}=t;return e.$$set=e=>{"removeHandler"in e&&n(2,i=e.removeHandler),"useEchoCancellation"in e&&n(0,o=e.useEchoCancellation),"useNoiseSuppression"in e&&n(1,s=e.useNoiseSuppression)},[o,s,i,function(){o=this.checked,n(0,o)},function(){s=this.checked,n(1,s)},()=>i()]}class ue extends Z{constructor(e){super(),K(this,e,ae,ce,s,{removeHandler:2,useEchoCancellation:0,useNoiseSuppression:1})}}function le(e){let t,n,i;return{c(){t=p("button"),t.innerHTML='<span class="icon">⅟</span>',y(t,"class","inverseButton svelte-zaktlo"),x(t,"useInverse",e[0])},m(o,s){h(o,t,s),n||(i=N(t,"click",e[17]),n=!0)},p(e,n){1&n&&x(t,"useInverse",e[0])},d(e){e&&f(t),n=!1,i()}}}function de(t){let n,o,s,r,c,a,u,l,g,x,w,G,I,k,S,U,E,q,T=t[3]&&le(t);return{c(){n=p("div"),o=p("div"),s=v(t[1]),r=m(),T&&T.c(),c=m(),a=p("div"),u=m(),l=p("div"),g=v(t[4]),x=m(),w=v(t[2]),G=m(),I=p("div"),k=p("button"),k.innerHTML='<span class="icon">+</span>',S=m(),U=p("button"),U.innerHTML='<span class="icon">−</span>',y(o,"class","label svelte-zaktlo"),y(a,"class","knob center svelte-zaktlo"),$(a,"--rotation",t[5]),y(l,"class","label svelte-zaktlo"),y(k,"class","stepButton svelte-zaktlo"),y(U,"class","stepButton svelte-zaktlo"),y(I,"class","stepButtonContainer svelte-zaktlo"),y(n,"class","knobContainer svelte-zaktlo")},m(e,i){h(e,n,i),d(n,o),d(o,s),d(n,r),T&&T.m(n,null),d(n,c),d(n,a),d(n,u),d(n,l),d(l,g),d(l,x),d(l,w),d(n,G),d(n,I),d(I,k),d(I,S),d(I,U),E||(q=[N(a,"pointerdown",t[6]),N(k,"pointerdown",t[7]),N(U,"pointerdown",t[8])],E=!0)},p(e,[t]){2&t&&b(s,e[1]),e[3]?T?T.p(e,t):(T=le(e),T.c(),T.m(n,c)):T&&(T.d(1),T=null),32&t&&$(a,"--rotation",e[5]),16&t&&b(g,e[4]),4&t&&b(w,e[2])},i:e,o:e,d(e){e&&f(n),T&&T.d(),E=!1,i(q)}}}function he(e,t,n){let i,o,s,r,c,a,u,{value:l,min:d,max:h}=t,{rotRange:f=2*Math.PI*.83}=t,{pixelRange:p=200}=t,{startRotation:v=.83*-Math.PI}=t,{title:m=""}=t,{unit:g=""}=t,{outputValue:N=null}=t,{enableInverse:y=!1}=t,{useInverse:b=!1}=t;function $({clientY:e}){n(9,l=function(e,t,n){return Math.round(Math.max(t,Math.min(e,n)))}(r-i*(e-s)/p,d,h))}function x(){window.removeEventListener("pointermove",$),window.removeEventListener("pointerup",x)}function w(){c=!1,clearTimeout(a),window.removeEventListener("pointerup",w)}function G(){c&&l<h&&(n(9,l+=1),a=setTimeout(G,300))}function I(){c&&l>d&&(n(9,l-=1),a=setTimeout(I,300))}return e.$$set=e=>{"value"in e&&n(9,l=e.value),"min"in e&&n(10,d=e.min),"max"in e&&n(11,h=e.max),"rotRange"in e&&n(12,f=e.rotRange),"pixelRange"in e&&n(13,p=e.pixelRange),"startRotation"in e&&n(14,v=e.startRotation),"title"in e&&n(1,m=e.title),"unit"in e&&n(2,g=e.unit),"outputValue"in e&&n(15,N=e.outputValue),"enableInverse"in e&&n(3,y=e.enableInverse),"useInverse"in e&&n(0,b=e.useInverse)},e.$$.update=()=>{3072&e.$$.dirty&&n(16,i=h-d),87552&e.$$.dirty&&n(5,o=v+(l-d)/i*f),33281&e.$$.dirty&&n(4,u=N??(b?(1/l).toFixed(3):l))},[b,m,g,y,u,o,function({clientY:e}){s=e,r=l,window.addEventListener("pointermove",$),window.addEventListener("pointerup",x)},function(){c=!0,G(),window.addEventListener("pointerup",w)},function(){c=!0,I(),window.addEventListener("pointerup",w)},l,d,h,f,p,v,N,i,()=>{n(0,b=!b)}]}class fe extends Z{constructor(e){super(),K(this,e,he,de,s,{value:9,min:10,max:11,rotRange:12,pixelRange:13,startRotation:14,title:1,unit:2,outputValue:15,enableInverse:3,useInverse:0})}}const pe=e=>({}),ve=e=>({}),me=e=>({}),ge=e=>({});function Ne(e){let t,n,i,o,s,c,v,g,N,b,$,w;function G(t){e[11](t)}let I={title:"WAVE TYPE",outputValue:e[1],max:4,min:1};function k(t){e[12](t)}function S(t){e[13](t)}void 0!==e[6]&&(I.value=e[6]),i=new fe({props:I}),q.push((()=>B(i,"value",G)));let U={title:"FREQUENCY",unit:"Hz",max:e[2],min:e[3],enableInverse:e[5]};void 0!==e[7]&&(U.value=e[7]),void 0!==e[0]&&(U.useInverse=e[0]),c=new fe({props:U}),q.push((()=>B(c,"value",k))),q.push((()=>B(c,"useInverse",S)));const E=e[10].knob3,T=r(E,e,e[9],ge),R=e[10].label,L=r(R,e,e[9],ve);return{c(){t=p("div"),n=p("div"),Y(i.$$.fragment),s=m(),Y(c.$$.fragment),N=m(),T&&T.c(),b=m(),$=p("div"),L&&L.c(),y(n,"class","controls svelte-15aqzp1"),x(n,"disabled",e[4]),y($,"class","labelContainer svelte-15aqzp1"),y(t,"class","container svelte-15aqzp1")},m(e,o){h(e,t,o),d(t,n),Q(i,n,null),d(n,s),Q(c,n,null),d(n,N),T&&T.m(n,null),d(t,b),d(t,$),L&&L.m($,null),w=!0},p(e,[t]){const s={};2&t&&(s.outputValue=e[1]),!o&&64&t&&(o=!0,s.value=e[6],D((()=>o=!1))),i.$set(s);const r={};4&t&&(r.max=e[2]),8&t&&(r.min=e[3]),32&t&&(r.enableInverse=e[5]),!v&&128&t&&(v=!0,r.value=e[7],D((()=>v=!1))),!g&&1&t&&(g=!0,r.useInverse=e[0],D((()=>g=!1))),c.$set(r),T&&T.p&&(!w||512&t)&&u(T,E,e,e[9],w?a(E,e[9],t,me):l(e[9]),ge),16&t&&x(n,"disabled",e[4]),L&&L.p&&(!w||512&t)&&u(L,R,e,e[9],w?a(R,e[9],t,pe):l(e[9]),ve)},i(e){w||(H(i.$$.fragment,e),H(c.$$.fragment,e),H(T,e),H(L,e),w=!0)},o(e){_(i.$$.fragment,e),_(c.$$.fragment,e),_(T,e),_(L,e),w=!1},d(e){e&&f(t),X(i),X(c),T&&T.d(e),L&&L.d(e)}}}function ye(e,t,n){let{$$slots:i={},$$scope:o}=t,{waveType:s}=t,{frequency:r}=t,{useInverseFrequency:c=!1}=t,{maxFrequency:a}=t,{minFrequency:u}=t,{disabled:l=!1}=t,{enableInverseFrequency:d=!1}=t,h=1,f=r;const p=["sine","triangle","sawtooth","square"];return e.$$set=e=>{"waveType"in e&&n(1,s=e.waveType),"frequency"in e&&n(8,r=e.frequency),"useInverseFrequency"in e&&n(0,c=e.useInverseFrequency),"maxFrequency"in e&&n(2,a=e.maxFrequency),"minFrequency"in e&&n(3,u=e.minFrequency),"disabled"in e&&n(4,l=e.disabled),"enableInverseFrequency"in e&&n(5,d=e.enableInverseFrequency),"$$scope"in e&&n(9,o=e.$$scope)},e.$$.update=()=>{129&e.$$.dirty&&n(8,r=c?1/f:f),64&e.$$.dirty&&n(1,s=p[h-1])},[c,s,a,u,l,d,h,f,r,o,i,function(e){h=e,n(6,h)},function(e){f=e,n(7,f)},function(e){c=e,n(0,c)}]}class be extends Z{constructor(e){super(),K(this,e,ye,Ne,s,{waveType:1,frequency:8,useInverseFrequency:0,maxFrequency:2,minFrequency:3,disabled:4,enableInverseFrequency:5})}}function $e(e){let t,n,i;function o(t){e[3](t)}let s={slot:"knob3",title:"DETUNE",unit:"cents",max:50,min:-50};return void 0!==e[2]&&(s.value=e[2]),t=new fe({props:s}),q.push((()=>B(t,"value",o))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(e,i){const o={};!n&&4&i&&(n=!0,o.value=e[2],D((()=>n=!1))),t.$set(o)},i(e){i||(H(t.$$.fragment,e),i=!0)},o(e){_(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function xe(e){let t;return{c(){t=p("span"),t.textContent="SOUND",y(t,"slot","label")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function we(e){let t,n,i,o;function s(t){e[4](t)}function r(t){e[5](t)}let c={maxFrequency:5e3,minFrequency:60,$$slots:{label:[xe],knob3:[$e]},$$scope:{ctx:e}};return void 0!==e[1]&&(c.frequency=e[1]),void 0!==e[0]&&(c.waveType=e[0]),t=new be({props:c}),q.push((()=>B(t,"frequency",s))),q.push((()=>B(t,"waveType",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),o=!0},p(e,[o]){const s={};68&o&&(s.$$scope={dirty:o,ctx:e}),!n&&2&o&&(n=!0,s.frequency=e[1],D((()=>n=!1))),!i&&1&o&&(i=!0,s.waveType=e[0],D((()=>i=!1))),t.$set(s)},i(e){o||(H(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){X(t,e)}}}function Ge(e,t,n){let{waveType:i}=t,{frequency:o}=t,{detune:s}=t;return e.$$set=e=>{"waveType"in e&&n(0,i=e.waveType),"frequency"in e&&n(1,o=e.frequency),"detune"in e&&n(2,s=e.detune)},[i,o,s,function(e){s=e,n(2,s)},function(e){o=e,n(1,o)},function(e){i=e,n(0,i)}]}class Ie extends Z{constructor(e){super(),K(this,e,Ge,we,s,{waveType:0,frequency:1,detune:2})}}const ke=e=>({toggled:1&e}),Se=e=>({toggled:e[0]});function Ue(e){let t,n,i=(e[0]?e[4]:e[5])+"";return{c(){t=p("span"),n=v(i),y(t,"class","svelte-1c9ojcg")},m(e,i){h(e,t,i),d(t,n)},p(e,t){49&t&&i!==(i=(e[0]?e[4]:e[5])+"")&&b(n,i)},d(e){e&&f(t)}}}function Ee(e){let t,n,o,s,c,w,G,I,k,S;const U=e[11].default,E=r(U,e,e[10],Se),q=E||function(e){let t,n=e[4]&&e[5]&&Ue(e);return{c(){n&&n.c(),t=g()},m(e,i){n&&n.m(e,i),h(e,t,i)},p(e,i){e[4]&&e[5]?n?n.p(e,i):(n=Ue(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&f(t)}}}(e);return{c(){t=p("div"),n=p("label"),o=v(e[1]),s=m(),c=p("div"),w=p("button"),G=m(),q&&q.c(),y(n,"for",e[9]),y(n,"class","svelte-1c9ojcg"),x(n,"hideLabel",e[2]),y(w,"id",e[9]),y(w,"aria-checked",e[0]),y(w,"type","button"),y(w,"role","switch"),$(w,"color",e[6]),$(w,"background-color",e[0]?e[7]:e[8]),w.disabled=e[3],y(w,"class","svelte-1c9ojcg"),y(c,"class","svelte-1c9ojcg"),y(t,"class","container svelte-1c9ojcg")},m(i,r){h(i,t,r),d(t,n),d(n,o),d(t,s),d(t,c),d(c,w),d(c,G),q&&q.m(c,null),I=!0,k||(S=[N(w,"click",e[12]),N(w,"click",e[15]),N(w,"focus",e[13]),N(w,"blur",e[14])],k=!0)},p(e,[t]){(!I||2&t)&&b(o,e[1]),4&t&&x(n,"hideLabel",e[2]),(!I||1&t)&&y(w,"aria-checked",e[0]),(!I||64&t)&&$(w,"color",e[6]),(!I||385&t)&&$(w,"background-color",e[0]?e[7]:e[8]),(!I||8&t)&&(w.disabled=e[3]),E?E.p&&(!I||1025&t)&&u(E,U,e,e[10],I?a(U,e[10],t,ke):l(e[10]),Se):q&&q.p&&(!I||49&t)&&q.p(e,I?t:-1)},i(e){I||(H(q,e),I=!0)},o(e){_(q,e),I=!1},d(e){e&&f(t),q&&q.d(e),k=!1,i(S)}}}function qe(e,t,n){let{$$slots:i={},$$scope:o}=t,{toggled:s=!0}=t,{label:r="Label"}=t,{hideLabel:c=!1}=t,{disabled:a=!1}=t,{on:u}=t,{off:l}=t,{switchColor:d="#fff"}=t,{toggledColor:h="#0f62fe"}=t,{untoggledColor:f="#8d8d8d"}=t,p="toggle"+Math.random().toString(36);const v=S();return e.$$set=e=>{"toggled"in e&&n(0,s=e.toggled),"label"in e&&n(1,r=e.label),"hideLabel"in e&&n(2,c=e.hideLabel),"disabled"in e&&n(3,a=e.disabled),"on"in e&&n(4,u=e.on),"off"in e&&n(5,l=e.off),"switchColor"in e&&n(6,d=e.switchColor),"toggledColor"in e&&n(7,h=e.toggledColor),"untoggledColor"in e&&n(8,f=e.untoggledColor),"$$scope"in e&&n(10,o=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&v("toggle",s)},[s,r,c,a,u,l,d,h,f,p,o,i,function(t){U.call(this,e,t)},function(t){U.call(this,e,t)},function(t){U.call(this,e,t)},()=>n(0,s=!s)]}class Te extends Z{constructor(e){super(),K(this,e,qe,Ee,s,{toggled:0,label:1,hideLabel:2,disabled:3,on:4,off:5,switchColor:6,toggledColor:7,untoggledColor:8})}}function Re(e){let t,n,i;function o(t){e[5](t)}let s={slot:"knob3",title:"DEPTH",unit:"",max:100,min:1};return void 0!==e[3]&&(s.value=e[3]),t=new fe({props:s}),q.push((()=>B(t,"value",o))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(e,i){const o={};!n&&8&i&&(n=!0,o.value=e[3],D((()=>n=!1))),t.$set(o)},i(e){i||(H(t.$$.fragment,e),i=!0)},o(e){_(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function Le(e){let t,n,i;function o(t){e[4](t)}let s={slot:"label",hideLabel:!0,label:"toggle LFO",switchColor:"#ff3e00",toggledColor:"#fff",untoggledColor:"#fff",on:"LFO on",off:"LFO off"};return void 0!==e[0]&&(s.toggled=e[0]),t=new Te({props:s}),q.push((()=>B(t,"toggled",o))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(e,i){const o={};!n&&1&i&&(n=!0,o.toggled=e[0],D((()=>n=!1))),t.$set(o)},i(e){i||(H(t.$$.fragment,e),i=!0)},o(e){_(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function Ce(e){let t,n,i,o;function s(t){e[6](t)}function r(t){e[7](t)}let c={disabled:!e[0],maxFrequency:200,minFrequency:1,enableInverseFrequency:!0,$$slots:{label:[Le],knob3:[Re]},$$scope:{ctx:e}};return void 0!==e[2]&&(c.frequency=e[2]),void 0!==e[1]&&(c.waveType=e[1]),t=new be({props:c}),q.push((()=>B(t,"frequency",s))),q.push((()=>B(t,"waveType",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),o=!0},p(e,[o]){const s={};1&o&&(s.disabled=!e[0]),265&o&&(s.$$scope={dirty:o,ctx:e}),!n&&4&o&&(n=!0,s.frequency=e[2],D((()=>n=!1))),!i&&2&o&&(i=!0,s.waveType=e[1],D((()=>i=!1))),t.$set(s)},i(e){o||(H(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){X(t,e)}}}function Fe(e,t,n){let{lfoActive:i}=t,{waveType:o}=t,{frequency:s}=t,{depth:r}=t;return e.$$set=e=>{"lfoActive"in e&&n(0,i=e.lfoActive),"waveType"in e&&n(1,o=e.waveType),"frequency"in e&&n(2,s=e.frequency),"depth"in e&&n(3,r=e.depth)},[i,o,s,r,function(e){i=e,n(0,i)},function(e){r=e,n(3,r)},function(e){s=e,n(2,s)},function(e){o=e,n(1,o)}]}class De extends Z{constructor(e){super(),K(this,e,Fe,Ce,s,{lfoActive:0,waveType:1,frequency:2,depth:3})}}function Oe(e){let t,n,i,o,s,r,c,a,u,l,d;function p(t){e[9](t)}function v(t){e[10](t)}function g(t){e[11](t)}let N={};function y(t){e[12](t)}function b(t){e[13](t)}function $(t){e[14](t)}function x(t){e[15](t)}void 0!==e[3]&&(N.frequency=e[3]),void 0!==e[2]&&(N.waveType=e[2]),void 0!==e[4]&&(N.detune=e[4]),t=new Ie({props:N}),q.push((()=>B(t,"frequency",p))),q.push((()=>B(t,"waveType",v))),q.push((()=>B(t,"detune",g)));let w={};return void 0!==e[8]&&(w.lfoActive=e[8]),void 0!==e[6]&&(w.frequency=e[6]),void 0!==e[5]&&(w.waveType=e[5]),void 0!==e[7]&&(w.depth=e[7]),r=new De({props:w}),q.push((()=>B(r,"lfoActive",y))),q.push((()=>B(r,"frequency",b))),q.push((()=>B(r,"waveType",$))),q.push((()=>B(r,"depth",x))),{c(){Y(t.$$.fragment),s=m(),Y(r.$$.fragment)},m(e,n){Q(t,e,n),h(e,s,n),Q(r,e,n),d=!0},p(e,s){const d={};!n&&8&s&&(n=!0,d.frequency=e[3],D((()=>n=!1))),!i&&4&s&&(i=!0,d.waveType=e[2],D((()=>i=!1))),!o&&16&s&&(o=!0,d.detune=e[4],D((()=>o=!1))),t.$set(d);const h={};!c&&256&s&&(c=!0,h.lfoActive=e[8],D((()=>c=!1))),!a&&64&s&&(a=!0,h.frequency=e[6],D((()=>a=!1))),!u&&32&s&&(u=!0,h.waveType=e[5],D((()=>u=!1))),!l&&128&s&&(l=!0,h.depth=e[7],D((()=>l=!1))),r.$set(h)},i(e){d||(H(t.$$.fragment,e),H(r.$$.fragment,e),d=!0)},o(e){_(t.$$.fragment,e),_(r.$$.fragment,e),d=!1},d(e){X(t,e),e&&f(s),X(r,e)}}}function Pe(e){let t,n;return t=new se({props:{heading:"SOUNDWAVE",isOpen:!0,removeHandler:e[16],$$slots:{default:[Oe]},$$scope:{ctx:e}}}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,[n]){const i={};3&n&&(i.removeHandler=e[16]),262652&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function Ae(e,t,n){let i,o,{sound:s}=t,{removeHandler:r}=t,c=80,a=0,u=10,l=50,d=!1;return e.$$set=e=>{"sound"in e&&n(0,s=e.sound),"removeHandler"in e&&n(1,r=e.removeHandler)},e.$$.update=()=>{9&e.$$.dirty&&s.setFrequency(c),4&e.$$.dirty&&i&&function(){const{isPlaying:e}=s;s.init(i,c),e&&s.play()}(),17&e.$$.dirty&&void 0!==a&&s.setDetune(a),481&e.$$.dirty&&(d?s.initLfo(o,u,l):s.removeLfo())},[s,r,i,c,a,o,u,l,d,function(e){c=e,n(3,c)},function(e){i=e,n(2,i)},function(e){a=e,n(4,a)},function(e){d=e,n(8,d)},function(e){u=e,n(6,u)},function(e){o=e,n(5,o)},function(e){l=e,n(7,l)},()=>r(s)]}class Me extends Z{constructor(e){super(),K(this,e,Ae,Pe,s,{sound:0,removeHandler:1})}}function je(e){let t,n,i,o,s,r,c,a,u;function l(t){e[4](t)}let d={title:"⅟SAMPLE TIME",max:1e3,min:1,pixelRange:200};function p(t){e[5](t)}void 0!==e[2]&&(d.value=e[2]),t=new fe({props:d}),q.push((()=>B(t,"value",l)));let v={title:"FPS",max:120,min:1,pixelRange:200};function g(t){e[6](t)}void 0!==e[0]&&(v.value=e[0]),o=new fe({props:v}),q.push((()=>B(o,"value",p)));let N={title:"WAVES SHOWING",max:30,min:1,pixelRange:200};return void 0!==e[1]&&(N.value=e[1]),c=new fe({props:N}),q.push((()=>B(c,"value",g))),{c(){Y(t.$$.fragment),i=m(),Y(o.$$.fragment),r=m(),Y(c.$$.fragment)},m(e,n){Q(t,e,n),h(e,i,n),Q(o,e,n),h(e,r,n),Q(c,e,n),u=!0},p(e,i){const r={};!n&&4&i&&(n=!0,r.value=e[2],D((()=>n=!1))),t.$set(r);const u={};!s&&1&i&&(s=!0,u.value=e[0],D((()=>s=!1))),o.$set(u);const l={};!a&&2&i&&(a=!0,l.value=e[1],D((()=>a=!1))),c.$set(l)},i(e){u||(H(t.$$.fragment,e),H(o.$$.fragment,e),H(c.$$.fragment,e),u=!0)},o(e){_(t.$$.fragment,e),_(o.$$.fragment,e),_(c.$$.fragment,e),u=!1},d(e){X(t,e),e&&f(i),X(o,e),e&&f(r),X(c,e)}}}function ze(e){let t,n;return t=new se({props:{heading:"VIEW PARAMETERS",isOpen:!0,$$slots:{default:[je]},$$scope:{ctx:e}}}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,[n]){const i={};135&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function We(e,t,n){let{sampleSize:i}=t,{fps:o=60}=t,{oldWavesDisplayed:s=10}=t,r=10;return e.$$set=e=>{"sampleSize"in e&&n(3,i=e.sampleSize),"fps"in e&&n(0,o=e.fps),"oldWavesDisplayed"in e&&n(1,s=e.oldWavesDisplayed)},e.$$.update=()=>{4&e.$$.dirty&&n(3,i=1/r)},[o,s,r,i,function(e){r=e,n(2,r)},function(e){o=e,n(0,o)},function(e){s=e,n(1,s)}]}class Ve extends Z{constructor(e){super(),K(this,e,We,ze,s,{sampleSize:3,fps:0,oldWavesDisplayed:1})}}var He="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var _e,Be,Ye=(_e=function(e){!function(t){function n(e,t){this.options={},e=e||this.options;var n={frequency:350,peak:1};for(var i in this.inputNode=this.filterNode=r.context.createBiquadFilter(),this.filterNode.type=t,this.outputNode=s.context.createGain(),this.filterNode.connect(this.outputNode),n)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?n[i]:this[i]}function i(){var e,t,n=r.context.sampleRate*this.time,i=s.context.createBuffer(2,n,r.context.sampleRate),o=i.getChannelData(0),c=i.getChannelData(1);for(t=0;n>t;t++)e=this.reverse?n-t:t,o[t]=(2*Math.random()-1)*Math.pow(1-e/n,this.decay),c[t]=(2*Math.random()-1)*Math.pow(1-e/n,this.decay);this.reverbNode.buffer&&(this.inputNode.disconnect(this.reverbNode),this.reverbNode.disconnect(this.wetGainNode),this.reverbNode=s.context.createConvolver(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode)),this.reverbNode.buffer=i}function o(e){for(var t=r.context.sampleRate,n=new Float32Array(t),i=Math.PI/180,o=0;t>o;o++){var s=2*o/t-1;n[o]=(3+e)*s*20*i/(Math.PI+e*Math.abs(s))}return n}var s={},r=s;e.exports?e.exports=s:t.Pizzicato=t.Pz=s;var c=t.AudioContext||t.webkitAudioContext;if(c){s.context=new c;var a=s.context.createGain();a.connect(s.context.destination),s.Util={isString:function(e){return"[object String]"===toString.call(e)},isObject:function(e){return"[object Object]"===toString.call(e)},isFunction:function(e){return"[object Function]"===toString.call(e)},isNumber:function(e){return"[object Number]"===toString.call(e)&&e===+e},isArray:function(e){return"[object Array]"===toString.call(e)},isInRange:function(e,t,n){return!!(r.Util.isNumber(e)&&r.Util.isNumber(t)&&r.Util.isNumber(n))&&e>=t&&n>=e},isBool:function(e){return"boolean"==typeof e},isOscillator:function(e){return e&&"[object OscillatorNode]"===e.toString()},isAudioBufferSourceNode:function(e){return e&&"[object AudioBufferSourceNode]"===e.toString()},isSound:function(e){return e instanceof r.Sound},isEffect:function(e){for(var t in s.Effects)if(e instanceof s.Effects[t])return!0;return!1},normalize:function(e,t,n){return r.Util.isNumber(e)&&r.Util.isNumber(t)&&r.Util.isNumber(n)?(n-t)*e/1+t:void 0},getDryLevel:function(e){return!r.Util.isNumber(e)||e>1||0>e?0:.5>=e?1:1-2*(e-.5)},getWetLevel:function(e){return!r.Util.isNumber(e)||e>1||0>e?0:e>=.5?1:1-2*(.5-e)}};var u=s.context.createGain(),l=Object.getPrototypeOf(Object.getPrototypeOf(u)),d=l.connect;l.connect=function(e){var t=r.Util.isEffect(e)?e.inputNode:e;return d.call(this,t),e},Object.defineProperty(s,"volume",{enumerable:!0,get:function(){return a.gain.value},set:function(e){r.Util.isInRange(e,0,1)&&a&&(a.gain.value=e)}}),Object.defineProperty(s,"masterGainNode",{enumerable:!1,get:function(){return a},set:function(e){console.error("Can't set the master gain node")}}),s.Events={on:function(e,t,n){e&&t&&(this._events=this._events||{},(this._events[e]||(this._events[e]=[])).push({callback:t,context:n||this,handler:this}))},trigger:function(e){var t,n,i,o;if(e&&(this._events=this._events||{},t=this._events[e]||(this._events[e]=[]))){for(n=Math.max(0,arguments.length-1),i=[],o=0;n>o;o++)i[o]=arguments[o+1];for(o=0;o<t.length;o++)t[o].callback.apply(t[o].context,i)}},off:function(e){e?this._events[e]=void 0:this._events={}}},s.Sound=function(e,t){function n(e,t){e=e||{},this.getRawSourceNode=function(){var t=this.sourceNode?this.sourceNode.frequency.value:e.frequency,n=s.context.createOscillator();return n.type=e.type||"sine",n.frequency.value=t||440,n},this.sourceNode=this.getRawSourceNode(),this.sourceNode.gainSuccessor=r.context.createGain(),this.sourceNode.connect(this.sourceNode.gainSuccessor),a.isFunction(t)&&t()}function i(e,t){e=a.isArray(e)?e:[e];var n=new XMLHttpRequest;n.open("GET",e[0],!0),n.responseType="arraybuffer",n.onload=function(n){s.context.decodeAudioData(n.target.response,function(e){c.getRawSourceNode=function(){var t=s.context.createBufferSource();return t.loop=this.loop,t.buffer=e,t},a.isFunction(t)&&t()}.bind(c),function(n){return console.error("Error decoding audio file "+e[0]),e.length>1?(e.shift(),void i(e,t)):(n=n||new Error("Error decoding audio file "+e[0]),void(a.isFunction(t)&&t(n)))}.bind(c))},n.onreadystatechange=function(t){4===n.readyState&&200!==n.status&&console.error("Error while fetching "+e[0]+". "+n.statusText)},n.send()}function o(e,t){var n=a.isFunction(e)?e:e.audioFunction,i=a.isObject(e)&&e.bufferSize?e.bufferSize:null;if(!i)try{s.context.createScriptProcessor()}catch(e){i=2048}this.getRawSourceNode=function(){var e=s.context.createScriptProcessor(i,1,1);return e.onaudioprocess=n,e}}var c=this,a=s.Util,u=function(e){if(e&&!a.isFunction(e)&&!a.isString(e)&&!a.isObject(e))return"Description type not supported. Initialize a sound using an object, a function or a string.";if(a.isObject(e)){if(!a.isString(e.source)||-1===["wave","file","input","script","sound"].indexOf(e.source))return"Specified source not supported. Sources can be wave, file, input or script";if(!("file"!==e.source||e.options&&e.options.path))return"A path is needed for sounds with a file source";if(!("script"!==e.source||e.options&&e.options.audioFunction))return"An audio function is needed for sounds with a script source"}}(e),l=a.isObject(e)&&a.isObject(e.options);if(u)throw console.error(u),new Error("Error initializing Pizzicato Sound: "+u);this.detached=l&&e.options.detached,this.masterVolume=s.context.createGain(),this.fadeNode=s.context.createGain(),this.fadeNode.gain.value=0,this.detached||this.masterVolume.connect(s.masterGainNode),this.lastTimePlayed=0,this.effects=[],this.effectConnectors=[],this.playing=this.paused=!1,this.loop=l&&e.options.loop,this.attack=l&&a.isNumber(e.options.attack)?e.options.attack:.04,this.volume=l&&a.isNumber(e.options.volume)?e.options.volume:1,l&&a.isNumber(e.options.release)?this.release=e.options.release:l&&a.isNumber(e.options.sustain)?(console.warn("'sustain' is deprecated. Use 'release' instead."),this.release=e.options.sustain):this.release=.04,e?a.isString(e)?i.bind(this)(e,t):a.isFunction(e)?o.bind(this)(e,t):"file"===e.source?i.bind(this)(e.options.path,t):"wave"===e.source?n.bind(this)(e.options,t):"input"===e.source?function(e,t){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia||navigator.mediaDevices.getUserMedia){var n=function(e){c.getRawSourceNode=function(){return s.context.createMediaStreamSource(e)},a.isFunction(t)&&t()}.bind(c),i=function(e){a.isFunction(t)&&t(e)};navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(n).catch(i):navigator.getUserMedia({audio:!0},n,i)}else console.error("Your browser does not support getUserMedia")}.bind(this)(e,t):"script"===e.source?o.bind(this)(e.options,t):"sound"===e.source&&function(e,t){this.getRawSourceNode=e.sound.getRawSourceNode,e.sound.sourceNode&&r.Util.isOscillator(e.sound.sourceNode)&&(this.sourceNode=this.getRawSourceNode(),this.frequency=e.sound.frequency)}.bind(this)(e.options,t):n.bind(this)({},t)},s.Sound.prototype=Object.create(s.Events,{play:{enumerable:!0,value:function(e,t){this.playing||(r.Util.isNumber(t)||(t=this.offsetTime||0),r.Util.isNumber(e)||(e=0),this.playing=!0,this.paused=!1,this.sourceNode=this.getSourceNode(),this.applyAttack(),r.Util.isFunction(this.sourceNode.start)&&(this.lastTimePlayed=s.context.currentTime-t,this.sourceNode.start(r.context.currentTime+e,t)),this.trigger("play"))}},stop:{enumerable:!0,value:function(){(this.paused||this.playing)&&(this.paused=this.playing=!1,this.stopWithRelease(),this.offsetTime=0,this.trigger("stop"))}},pause:{enumerable:!0,value:function(){if(!this.paused&&this.playing){this.paused=!0,this.playing=!1,this.stopWithRelease();var e=r.context.currentTime-this.lastTimePlayed;this.sourceNode.buffer?this.offsetTime=e%(this.sourceNode.buffer.length/r.context.sampleRate):this.offsetTime=e,this.trigger("pause")}}},clone:{enumerable:!0,value:function(){for(var e=new s.Sound({source:"sound",options:{loop:this.loop,attack:this.attack,release:this.release,volume:this.volume,sound:this}}),t=0;t<this.effects.length;t++)e.addEffect(this.effects[t]);return e}},onEnded:{enumerable:!0,value:function(e){return function(){this.sourceNode&&this.sourceNode!==e||(this.playing&&this.stop(),this.paused||this.trigger("end"))}}},addEffect:{enumerable:!0,value:function(e){if(!r.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.fadeNode;t.disconnect(),t.connect(e);var n=r.context.createGain();return this.effectConnectors.push(n),e.connect(n),n.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this sound."),this;var n=this.playing;n&&this.pause();var i=0===t?this.fadeNode:this.effectConnectors[t-1];i.disconnect();var o,s=this.effectConnectors[t];return s.disconnect(),e.disconnect(s),this.effectConnectors.splice(t,1),this.effects.splice(t,1),o=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],i.connect(o),n&&this.play(),this}},connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},connectEffects:{enumerable:!0,value:function(){for(var e=[],t=0;t<this.effects.length;t++){var n=t===this.effects.length-1?this.masterVolume:this.effects[t+1].inputNode;e[t]=r.context.createGain(),this.effects[t].outputNode.disconnect(this.effectConnectors[t]),this.effects[t].outputNode.connect(n)}}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){r.Util.isInRange(e,0,1)&&this.masterVolume&&(this.masterVolume.gain.value=e)}},frequency:{enumerable:!0,get:function(){return this.sourceNode&&r.Util.isOscillator(this.sourceNode)?this.sourceNode.frequency.value:null},set:function(e){this.sourceNode&&r.Util.isOscillator(this.sourceNode)&&(this.sourceNode.frequency.value=e)}},sustain:{enumerable:!0,get:function(){return console.warn("'sustain' is deprecated. Use 'release' instead."),this.release},set:function(e){console.warn("'sustain' is deprecated. Use 'release' instead."),r.Util.isInRange(e,0,10)&&(this.release=e)}},getSourceNode:{enumerable:!0,value:function(){if(this.sourceNode){var e=this.sourceNode;e.gainSuccessor.gain.setValueAtTime(e.gainSuccessor.gain.value,r.context.currentTime),e.gainSuccessor.gain.linearRampToValueAtTime(1e-4,r.context.currentTime+.2),setTimeout((function(){e.disconnect(),e.gainSuccessor.disconnect()}),200)}var t=this.getRawSourceNode();return t.gainSuccessor=r.context.createGain(),t.connect(t.gainSuccessor),t.gainSuccessor.connect(this.fadeNode),this.fadeNode.connect(this.getInputNode()),r.Util.isAudioBufferSourceNode(t)&&(t.onended=this.onEnded(t).bind(this)),t}},getInputNode:{enumerable:!0,value:function(){return this.effects.length>0?this.effects[0].inputNode:this.masterVolume}},applyAttack:{enumerable:!1,value:function(){if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(r.context.currentTime),this.attack){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t=this.attack;e||(t=(1-this.fadeNode.gain.value)*this.attack),this.fadeNode.gain.setTargetAtTime(1,r.context.currentTime,2*t)}else this.fadeNode.gain.setTargetAtTime(1,r.context.currentTime,.001)}},stopWithRelease:{enumerable:!1,value:function(e){var t=this.sourceNode,n=function(){return r.Util.isFunction(t.stop)?t.stop(0):t.disconnect()};if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(r.context.currentTime),!this.release)return this.fadeNode.gain.setTargetAtTime(0,r.context.currentTime,.001),void n();var i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o=this.release;i||(o=this.fadeNode.gain.value*this.release),this.fadeNode.gain.setTargetAtTime(1e-5,r.context.currentTime,o/5),window.setTimeout((function(){n()}),1e3*o)}}}),s.Group=function(e){e=e||[],this.mergeGainNode=r.context.createGain(),this.masterVolume=r.context.createGain(),this.sounds=[],this.effects=[],this.effectConnectors=[],this.mergeGainNode.connect(this.masterVolume),this.masterVolume.connect(r.masterGainNode);for(var t=0;t<e.length;t++)this.addSound(e[t])},s.Group.prototype=Object.create(r.Events,{connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},addSound:{enumerable:!0,value:function(e){return r.Util.isSound(e)?this.sounds.indexOf(e)>-1?void console.warn("The Pizzicato.Sound object was already added to this group"):e.detached?void console.warn("Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together."):(e.disconnect(r.masterGainNode),e.connect(this.mergeGainNode),void this.sounds.push(e)):void console.error("You can only add Pizzicato.Sound objects")}},removeSound:{enumerable:!0,value:function(e){var t=this.sounds.indexOf(e);return-1===t?void console.warn("Cannot remove a sound that is not part of this group."):(e.disconnect(this.mergeGainNode),e.connect(r.masterGainNode),void this.sounds.splice(t,1))}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){r.Util.isInRange(e,0,1)&&(this.masterVolume.gain.value=e)}},play:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].play();this.trigger("play")}},stop:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].stop();this.trigger("stop")}},pause:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].pause();this.trigger("pause")}},addEffect:{enumerable:!0,value:function(e){if(!r.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.mergeGainNode;t.disconnect(),t.connect(e);var n=r.context.createGain();return this.effectConnectors.push(n),e.connect(n),n.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this group."),this;var n=0===t?this.mergeGainNode:this.effectConnectors[t-1];n.disconnect();var i,o=this.effectConnectors[t];return o.disconnect(),e.disconnect(o),this.effectConnectors.splice(t,1),this.effects.splice(t,1),i=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],n.connect(i),this}}}),s.Effects={};var h=Object.create(null,{connect:{enumerable:!0,value:function(e){return this.outputNode.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.outputNode.disconnect(e),this}}});s.Effects.Delay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.delayNode),this.inputNode.connect(this.delayNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Delay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),s.Effects.Compressor=function(e){this.options={},e=e||this.options;var t={threshold:-24,knee:30,attack:.003,release:.25,ratio:12};for(var n in this.inputNode=this.compressorNode=s.context.createDynamicsCompressor(),this.outputNode=s.context.createGain(),this.compressorNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Compressor.prototype=Object.create(h,{threshold:{enumerable:!0,get:function(){return this.compressorNode.threshold.value},set:function(e){s.Util.isInRange(e,-100,0)&&(this.compressorNode.threshold.value=e)}},knee:{enumerable:!0,get:function(){return this.compressorNode.knee.value},set:function(e){s.Util.isInRange(e,0,40)&&(this.compressorNode.knee.value=e)}},attack:{enumerable:!0,get:function(){return this.compressorNode.attack.value},set:function(e){s.Util.isInRange(e,0,1)&&(this.compressorNode.attack.value=e)}},release:{enumerable:!0,get:function(){return this.compressorNode.release.value},set:function(e){s.Util.isInRange(e,0,1)&&(this.compressorNode.release.value=e)}},ratio:{enumerable:!0,get:function(){return this.compressorNode.ratio.value},set:function(e){s.Util.isInRange(e,1,20)&&(this.compressorNode.ratio.value=e)}},getCurrentGainReduction:function(){return this.compressorNode.reduction}}),s.Effects.LowPassFilter=function(e){n.call(this,e,"lowpass")},s.Effects.HighPassFilter=function(e){n.call(this,e,"highpass")};var f=Object.create(h,{frequency:{enumerable:!0,get:function(){return this.filterNode.frequency.value},set:function(e){s.Util.isInRange(e,10,22050)&&(this.filterNode.frequency.value=e)}},peak:{enumerable:!0,get:function(){return this.filterNode.Q.value},set:function(e){s.Util.isInRange(e,1e-4,1e3)&&(this.filterNode.Q.value=e)}}});s.Effects.LowPassFilter.prototype=f,s.Effects.HighPassFilter.prototype=f,s.Effects.Distortion=function(e){this.options={},e=e||this.options;var t={gain:.5};for(var n in this.waveShaperNode=s.context.createWaveShaper(),this.inputNode=this.outputNode=this.waveShaperNode,t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Distortion.prototype=Object.create(h,{gain:{enumerable:!0,get:function(){return this.options.gain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.gain=e,this.adjustGain())}},adjustGain:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var e,t=r.Util.isNumber(this.options.gain)?parseInt(100*this.options.gain,10):50,n=44100,i=new Float32Array(n),o=Math.PI/180,s=0;n>s;++s)e=2*s/n-1,i[s]=(3+t)*e*20*o/(Math.PI+t*Math.abs(e));this.waveShaperNode.curve=i}}}),s.Effects.Flanger=function(e){this.options={},e=e||this.options;var t={time:.45,speed:.2,depth:.1,feedback:.1,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.inputFeedbackNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.oscillatorNode=s.context.createOscillator(),this.gainNode=s.context.createGain(),this.feedbackNode=s.context.createGain(),this.oscillatorNode.type="sine",this.inputNode.connect(this.inputFeedbackNode),this.inputNode.connect(this.dryGainNode),this.inputFeedbackNode.connect(this.delayNode),this.inputFeedbackNode.connect(this.wetGainNode),this.delayNode.connect(this.wetGainNode),this.delayNode.connect(this.feedbackNode),this.feedbackNode.connect(this.inputFeedbackNode),this.oscillatorNode.connect(this.gainNode),this.gainNode.connect(this.delayNode.delayTime),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),this.oscillatorNode.start(0),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Flanger.prototype=Object.create(h,{time:{enumberable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.time=e,this.delayNode.delayTime.value=r.Util.normalize(e,.001,.02))}},speed:{enumberable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.speed=e,this.oscillatorNode.frequency.value=r.Util.normalize(e,.5,5))}},depth:{enumberable:!0,get:function(){return this.options.depth},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.depth=e,this.gainNode.gain.value=r.Util.normalize(e,5e-4,.005))}},feedback:{enumberable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=e,this.feedbackNode.gain.value=r.Util.normalize(e,0,.8))}},mix:{enumberable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}}}),s.Effects.StereoPanner=function(e){this.options={},e=e||this.options;var t={pan:0};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):s.context.createPanner?(console.warn("Your browser does not support the StereoPannerNode. Will use PannerNode instead."),this.pannerNode=s.context.createPanner(),this.pannerNode.type="equalpower",this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):(console.warn("Your browser does not support the Panner effect."),this.inputNode.connect(this.outputNode)),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.StereoPanner.prototype=Object.create(h,{pan:{enumerable:!0,get:function(){return this.options.pan},set:function(e){r.Util.isInRange(e,-1,1)&&(this.options.pan=e,this.pannerNode)&&(this.pannerNode.toString().indexOf("StereoPannerNode")>-1?this.pannerNode.pan.value=e:this.pannerNode.setPosition(e,0,1-Math.abs(e)))}}}),s.Effects.Convolver=function(e,t){this.options={},e=e||this.options;var n=this,i=new XMLHttpRequest,o={mix:.5};for(var c in this.callback=t,this.inputNode=s.context.createGain(),this.convolverNode=s.context.createConvolver(),this.outputNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.inputNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),o)this[c]=e[c],this[c]=void 0===this[c]||null===this[c]?o[c]:this[c];return e.impulse?(i.open("GET",e.impulse,!0),i.responseType="arraybuffer",i.onload=function(e){var t=e.target.response;s.context.decodeAudioData(t,(function(e){n.convolverNode.buffer=e,n.callback&&r.Util.isFunction(n.callback)&&n.callback()}),(function(e){e=e||new Error("Error decoding impulse file"),n.callback&&r.Util.isFunction(n.callback)&&n.callback(e)}))},i.onreadystatechange=function(t){4===i.readyState&&200!==i.status&&console.error("Error while fetching "+e.impulse+". "+i.statusText)},void i.send()):void console.error("No impulse file specified.")},s.Effects.Convolver.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}}}),s.Effects.PingPongDelay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.delayNodeLeft=s.context.createDelay(),this.delayNodeRight=s.context.createDelay(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.channelMerger=s.context.createChannelMerger(2),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNodeLeft.connect(this.channelMerger,0,0),this.delayNodeRight.connect(this.channelMerger,0,1),this.delayNodeLeft.connect(this.delayNodeRight),this.feedbackGainNode.connect(this.delayNodeLeft),this.delayNodeRight.connect(this.feedbackGainNode),this.inputNode.connect(this.feedbackGainNode),this.channelMerger.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.PingPongDelay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNodeLeft.delayTime.value=e,this.delayNodeRight.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),s.Effects.Reverb=function(e){this.options={},e=e||this.options;var t={mix:.5,time:.01,decay:.01,reverse:!1};for(var n in this.inputNode=s.context.createGain(),this.reverbNode=s.context.createConvolver(),this.outputNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n];i.bind(this)()},s.Effects.Reverb.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,1e-4,10)&&(this.options.time=e,i.bind(this)())}},decay:{enumerable:!0,get:function(){return this.options.decay},set:function(e){r.Util.isInRange(e,1e-4,10)&&(this.options.decay=e,i.bind(this)())}},reverse:{enumerable:!0,get:function(){return this.options.reverse},set:function(e){r.Util.isBool(e)&&(this.options.reverse=e,i.bind(this)())}}}),s.Effects.Tremolo=function(e){this.options={},e=e||this.options;var t={speed:4,depth:1,mix:.8};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.tremoloGainNode=s.context.createGain(),this.tremoloGainNode.gain.value=0,this.lfoNode=s.context.createOscillator(),this.shaperNode=s.context.createWaveShaper(),this.shaperNode.curve=new Float32Array([0,1]),this.shaperNode.connect(this.tremoloGainNode.gain),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.lfoNode.connect(this.shaperNode),this.lfoNode.type="sine",this.lfoNode.start(0),this.inputNode.connect(this.tremoloGainNode),this.tremoloGainNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.Tremolo.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,20)&&(this.options.speed=e,this.lfoNode.frequency.value=e)}},depth:{enumerable:!0,get:function(){return this.options.depth},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.depth=e,this.shaperNode.curve=new Float32Array([1-e,1]))}}}),s.Effects.DubDelay=function(e){this.options={},e=e||this.options;var t={feedback:.6,time:.7,mix:.5,cutoff:700};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.feedbackGainNode=s.context.createGain(),this.delayNode=s.context.createDelay(),this.bqFilterNode=s.context.createBiquadFilter(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.bqFilterNode),this.bqFilterNode.connect(this.delayNode),this.delayNode.connect(this.feedbackGainNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]},s.Effects.DubDelay.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){r.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}},cutoff:{enumerable:!0,get:function(){return this.options.cutoff},set:function(e){r.Util.isInRange(e,0,4e3)&&(this.options.cutoff=e,this.bqFilterNode.frequency.value=this.cutoff)}}}),s.Effects.RingModulator=function(e){this.options={},e=e||this.options;var t={speed:30,distortion:1,mix:.5};for(var n in this.inputNode=s.context.createGain(),this.outputNode=s.context.createGain(),this.dryGainNode=s.context.createGain(),this.wetGainNode=s.context.createGain(),this.vIn=s.context.createOscillator(),this.vIn.start(0),this.vInGain=s.context.createGain(),this.vInGain.gain.value=.5,this.vInInverter1=s.context.createGain(),this.vInInverter1.gain.value=-1,this.vInInverter2=s.context.createGain(),this.vInInverter2.gain.value=-1,this.vInDiode1=new p(s.context),this.vInDiode2=new p(s.context),this.vInInverter3=s.context.createGain(),this.vInInverter3.gain.value=-1,this.vcInverter1=s.context.createGain(),this.vcInverter1.gain.value=-1,this.vcDiode3=new p(s.context),this.vcDiode4=new p(s.context),this.outGain=s.context.createGain(),this.outGain.gain.value=3,this.compressor=s.context.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.ratio.value=16,this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.vcInverter1),this.inputNode.connect(this.vcDiode4.node),this.vcInverter1.connect(this.vcDiode3.node),this.vIn.connect(this.vInGain),this.vInGain.connect(this.vInInverter1),this.vInGain.connect(this.vcInverter1),this.vInGain.connect(this.vcDiode4.node),this.vInInverter1.connect(this.vInInverter2),this.vInInverter1.connect(this.vInDiode2.node),this.vInInverter2.connect(this.vInDiode1.node),this.vInDiode1.connect(this.vInInverter3),this.vInDiode2.connect(this.vInInverter3),this.vInInverter3.connect(this.compressor),this.vcDiode3.connect(this.compressor),this.vcDiode4.connect(this.compressor),this.compressor.connect(this.outGain),this.outGain.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[n]=e[n],this[n]=void 0===this[n]||null===this[n]?t[n]:this[n]};var p=function(e){this.context=e,this.node=this.context.createWaveShaper(),this.vb=.2,this.vl=.4,this.h=1,this.setCurve()};return p.prototype.setDistortion=function(e){return this.h=e,this.setCurve()},p.prototype.setCurve=function(){var e,t,n,i,o,s,r;for(t=1024,e=s=0,r=(o=new Float32Array(t)).length;r>=0?r>s:s>r;e=r>=0?++s:--s)n=(e-512)/512,i=(n=Math.abs(n))<=this.vb?0:this.vb<n&&n<=this.vl?this.h*(Math.pow(n-this.vb,2)/(2*this.vl-2*this.vb)):this.h*n-this.h*this.vl+this.h*(Math.pow(this.vl-this.vb,2)/(2*this.vl-2*this.vb)),o[e]=i;return this.node.curve=o},p.prototype.connect=function(e){return this.node.connect(e)},s.Effects.RingModulator.prototype=Object.create(h,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=s.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=s.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){r.Util.isInRange(e,0,2e3)&&(this.options.speed=e,this.vIn.frequency.value=e)}},distortion:{enumerable:!0,get:function(){return this.options.distortion},set:function(e){if(r.Util.isInRange(e,.2,50)){this.options.distortion=parseFloat(e,10);for(var t=[this.vInDiode1,this.vInDiode2,this.vcDiode3,this.vcDiode4],n=0,i=t.length;i>n;n++)t[n].setDistortion(e)}}}}),s.Effects.Quadrafuzz=function(e){this.options={},e=e||this.options;var t={lowGain:.6,midLowGain:.8,midHighGain:.5,highGain:.6};this.inputNode=r.context.createGain(),this.outputNode=r.context.createGain(),this.dryGainNode=r.context.createGain(),this.wetGainNode=r.context.createGain(),this.lowpassLeft=r.context.createBiquadFilter(),this.lowpassLeft.type="lowpass",this.lowpassLeft.frequency.value=147,this.lowpassLeft.Q.value=.7071,this.bandpass1Left=r.context.createBiquadFilter(),this.bandpass1Left.type="bandpass",this.bandpass1Left.frequency.value=587,this.bandpass1Left.Q.value=.7071,this.bandpass2Left=r.context.createBiquadFilter(),this.bandpass2Left.type="bandpass",this.bandpass2Left.frequency.value=2490,this.bandpass2Left.Q.value=.7071,this.highpassLeft=r.context.createBiquadFilter(),this.highpassLeft.type="highpass",this.highpassLeft.frequency.value=4980,this.highpassLeft.Q.value=.7071,this.overdrives=[];for(var n=0;4>n;n++)this.overdrives[n]=r.context.createWaveShaper(),this.overdrives[n].curve=o();this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode);var i=[this.lowpassLeft,this.bandpass1Left,this.bandpass2Left,this.highpassLeft];for(n=0;n<i.length;n++)this.wetGainNode.connect(i[n]),i[n].connect(this.overdrives[n]),this.overdrives[n].connect(this.outputNode);for(var s in t)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?t[s]:this[s]},s.Effects.Quadrafuzz.prototype=Object.create(h,{lowGain:{enumerable:!0,get:function(){return this.options.lowGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.lowGain=e,this.overdrives[0].curve=o(r.Util.normalize(this.lowGain,0,150)))}},midLowGain:{enumerable:!0,get:function(){return this.options.midLowGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.midLowGain=e,this.overdrives[1].curve=o(r.Util.normalize(this.midLowGain,0,150)))}},midHighGain:{enumerable:!0,get:function(){return this.options.midHighGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.midHighGain=e,this.overdrives[2].curve=o(r.Util.normalize(this.midHighGain,0,150)))}},highGain:{enumerable:!0,get:function(){return this.options.highGain},set:function(e){r.Util.isInRange(e,0,1)&&(this.options.highGain=e,this.overdrives[3].curve=o(r.Util.normalize(this.highGain,0,150)))}}}),s}console.error("No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.")}("undefined"!=typeof window?window:He)},_e(Be={exports:{}},Be.exports),Be.exports);let Qe,Xe,Je,Ke,Ze,et,tt,nt,it,ot,st;function rt(){const e=new AudioWorkletNode(Qe,"soundwave-processor",{processorOptions:nt});return e.port.onmessage=e=>{!function(e){const{id:t,data:n}=e;switch(t){case"waveData":it(n);break;case"error":ot(n);break;default:console.warn("unknown processor message",e)}}(e.data)},e}function ct(e,t){return new Ye.Sound({source:"wave",options:{type:e,frequency:t,detached:!0}})}function at(e){e&&(e.off(),e.stop(),e.disconnect())}async function ut(e,t){console.log("startUserAudio",{echoCancellation:e,noiseSuppression:t}),lt(),navigator.mediaDevices.getUserMedia({audio:{echoCancellation:e,noiseSuppression:t}}).then((e=>(new MediaStreamAudioSourceNode(Qe,{mediaStream:e}).connect(Xe),ft(),Ze=!0,et=e,!0))).catch((e=>(console.error(e),e)))}function lt(){Ze=!1,pt(),et&&(et.getAudioTracks().forEach((e=>{e.stop()})),et=null)}function dt(){Je.connect(Xe),ft(),Ke=!0}function ht(){Ke=!1,pt()}function ft(){tt||(console.log("startSoundProcessor"),tt=rt(),Xe.connect(tt),tt.connect(Ye.masterGainNode))}function pt(){!tt||Ze||Ke||(console.log("stopSoundProcessor"),gt("stop"),Xe.disconnect(tt),tt.disconnect(Ye.masterGainNode),tt=null)}function vt(e){gt("sweepTime",e)}function mt(e){gt("fps",e)}function gt(e,t){tt&&tt.port.postMessage({id:e,data:t})}function Nt(e={}){return new GainNode(Qe,e)}class yt{constructor(){this.gain=null,this.oscillator=null,this.waveType=null,this.frequency=null,this.destination=null,this.depth=null}init(e,t,n,i){this.waveType=e,this.frequency=t,this.depth=n,this.destination=i,this.remove(),this.oscillator=ct(e,t),this.gain=Nt({gain:n}),this.gain.connect(i),this.oscillator.connect(this.gain)}play(){this.oscillator&&this.oscillator.play()}stop(){this.oscillator&&this.oscillator.stop()}remove(){this.gain&&this.gain.disconnect(),at(this.oscillator)}setFrequency(e){this.oscillator&&(this.oscillator.frequency=e)}}class bt{constructor(){this.soundwave=null,this.gain=null,this.lfo=null,this.isPlaying=!1}init(e,t){this.remove();const{sound:n,soundGain:i}=function(e,t){const n=ct(e,t),i=Qe.createGain();return n.connect(i),i.connect(Je),{sound:n,soundGain:i}}(e,t);this.soundwave=n,this.gain=i}setFrequency(e){this.soundwave&&(this.soundwave.frequency=e)}setDetune(e){this.soundwave&&(this.soundwave.sourceNode.detune.value=e)}initLfo(e,t,n){this.removeLfo(),this.lfo=new yt,this.lfo.init(e,t,n,this.soundwave.sourceNode.frequency),this.isPlaying&&this.lfo.play()}setLfoFrequency(e){this.lfo&&this.lfo.setFrequency(e)}removeLfo(){this.lfo&&(this.lfo.remove(),this.lfo=null)}play(){if(this.isPlaying=!0,this.soundwave&&this.soundwave.play(),this.lfo){const{waveType:e,frequency:t,depth:n}=this.lfo;this.initLfo(e,t,n)}}stop(){this.isPlaying=!1,this.soundwave&&this.soundwave.stop(),this.lfo&&this.lfo.stop()}remove(){this.removeLfo(),at(this.soundwave),this.gain&&this.gain.disconnect()}}function $t(t){let n,i;return{c(){n=p("div"),i=p("canvas"),y(i,"class","canvas svelte-qlemw4"),y(n,"class","canvasContainer center svelte-qlemw4")},m(e,o){h(e,n,o),d(n,i),t[3](i),t[4](n)},p:e,i:e,o:e,d(e){e&&f(n),t[3](null),t[4](null)}}}function xt(e){st(e)}function wt(e){const t=e.getContext("2d");return t.strokeStyle="#ff3e00",t.lineWidth=1,t}function Gt(e,t,n,i){const{xSamples:o,ySamples:s}=e,r=i-100;return{x:n/2+o[t]*n,y:50+(.5+s[t]/2)*r}}function It(e,t,n){let{oldWavesDisplayed:i}=t;const o=[];let s,r,c,a,u,l=null;function d(e){e.width=s.clientWidth,e.height=.33*e.width}function h(){l&&(clearTimeout(l),l=null)}function f(e){h();const{samplesLength:t,continueProcessing:n}=e,{width:s,height:r}=a;let c=Number.POSITIVE_INFINITY;u.clearRect(0,0,s,r),u.beginPath();for(let n=0;n<t;n++){const{x:t,y:i}=Gt(e,n,s,r);t<c?u.moveTo(t,i):u.lineTo(t,i),c=t}u.stroke(),function(){const e=new Image;if(o.push(e),o.length>i){const e=o.length-i;o.splice(0,e)}e.onload=p,e.src=a.toDataURL()}(),n||v()}function p(){const{width:e,height:t}=r;c.clearRect(0,0,e,t),c.imageSmoothingEnabled=!0;const n=i/3;o.forEach(((i,o)=>{const s=Math.min((o+1)/n,1);c.globalAlpha=s.toString(10),c.drawImage(i,0,0,e,t)})),c.globalAlpha=1}function v(){console.log("fadeOutImage",l),!l&&o.length&&(l=setTimeout((()=>{o.splice(0,1),p(),l=null,v()}),16.666666666666668))}return k((()=>{d(r),c=wt(r),a=document.createElement("canvas"),d(a),u=wt(a),st=f})),function(e){I().$$.on_destroy.push(e)}((()=>{h(),st=()=>{},p=()=>{}})),e.$$set=e=>{"oldWavesDisplayed"in e&&n(2,i=e.oldWavesDisplayed)},[s,r,i,function(e){q[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(e){q[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class kt extends Z{constructor(e){super(),K(this,e,It,$t,s,{oldWavesDisplayed:2})}}function St(e,t,n){const i=e.slice();return i[26]=t[n],i[27]=t,i[28]=n,i}function Ut(e){let t,n;return t=new kt({props:{oldWavesDisplayed:e[6]}}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},p(e,n){const i={};64&n&&(i.oldWavesDisplayed=e[6]),t.$set(i)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function Et(t){let n,i;return{c(){n=p("div"),i=v(t[7]),y(n,"class","errorMsg svelte-p4iq6r")},m(e,t){h(e,n,t),d(n,i)},p(e,t){128&t&&b(i,e[7])},i:e,o:e,d(e){e&&f(n)}}}function qt(e){let t;return{c(){t=v("get input")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Tt(e){let t;return{c(){t=v("stop input")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Rt(e){let t;return{c(){t=v("play sound")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Lt(e){let t;return{c(){t=v("stop sound")},m(e,n){h(e,t,n)},d(e){e&&f(t)}}}function Ct(e){let t,n,i,o;function s(t){e[17](t)}function r(t){e[18](t)}let c={removeHandler:e[10]};return void 0!==e[1]&&(c.useEchoCancellation=e[1]),void 0!==e[2]&&(c.useNoiseSuppression=e[2]),t=new ue({props:c}),q.push((()=>B(t,"useEchoCancellation",s))),q.push((()=>B(t,"useNoiseSuppression",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),o=!0},p(e,o){const s={};!n&&2&o&&(n=!0,s.useEchoCancellation=e[1],D((()=>n=!1))),!i&&4&o&&(i=!0,s.useNoiseSuppression=e[2],D((()=>i=!1))),t.$set(s)},i(e){o||(H(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){X(t,e)}}}function Ft(e){let t,n,i;function o(){return e[19](e[26])}function s(t){e[20](t,e[26],e[27],e[28])}let r={removeHandler:o};return void 0!==e[26]&&(r.sound=e[26]),t=new Me({props:r}),q.push((()=>B(t,"sound",s))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),i=!0},p(i,s){e=i;const r={};256&s&&(r.removeHandler=o),!n&&256&s&&(n=!0,r.sound=e[26],D((()=>n=!1))),t.$set(r)},i(e){i||(H(t.$$.fragment,e),i=!0)},o(e){_(t.$$.fragment,e),i=!1},d(e){X(t,e)}}}function Dt(e){let t,n,o,s,r,c,a,u,l,v,b,$,x,w,G,I,k,S,U,E;function T(t){e[14](t)}function R(t){e[15](t)}function L(t){e[16](t)}let C={};void 0!==e[3]&&(C.sampleSize=e[3]),void 0!==e[6]&&(C.oldWavesDisplayed=e[6]),void 0!==e[4]&&(C.fps=e[4]),t=new Ve({props:C}),q.push((()=>B(t,"sampleSize",T))),q.push((()=>B(t,"oldWavesDisplayed",R))),q.push((()=>B(t,"fps",L)));const F=[Et,Ut],O=[];function P(e,t){return e[7]?0:1}function A(e,t){return e[5]?Tt:qt}c=P(e),a=O[c]=F[c](e);let M=A(e),j=M(e);function z(e,t){return e[0]?Lt:Rt}let J=z(e),K=J(e),Z=e[5]&&Ct(e),ee=e[8],te=[];for(let t=0;t<ee.length;t+=1)te[t]=Ft(St(e,ee,t));const ne=e=>_(te[e],1,1,(()=>{te[e]=null}));return{c(){Y(t.$$.fragment),r=m(),a.c(),u=m(),l=p("div"),v=p("button"),j.c(),b=m(),$=p("button"),K.c(),x=m(),w=p("button"),w.textContent="add a sound",G=m(),Z&&Z.c(),I=m();for(let e=0;e<te.length;e+=1)te[e].c();k=g(),y(v,"class","svelte-p4iq6r"),y($,"class","svelte-p4iq6r"),y(w,"class","svelte-p4iq6r")},m(n,i){Q(t,n,i),h(n,r,i),O[c].m(n,i),h(n,u,i),h(n,l,i),d(l,v),j.m(v,null),d(l,b),d(l,$),K.m($,null),d(l,x),d(l,w),h(n,G,i),Z&&Z.m(n,i),h(n,I,i);for(let e=0;e<te.length;e+=1)te[e].m(n,i);h(n,k,i),S=!0,U||(E=[N(v,"click",e[9]),N($,"click",e[11]),N(w,"click",e[12])],U=!0)},p(e,[i]){const r={};!n&&8&i&&(n=!0,r.sampleSize=e[3],D((()=>n=!1))),!o&&64&i&&(o=!0,r.oldWavesDisplayed=e[6],D((()=>o=!1))),!s&&16&i&&(s=!0,r.fps=e[4],D((()=>s=!1))),t.$set(r);let l=c;if(c=P(e),c===l?O[c].p(e,i):(W(),_(O[l],1,1,(()=>{O[l]=null})),V(),a=O[c],a?a.p(e,i):(a=O[c]=F[c](e),a.c()),H(a,1),a.m(u.parentNode,u)),M!==(M=A(e))&&(j.d(1),j=M(e),j&&(j.c(),j.m(v,null))),J!==(J=z(e))&&(K.d(1),K=J(e),K&&(K.c(),K.m($,null))),e[5]?Z?(Z.p(e,i),32&i&&H(Z,1)):(Z=Ct(e),Z.c(),H(Z,1),Z.m(I.parentNode,I)):Z&&(W(),_(Z,1,1,(()=>{Z=null})),V()),8448&i){let t;for(ee=e[8],t=0;t<ee.length;t+=1){const n=St(e,ee,t);te[t]?(te[t].p(n,i),H(te[t],1)):(te[t]=Ft(n),te[t].c(),H(te[t],1),te[t].m(k.parentNode,k))}for(W(),t=ee.length;t<te.length;t+=1)ne(t);V()}},i(e){if(!S){H(t.$$.fragment,e),H(a),H(Z);for(let e=0;e<ee.length;e+=1)H(te[e]);S=!0}},o(e){_(t.$$.fragment,e),_(a),_(Z),te=te.filter(Boolean);for(let e=0;e<te.length;e+=1)_(te[e]);S=!1},d(e){X(t,e),e&&f(r),O[c].d(e),e&&f(u),e&&f(l),j.d(),K.d(),e&&f(G),Z&&Z.d(e),e&&f(I),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(te,e),e&&f(k),U=!1,i(E)}}}function Ot(e,t,n){let i,o,s,r,c=!1,a=!1,u=!1,l=!0,d=[];function h(){console.log("startAudioInput"),ut(u,l).then((()=>{console.log("got user audio"),n(5,a=!0)})).catch((e=>{console.error("cannot get user audio",{error:e}),n(7,r="cannot get audio input"),n(5,a=!1)}))}function f(){lt(),n(5,a=!1)}function p(e){const t=d.indexOf(e);if(t>-1){const{[t]:e,...i}=d;e.remove(),n(8,d=Object.values(i))}}function v(e){let t="an error occurred.";if("process"===e)t="cannot get audio data. please check your audio system - is your audio used by another app?";n(7,r=t)}k((()=>{!async function(e,t){it=e,ot=t,Qe=Ye.context,Je=Nt(),Xe=new Ye.Effects.Compressor({threshold:-5,knee:0,ratio:40,attack:.001,release:.1}),nt={mainGain:Ye.masterGainNode.gain.value,sampleRate:Qe.sampleRate},await Qe.audioWorklet.addModule("utils/SoundwaveProcessor.js")}(xt,v),n(8,d=d.concat(new bt))}));return e.$$.update=()=>{1&e.$$.dirty&&(c?(dt(),vt(i),mt(o),d.forEach((e=>e.play()))):(d.forEach((e=>e.stop())),n(0,c=!1),setTimeout((()=>{c||ht()}),600))),8&e.$$.dirty&&vt(i),16&e.$$.dirty&&mt(o),6&e.$$.dirty&&(console.log("updateAudioInput"),a&&h())},[c,u,l,i,o,a,s,r,d,function(){n(7,r=null),a?f():h()},f,function(){n(7,r=null),n(0,c=!c)},function(){const e=new bt;n(8,d=d.concat(e)),c&&(d.forEach((e=>e.stop())),d.forEach((e=>e.play())))},p,function(e){i=e,n(3,i)},function(e){s=e,n(6,s)},function(e){o=e,n(4,o)},function(e){u=e,n(1,u)},function(e){l=e,n(2,l)},e=>p(e),function(e,t,i,o){i[o]=e,n(8,d)}]}class Pt extends Z{constructor(e){super(),K(this,e,Ot,Dt,s,{})}}function At(t){let n;return{c(){n=p("div"),n.textContent="click anywhere to start"},m(e,t){h(e,n,t)},i:e,o:e,d(e){e&&f(n)}}}function Mt(e){let t,n;return t=new Pt({}),{c(){Y(t.$$.fragment)},m(e,i){Q(t,e,i),n=!0},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function jt(e){let t,n,i,o,s,r,c,a,u,l,g,N,$;const x=[Mt,At],w=[];function G(e,t){return e[1]?0:1}return g=G(e),N=w[g]=x[g](e),{c(){t=p("main"),n=p("h1"),n.textContent="JS SYNTH",i=m(),o=p("small"),s=v("v. "),r=v(e[0]),c=v(" · "),a=p("a"),u=v("ARCHIVE"),l=m(),N.c(),y(n,"class","svelte-xuko3b"),y(a,"href",e[3]),y(a,"class","svelte-xuko3b"),y(o,"class","svelte-xuko3b"),y(t,"class","svelte-xuko3b")},m(f,p){h(f,t,p),d(t,n),d(t,i),d(t,o),d(o,s),d(o,r),d(o,c),d(o,a),d(a,u),e[4](a),d(t,l),w[g].m(t,null),$=!0},p(e,[n]){(!$||1&n)&&b(r,e[0]);let i=g;g=G(e),g!==i&&(W(),_(w[i],1,1,(()=>{w[i]=null})),V(),N=w[g],N||(N=w[g]=x[g](e),N.c()),H(N,1),N.m(t,null))},i(e){$||(H(N),$=!0)},o(e){_(N),$=!1},d(n){n&&f(t),e[4](null),w[g].d()}}}function zt(e,t,n){let i,{version:o}=t,s=!1;const r=location.pathname.includes("/versions/")?"../":"./versions/";return window.addEventListener("pointerup",(function e(t){t.target!==i&&(window.removeEventListener("pointerup",e),n(1,s=!0))})),e.$$set=e=>{"version"in e&&n(0,o=e.version)},[o,s,i,r,function(e){q[e?"unshift":"push"]((()=>{i=e,n(2,i)}))}]}return new class extends Z{constructor(e){super(),K(this,e,zt,jt,s,{version:0})}}({target:document.body,props:{version:"1.6"}})}();
//# sourceMappingURL=bundle.js.map
